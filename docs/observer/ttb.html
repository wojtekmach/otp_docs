<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.25.1">
    <meta name="project" content="observer v2.9.6">

    <title>ttb â€” observer v2.9.6</title>
    <link rel="stylesheet" href="dist/erlang-951161c89561e05735a5.css" />

    <script src="dist/sidebar_items-c034b4eb45.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-f97730d45ef67f3e6188.js"></script>


  </head>
  <body data-type="modules">
    <script>

      try {
        if (localStorage.getItem('night-mode') === 'true') {
          document.body.classList.add('night-mode');
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle">
  <span class="icon-menu" title="Collapse/expand sidebar"></span>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <span class="icon-search" aria-hidden="true" title="Submit search"></span>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <span class="icon-cross" aria-hidden="true" title="Cancel search"></span>
    </button>
    <label class="search-label">
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">
    <div class="sidebar-projectDetails">
      <a href="api-reference.html" class="sidebar-projectName">
observer
      </a>
      <strong class="sidebar-projectVersion">
        v2.9.6
      </strong>
    </div>

  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list-link" href="#full-list">Pages</a></li>

      <li><a id="modules-list-link" href="#full-list">Modules</a></li>


  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

      <h1>
ttb <small class="app-vsn">(observer v2.9.6)</small>

      </h1>


        <section id="moduledoc">
<p>The Trace Tool Builder, <code>ttb</code>, is a base for building trace tools for distributed systems.</p><p>When using <code>ttb</code>, do not use module <code>dbg</code> in application Runtime_Tools in parallel.</p>
        </section>


        <section id="summary" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#summary">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Summary
          </h1>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctp/0">ctp()</a>

  </div>

    <div class="summary-synopsis"><p>These functions are to be used with trace flag <code>call</code>, <code>send</code>, and <code>'receive'</code> for setting and clearing trace patterns.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctp/1">ctp({Module, Function, Arity}) ctp(Module [, Function [, Arity]])</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctp/2">ctp(Module [, Function [, Arity]])</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctp/3">ctp(Module [, Function [, Arity]])</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpe/1">ctpe(Event)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpg/0">ctpg()</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpg/1">ctpg({Module, Function, Arity}) ctpg(Module [, Function [, Arity]])</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpg/2">ctpg(Module [, Function [, Arity]])</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpg/3">ctpg(Module [, Function [, Arity]])</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpl/0">ctpl()</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpl/1">ctpl({Module, Function, Arity}) ctpl(Module [, Function [, Arity]])</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpl/2">ctpl(Module [, Function [, Arity]])</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpl/3">ctpl(Module [, Function [, Arity]])</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#format/1">format(File)</a>

  </div>

    <div class="summary-synopsis"><p>Equivalent to <code>format(File,[])</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#format/2">format(File,Options) -&gt; ok | {error, Reason}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">File = string() | [string()]</li><li class="description">This can be the name of a binary log, a list of such logs, or the name of a directory containing one or more binary logs.</li><li class="type">Options = Opt | [Opt]</li><li class="type">Opt = {out,Out} | {handler,FormatHandler} | disable_sort</li><li class="type">Out = standard_io | string()</li><li class="type">FormatHandler = {Function, InitialState}</li><li class="type">Function = fun(Fd,Trace,TraceInfo,State) -&gt; State</li><li class="type">Fd = standard_io | FileDescriptor</li><li class="description">File descriptor of the destination file <code>Out</code>.</li><li class="type">Trace = tuple()</li><li class="description">The trace message. For details, see the Reference Manual for module <code>erlang</code>.</li><li class="type">TraceInfo = [{Key,ValueList}]</li><li class="description">Includes the keys <code>flags</code>, <code>client</code>, and <code>node</code>. If <code>handler</code> is specified as option to the tracer function, this is also included. Also, all information written with function <code>write_trace_info/2</code> is included.</li></ul><p>Reads the specified binary trace log(s). The logs are processed in the order of their time stamps as long as option <code>disable_sort</code> is not specified.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_et_handler/0">get_et_handler()</a>

  </div>

    <div class="summary-synopsis"><p>Returns the <code>et</code> handler, which can be used with <code>format/2</code> or <code>tracer/2</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#list_config/1">list_config(ConfigFile) -&gt; Config | {error,Reason}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">ConfigFile = string()</li><li class="type">Config = [{N,Func,Args}]</li></ul><p>Lists all entries in the specified configuration file.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#list_history/0">list_history() -&gt; History</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">History = [{N,Func,Args}]</li></ul><p>All calls to <code>ttb</code> is stored in the history. This function returns the current content of the history. Any entry can be reexecuted with <code>run_history/1</code> or stored in a configuration file with <code>write_config/2,3</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#p/2">p(Item,Flags) -&gt; Return</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Return = {ok,[{Item,MatchDesc}]}</li><li class="type">Items = Item | [Item]</li><li class="type">Item = pid() | port() | RegName | {global,GlobalRegName} | all | processes | ports | existing | existing_processes | existing_ports | new | new_processes | new_ports</li><li class="type">RegName = atom()</li><li class="type">GlobalRegName = term()</li><li class="type">Flags = Flag | [Flag]</li></ul><p>Sets the specified trace flags on the specified processes or ports. Flag <code>timestamp</code> is always turned on.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#run_config/1">run_config(ConfigFile) -&gt; ok | {error,Reason}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">ConfigFile = string()</li></ul><p>Executes all entries in the specified configuration file. Notice that the history of the last trace is always available in file <code>ttb_last_config</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#run_config/2">run_config(ConfigFile,NumList) -&gt; ok | {error,Reason}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">ConfigFile = string()</li><li class="type">NumList = [integer()]</li></ul><p>Executes selected entries from the specified configuration file. <code>NumList</code> is a list of integers pointing out the entries to be executed.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#run_history/1">run_history(N) -&gt; ok | {error, Reason}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">N = integer() | [integer()]</li></ul><p>Executes the specified entry or entries from the history list. To list history, use <code>list_history/0</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#seq_trigger_ms/0">seq_trigger_ms() -&gt; MatchSpec</a>

  </div>

    <div class="summary-synopsis"><p>Equivalent to <code>seq_trigger_ms(all)</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#seq_trigger_ms/1">seq_trigger_ms(Flags) -&gt; MatchSpec</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">MatchSpec = match_spec()</li><li class="type">Flags = all | SeqTraceFlag | [SeqTraceFlag]</li><li class="type">SeqTraceFlag = atom()</li></ul><p>A match specification can turn on or off sequential tracing. This function returns a match specification, which turns on sequential tracing with the specified <code>Flags</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#start_trace/4">start_trace(Nodes, Patterns, FlagSpec, Opts) -&gt; Result</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Result = see p/2</li><li class="type">Nodes = see tracer/2</li><li class="type">Patterns = [tuple()]</li><li class="type">FlagSpec = {Procs, Flags}</li><li class="type">Proc = see p/2</li><li class="type">Flags = see p/2</li><li class="type">Opts = see tracer/2</li></ul><p>This function is a shortcut allowing to start a trace with one command. Each tuple in <code>Patterns</code> is converted to a list, which in turn is passed to <code>ttb:tpl/2,3,4</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#stop/0">stop()</a>

  </div>

    <div class="summary-synopsis"><p>Equivalent to <code>stop([])</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#stop/1">stop(Opts) -&gt; stopped | {stopped, Dir}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Opts = Opt | [Opt]</li><li class="type">Opt = nofetch | {fetch_dir, Dir} | format | {format, FormatOpts} | return_fetch_dir</li><li class="type">Dir = string()</li><li class="type">FormatOpts = see format/2</li></ul><p>Stops tracing on all nodes. Logs and trace information files are sent to the trace control node and stored in a directory named <code>ttb_upload_FileName-Timestamp</code>, where <code>Filename</code> is the one provided with <code>{file, File}</code> during trace setup and <code>Timestamp</code> is of the form <code>yyyymmdd-hhmmss</code>. Even logs from nodes on the same machine as the trace control node are moved to this directory. The history list is saved to a file named <code>ttb_last_config</code> for further reference (as it is no longer accessible through history and configuration management functions, like <code>ttb:list_history/0</code>).</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tp/2">tp({Module, Function , Arity}, MatchSpec) tp(Module [, Function [, Arity]], MatchSpec)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tp/3">tp(Module [, Function [, Arity]], MatchSpec)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tp/4">tp(Module [, Function [, Arity]], MatchSpec)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tpe/2">tpe(Event,MatchSpec)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tpl/2">tpl({Module, Function , Arity}, MatchSpec) tpl(Module [, Function [, Arity]], MatchSpec)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tpl/3">tpl(Module [, Function [, Arity]], MatchSpec)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tpl/4">tpl(Module [, Function [, Arity]], MatchSpec)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tracer/0">tracer() -&gt; Result</a>

  </div>

    <div class="summary-synopsis"><p>Equivalent to <code>tracer(node())</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tracer/1">tracer(Shortcut) -&gt; Result</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Shortcut = shell | dbg</li></ul><p>Handy shortcuts for common tracing settings.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tracer/1">tracer(Nodes) -&gt; Result</a>

  </div>

    <div class="summary-synopsis"><p>Equivalent to <code>tracer(Nodes,[])</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tracer/2">tracer(Nodes,Opts) -&gt; Result</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Result = {ok, ActivatedNodes} | {error,Reason}</li><li class="type">Nodes = atom() | [atom()] | all | existing | new</li><li class="type">Opts = Opt | [Opt]</li><li class="type">Opt = {file,Client} | {handler, FormatHandler} | {process_info,PI} | shell | {shell, ShellSpec} | {timer, TimerSpec} | {overload_check, {MSec, Module, Function}} | {flush, MSec} | resume | {resume, FetchTimeout} | {queue_size, QueueSize}</li><li class="type">TimerSpec = MSec | {MSec, StopOpts}</li><li class="type">MSec = FetchTimeout = integer()</li><li class="type">Module = Function = atom()</li><li class="type">StopOpts = see stop/2</li><li class="type">Client = File | {local, File}</li><li class="type">File = Filename | Wrap</li><li class="type">Filename = string()</li><li class="type">Wrap = {wrap,Filename} | {wrap,Filename,Size,Count}</li><li class="type">FormatHandler = See format/2</li><li class="type">PI = true | false</li><li class="type">ShellSpec = true | false | only</li><li class="type">QueueSize = non_neg_integer()</li></ul><p>Starts a file trace port on all specified nodes and points the system tracer for sequential tracing to the same port.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#write_config/2">write_config(ConfigFile,Config)</a>

  </div>

    <div class="summary-synopsis"><p>Equivalent to <code>write_config(ConfigFile,Config,[])</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#write_config/3">write_config(ConfigFile,Config,Opts) -&gt; ok | {error,Reason}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">ConfigFile = string()</li><li class="type">Config = all | [integer()] | [{Mod,Func,Args}]</li><li class="type">Mod = atom()</li><li class="type">Func = atom()</li><li class="type">Args = [term()]</li><li class="type">Opts = Opt | [Opt]</li><li class="type">Opt = append</li></ul><p>Creates or extends a configuration file, which can be used for restoring a specific configuration later.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#write_trace_info/2">write_trace_info(Key,Info) -&gt; ok</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Key = term()</li><li class="type">Info = Data | fun() -&gt; Data</li><li class="type">Data = term()</li></ul><p>File <code>.ti</code> contains <code>{Key,ValueList}</code> tuples. This function adds <code>Data</code> to the <code>ValueList</code> associated with <code>Key</code>. All information written with this function is included in the call to the format handler.</p></div>

</div>

  </div>

        </section>


        <section id="functions" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#functions">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
Functions
          </h1>
          <div class="functions-list">
<section class="detail" id="ctp/0">

  <div class="detail-header">
    <a href="#ctp/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctp()</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">

<p>These functions are to be used with trace flag <code>call</code>, <code>send</code>, and <code>'receive'</code> for setting and clearing trace patterns.</p><p>When trace flag <code>call</code> is set on a process, function calls are traced on that process if a trace pattern is set for the called function.</p><p>The <code>send</code> and <code>'receive'</code> flags enable tracing of all messages sent and received by the process/port. Trace patterns set with <code>tpe</code> may limit traced messages based on the message content, the sender, and/or the receiver.</p><p>Trace patterns specify how to trace a function or a message by using match specifications. Match specifications are described in the <code>ERTS User's Guide</code>.</p><p>These functions are equivalent to the corresponding functions in module <a href="https://wojtekmach.pl/otp_docs/runtime_tools/dbg.html">dbg</a>, but all calls are stored in the history. The history buffer makes it easy to create configuration files; the same trace environment can be set up many times, for example, to compare two test runs. It also reduces the amount of typing when using <code>ttb</code> from the Erlang shell.</p><dl><dt><code>tp</code></dt><dd><p>Sets trace patterns on global function calls.</p></dd><dt><code>tpl</code></dt><dd><p>Sets trace patterns on local and global function calls.</p></dd><dt><code>tpe</code></dt><dd><p>Sets trace patterns on messages.</p></dd><dt><code>ctp</code></dt><dd><p>Clears trace patterns on local and global function calls.</p></dd><dt><code>ctpl</code></dt><dd><p>Clears trace patterns on local function calls.</p></dd><dt><code>ctpg</code></dt><dd><p>Clears trace patterns on global function calls.</p></dd><dt><code>ctpe</code></dt><dd><p>Clears trace patterns on messages.</p></dd></dl><p>With <code>tp</code> and <code>tpl</code>, one of the match specification shortcuts can be used (for example, <code>ttb:tp(foo_module, caller)</code>).</p><p>The shortcuts are as follows:</p><ul><li><code>return</code> - for <code>[{'_',[],[{return_trace}]}]</code> (report the return value from a traced function)</li><li><code>caller</code> - for <code>[{'_',[],[{message,{caller}}]}]</code> (report the calling function)</li><li><code>{codestr, Str}</code> - for <code>dbg:fun2ms/1</code> arguments passed as strings (example: <code>&quot;fun(_) -&gt; return_trace() end&quot;</code>)</li></ul>
  </section>
</section>
<section class="detail" id="ctp/1">

  <div class="detail-header">
    <a href="#ctp/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctp({Module, Function, Arity}) ctp(Module [, Function [, Arity]])</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="ctp/2">

  <div class="detail-header">
    <a href="#ctp/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctp(Module [, Function [, Arity]])</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="ctp/3">

  <div class="detail-header">
    <a href="#ctp/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctp(Module [, Function [, Arity]])</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="ctpe/1">

  <div class="detail-header">
    <a href="#ctpe/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpe(Event)</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="ctpg/0">

  <div class="detail-header">
    <a href="#ctpg/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpg()</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="ctpg/1">

  <div class="detail-header">
    <a href="#ctpg/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpg({Module, Function, Arity}) ctpg(Module [, Function [, Arity]])</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="ctpg/2">

  <div class="detail-header">
    <a href="#ctpg/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpg(Module [, Function [, Arity]])</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="ctpg/3">

  <div class="detail-header">
    <a href="#ctpg/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpg(Module [, Function [, Arity]])</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="ctpl/0">

  <div class="detail-header">
    <a href="#ctpl/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpl()</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="ctpl/1">

  <div class="detail-header">
    <a href="#ctpl/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpl({Module, Function, Arity}) ctpl(Module [, Function [, Arity]])</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="ctpl/2">

  <div class="detail-header">
    <a href="#ctpl/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpl(Module [, Function [, Arity]])</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="ctpl/3">

  <div class="detail-header">
    <a href="#ctpl/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpl(Module [, Function [, Arity]])</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="format/1">

  <div class="detail-header">
    <a href="#format/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">format(File)</h1>


  </div>

  <section class="docstring">

<p>Equivalent to <code>format(File,[])</code>.</p>
  </section>
</section>
<section class="detail" id="format/2">

  <div class="detail-header">
    <a href="#format/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">format(File,Options) -&gt; ok | {error, Reason}</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">File = string() | [string()]</li><li class="description">This can be the name of a binary log, a list of such logs, or the name of a directory containing one or more binary logs.</li><li class="type">Options = Opt | [Opt]</li><li class="type">Opt = {out,Out} | {handler,FormatHandler} | disable_sort</li><li class="type">Out = standard_io | string()</li><li class="type">FormatHandler = {Function, InitialState}</li><li class="type">Function = fun(Fd,Trace,TraceInfo,State) -&gt; State</li><li class="type">Fd = standard_io | FileDescriptor</li><li class="description">File descriptor of the destination file <code>Out</code>.</li><li class="type">Trace = tuple()</li><li class="description">The trace message. For details, see the Reference Manual for module <code>erlang</code>.</li><li class="type">TraceInfo = [{Key,ValueList}]</li><li class="description">Includes the keys <code>flags</code>, <code>client</code>, and <code>node</code>. If <code>handler</code> is specified as option to the tracer function, this is also included. Also, all information written with function <code>write_trace_info/2</code> is included.</li></ul><p>Reads the specified binary trace log(s). The logs are processed in the order of their time stamps as long as option <code>disable_sort</code> is not specified.</p><p>If <code>FormatHandler = {Function,InitialState}</code>, <code>Function</code> is called for each trace message.</p><p>If <code>FormatHandler = get_et_handler()</code>, <code>et_viewer</code> in application ET is used for presenting the trace log graphically. <code>ttb</code> provides a few different filters that can be selected from menu <em>Filters and scaling</em> in the <code>et_viewer</code>.</p><p>If <code>FormatHandler</code> is not specified, a default handler is used presenting each trace message as a text line.</p><p>The state returned from each call of <code>Function</code> is passed to the next call, even if the next call is to format a message from another log file.</p><p>If <code>Out</code> is specified, <code>FormatHandler</code> gets the file descriptor to <code>Out</code> as the first parameter.</p><p><code>Out</code> is ignored if the <code>et</code> format handler is used.</p><p>Wrap logs can be formatted one by one or all at once. To format one of the wrap logs in a set, specify the exact file name. To format the whole set of wrap logs, specify the name with <code>*</code> instead of the wrap count. For examples, see the <code>User's Guide</code>.</p>
  </section>
</section>
<section class="detail" id="get_et_handler/0">

  <div class="detail-header">
    <a href="#get_et_handler/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_et_handler()</h1>


      <span class="note">(since OTP R15B)</span>

  </div>

  <section class="docstring">

<p>Returns the <code>et</code> handler, which can be used with <code>format/2</code> or <code>tracer/2</code>.</p><p>Example: <code>ttb:format(Dir, [{handler, ttb:get_et_handler()}])</code>.</p>
  </section>
</section>
<section class="detail" id="list_config/1">

  <div class="detail-header">
    <a href="#list_config/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">list_config(ConfigFile) -&gt; Config | {error,Reason}</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">ConfigFile = string()</li><li class="type">Config = [{N,Func,Args}]</li></ul><p>Lists all entries in the specified configuration file.</p>
  </section>
</section>
<section class="detail" id="list_history/0">

  <div class="detail-header">
    <a href="#list_history/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">list_history() -&gt; History</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">History = [{N,Func,Args}]</li></ul><p>All calls to <code>ttb</code> is stored in the history. This function returns the current content of the history. Any entry can be reexecuted with <code>run_history/1</code> or stored in a configuration file with <code>write_config/2,3</code>.</p>
  </section>
</section>
<section class="detail" id="p/2">

  <div class="detail-header">
    <a href="#p/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">p(Item,Flags) -&gt; Return</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Return = {ok,[{Item,MatchDesc}]}</li><li class="type">Items = Item | [Item]</li><li class="type">Item = pid() | port() | RegName | {global,GlobalRegName} | all | processes | ports | existing | existing_processes | existing_ports | new | new_processes | new_ports</li><li class="type">RegName = atom()</li><li class="type">GlobalRegName = term()</li><li class="type">Flags = Flag | [Flag]</li></ul><p>Sets the specified trace flags on the specified processes or ports. Flag <code>timestamp</code> is always turned on.</p><p>See the Reference Manual for module <a href="https://wojtekmach.pl/otp_docs/runtime_tools/dbg.html"><code>dbg</code></a> for the possible trace flags. Parameter <code>MatchDesc</code> is the same as returned from <code>dbg:p/2</code>.</p><p>Processes can be specified as registered names, globally registered names, or process identifiers. Ports can be specified as registered names or port identifiers. If a registered name is specified, the flags are set on processes/ports with this name on all active nodes.</p><p>Issuing this command starts the timer for this trace if option <code>timer</code> is specified with <code>tracer/2</code>.</p>
  </section>
</section>
<section class="detail" id="run_config/1">

  <div class="detail-header">
    <a href="#run_config/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">run_config(ConfigFile) -&gt; ok | {error,Reason}</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">ConfigFile = string()</li></ul><p>Executes all entries in the specified configuration file. Notice that the history of the last trace is always available in file <code>ttb_last_config</code>.</p>
  </section>
</section>
<section class="detail" id="run_config/2">

  <div class="detail-header">
    <a href="#run_config/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">run_config(ConfigFile,NumList) -&gt; ok | {error,Reason}</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">ConfigFile = string()</li><li class="type">NumList = [integer()]</li></ul><p>Executes selected entries from the specified configuration file. <code>NumList</code> is a list of integers pointing out the entries to be executed.</p><p>To list the contents of a configuration file, use <code>list_config/1</code>.</p><p>Notice that the history of the last trace is always available in file <code>ttb_last_config</code>.</p>
  </section>
</section>
<section class="detail" id="run_history/1">

  <div class="detail-header">
    <a href="#run_history/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">run_history(N) -&gt; ok | {error, Reason}</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">N = integer() | [integer()]</li></ul><p>Executes the specified entry or entries from the history list. To list history, use <code>list_history/0</code>.</p>
  </section>
</section>
<section class="detail" id="seq_trigger_ms/0">

  <div class="detail-header">
    <a href="#seq_trigger_ms/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">seq_trigger_ms() -&gt; MatchSpec</h1>


  </div>

  <section class="docstring">

<p>Equivalent to <code>seq_trigger_ms(all)</code>.</p>
  </section>
</section>
<section class="detail" id="seq_trigger_ms/1">

  <div class="detail-header">
    <a href="#seq_trigger_ms/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">seq_trigger_ms(Flags) -&gt; MatchSpec</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">MatchSpec = match_spec()</li><li class="type">Flags = all | SeqTraceFlag | [SeqTraceFlag]</li><li class="type">SeqTraceFlag = atom()</li></ul><p>A match specification can turn on or off sequential tracing. This function returns a match specification, which turns on sequential tracing with the specified <code>Flags</code>.</p><p>This match specification can be specified as the last argument to <code>tp</code> or <code>tpl</code>. The activated <code>Item</code> then becomes a <em>trigger</em> for sequential tracing. This means that if the item is called on a process with trace flag <code>call</code> set, the process is &quot;contaminated&quot; with token <code>seq_trace</code>.</p><p>If <code>Flags = all</code>, all possible flags are set.</p><p>The possible values for <code>SeqTraceFlag</code> are available in <a href="https://wojtekmach.pl/otp_docs/kernel/seq_trace.html"><code>seq_trace</code></a>.</p><p>For a description of the <code>match_spec()</code> syntax, see section <code>Match Specifications in Erlang</code> in ERTS, which explains the general match specification &quot;language&quot;.</p><div class="note"><p>The <em>system tracer</em> for sequential tracing is automatically initiated by <code>ttb</code> when a trace port is started with <code>ttb:tracer/0,1,2</code>.</p></div><p>An example of how to use function <code>seq_trigger_ms/0,1</code> follows:</p><pre><code class="makeup erlang"><span class="p" data-group-id="7686464335-1">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="7686464335-1">)</span><span class="mi">5</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">ttb</span><span class="p">:</span><span class="nf">tracer</span><span class="p" data-group-id="7686464335-2">(</span><span class="p" data-group-id="7686464335-2">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7686464335-3">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="7686464335-4">[</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="7686464335-4">]</span><span class="p" data-group-id="7686464335-3">}</span><span class="w">
</span><span class="p" data-group-id="7686464335-5">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="7686464335-5">)</span><span class="mi">6</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">ttb</span><span class="p">:</span><span class="nf">p</span><span class="p" data-group-id="7686464335-6">(</span><span class="ss">all</span><span class="p">,</span><span class="ss">call</span><span class="p" data-group-id="7686464335-6">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7686464335-7">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="7686464335-8">{</span><span class="p" data-group-id="7686464335-9">[</span><span class="ss">all</span><span class="p" data-group-id="7686464335-9">]</span><span class="p">,</span><span class="p" data-group-id="7686464335-10">[</span><span class="ss">call</span><span class="p" data-group-id="7686464335-10">]</span><span class="p" data-group-id="7686464335-8">}</span><span class="p" data-group-id="7686464335-7">}</span><span class="w">
</span><span class="p" data-group-id="7686464335-11">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="7686464335-11">)</span><span class="mi">7</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">ttb</span><span class="p">:</span><span class="nf">tp</span><span class="p" data-group-id="7686464335-12">(</span><span class="ss">mod</span><span class="p">,</span><span class="ss">func</span><span class="p">,</span><span class="nc">ttb</span><span class="p">:</span><span class="nf">seq_trigger_ms</span><span class="p" data-group-id="7686464335-13">(</span><span class="p" data-group-id="7686464335-13">)</span><span class="p" data-group-id="7686464335-12">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7686464335-14">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="7686464335-15">[</span><span class="p" data-group-id="7686464335-16">{</span><span class="ss">matched</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="7686464335-16">}</span><span class="p">,</span><span class="p" data-group-id="7686464335-17">{</span><span class="ss">saved</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="7686464335-17">}</span><span class="p" data-group-id="7686464335-15">]</span><span class="p" data-group-id="7686464335-14">}</span><span class="w">
</span><span class="p" data-group-id="7686464335-18">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="7686464335-18">)</span><span class="mi">8</span><span class="o">&gt;</span></code></pre><p>Whenever <code>mod:func(...)</code> is called after this, token <code>seq_trace</code> is set on the executing process.</p>
  </section>
</section>
<section class="detail" id="start_trace/4">

  <div class="detail-header">
    <a href="#start_trace/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">start_trace(Nodes, Patterns, FlagSpec, Opts) -&gt; Result</h1>


      <span class="note">(since OTP R15B)</span>

  </div>

  <section class="docstring">

<ul class="types"><li class="type">Result = see p/2</li><li class="type">Nodes = see tracer/2</li><li class="type">Patterns = [tuple()]</li><li class="type">FlagSpec = {Procs, Flags}</li><li class="type">Proc = see p/2</li><li class="type">Flags = see p/2</li><li class="type">Opts = see tracer/2</li></ul><p>This function is a shortcut allowing to start a trace with one command. Each tuple in <code>Patterns</code> is converted to a list, which in turn is passed to <code>ttb:tpl/2,3,4</code>.</p><p>The call:</p><pre><code class="makeup erlang"><span class="o">&gt;</span><span class="w"> </span><span class="nc">ttb</span><span class="p">:</span><span class="nf">start_trace</span><span class="p" data-group-id="2536381062-1">(</span><span class="p" data-group-id="2536381062-2">[</span><span class="n">Node</span><span class="p">,</span><span class="w"> </span><span class="n">OtherNode</span><span class="p" data-group-id="2536381062-2">]</span><span class="p">,</span><span class="w">
                  </span><span class="p" data-group-id="2536381062-3">[</span><span class="p" data-group-id="2536381062-4">{</span><span class="ss">mod</span><span class="p">,</span><span class="w"> </span><span class="ss">foo</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2536381062-5">[</span><span class="p" data-group-id="2536381062-5">]</span><span class="p" data-group-id="2536381062-4">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2536381062-6">{</span><span class="ss">mod</span><span class="p">,</span><span class="w"> </span><span class="ss">bar</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="2536381062-6">}</span><span class="p" data-group-id="2536381062-3">]</span><span class="p">,</span><span class="w">
                  </span><span class="p" data-group-id="2536381062-7">{</span><span class="ss">all</span><span class="p">,</span><span class="w"> </span><span class="ss">call</span><span class="p" data-group-id="2536381062-7">}</span><span class="p">,</span><span class="w">
                  </span><span class="p" data-group-id="2536381062-8">[</span><span class="p" data-group-id="2536381062-9">{</span><span class="ss">file</span><span class="p">,</span><span class="w"> </span><span class="n">File</span><span class="p" data-group-id="2536381062-9">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2536381062-10">{</span><span class="ss">handler</span><span class="p">,</span><span class="p" data-group-id="2536381062-11">{</span><span class="k">fun</span><span class="w"> </span><span class="ss">myhandler</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="p" data-group-id="2536381062-11">}</span><span class="p" data-group-id="2536381062-10">}</span><span class="p" data-group-id="2536381062-8">]</span><span class="p" data-group-id="2536381062-1">)</span><span class="p">.</span></code></pre><p>is equivalent to:</p><pre><code class="makeup erlang"><span class="o">&gt;</span><span class="w"> </span><span class="nc">ttb</span><span class="p">:</span><span class="nf">start_trace</span><span class="p" data-group-id="5086298546-1">(</span><span class="p" data-group-id="5086298546-2">[</span><span class="n">Node</span><span class="p">,</span><span class="w"> </span><span class="n">OtherNode</span><span class="p" data-group-id="5086298546-2">]</span><span class="p">,</span><span class="w">
                  </span><span class="p" data-group-id="5086298546-3">[</span><span class="p" data-group-id="5086298546-4">{</span><span class="ss">file</span><span class="p">,</span><span class="w"> </span><span class="n">File</span><span class="p" data-group-id="5086298546-4">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5086298546-5">{</span><span class="ss">handler</span><span class="p">,</span><span class="p" data-group-id="5086298546-6">{</span><span class="k">fun</span><span class="w"> </span><span class="ss">myhandler</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="p" data-group-id="5086298546-6">}</span><span class="p" data-group-id="5086298546-5">}</span><span class="p" data-group-id="5086298546-3">]</span><span class="p" data-group-id="5086298546-1">)</span><span class="p">,</span><span class="w">
</span><span class="nc">ttb</span><span class="p">:</span><span class="nf">tpl</span><span class="p" data-group-id="5086298546-7">(</span><span class="ss">mod</span><span class="p">,</span><span class="w"> </span><span class="ss">foo</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5086298546-8">[</span><span class="p" data-group-id="5086298546-8">]</span><span class="p" data-group-id="5086298546-7">)</span><span class="p">,</span><span class="w">
</span><span class="nc">ttb</span><span class="p">:</span><span class="nf">tpl</span><span class="p" data-group-id="5086298546-9">(</span><span class="ss">mod</span><span class="p">,</span><span class="w"> </span><span class="ss">bar</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5086298546-10">[</span><span class="p" data-group-id="5086298546-10">]</span><span class="p" data-group-id="5086298546-9">)</span><span class="p">,</span><span class="w">
</span><span class="nc">ttb</span><span class="p">:</span><span class="nf">p</span><span class="p" data-group-id="5086298546-11">(</span><span class="ss">all</span><span class="p">,</span><span class="w"> </span><span class="ss">call</span><span class="p" data-group-id="5086298546-11">)</span><span class="p">.</span></code></pre>
  </section>
</section>
<section class="detail" id="stop/0">

  <div class="detail-header">
    <a href="#stop/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">stop()</h1>


  </div>

  <section class="docstring">

<p>Equivalent to <code>stop([])</code>.</p>
  </section>
</section>
<section class="detail" id="stop/1">

  <div class="detail-header">
    <a href="#stop/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">stop(Opts) -&gt; stopped | {stopped, Dir}</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Opts = Opt | [Opt]</li><li class="type">Opt = nofetch | {fetch_dir, Dir} | format | {format, FormatOpts} | return_fetch_dir</li><li class="type">Dir = string()</li><li class="type">FormatOpts = see format/2</li></ul><p>Stops tracing on all nodes. Logs and trace information files are sent to the trace control node and stored in a directory named <code>ttb_upload_FileName-Timestamp</code>, where <code>Filename</code> is the one provided with <code>{file, File}</code> during trace setup and <code>Timestamp</code> is of the form <code>yyyymmdd-hhmmss</code>. Even logs from nodes on the same machine as the trace control node are moved to this directory. The history list is saved to a file named <code>ttb_last_config</code> for further reference (as it is no longer accessible through history and configuration management functions, like <code>ttb:list_history/0</code>).</p><p><em>Options:</em></p><dl><dt><code>nofetch</code></dt><dd><p>Indicates that trace logs are not to be collected after tracing is stopped.</p></dd><dt><code>{fetch, Dir}</code></dt><dd><p>Allows specification of the directory to fetch the data to. If the directory already exists, an error is thrown.</p></dd><dt><code>format</code></dt><dd><p>Indicates the trace logs to be formatted after tracing is stopped. All logs in the fetch directory are merged.</p></dd><dt><code>return_fetch_dir</code></dt><dd><p>Indicates the return value to be <code>{stopped, Dir}</code> and not just <code>stopped</code>. This implies <code>fetch</code>.</p></dd></dl>
  </section>
</section>
<section class="detail" id="tp/2">

  <div class="detail-header">
    <a href="#tp/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tp({Module, Function , Arity}, MatchSpec) tp(Module [, Function [, Arity]], MatchSpec)</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="tp/3">

  <div class="detail-header">
    <a href="#tp/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tp(Module [, Function [, Arity]], MatchSpec)</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="tp/4">

  <div class="detail-header">
    <a href="#tp/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tp(Module [, Function [, Arity]], MatchSpec)</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="tpe/2">

  <div class="detail-header">
    <a href="#tpe/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tpe(Event,MatchSpec)</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="tpl/2">

  <div class="detail-header">
    <a href="#tpl/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tpl({Module, Function , Arity}, MatchSpec) tpl(Module [, Function [, Arity]], MatchSpec)</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="tpl/3">

  <div class="detail-header">
    <a href="#tpl/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tpl(Module [, Function [, Arity]], MatchSpec)</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="tpl/4">

  <div class="detail-header">
    <a href="#tpl/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tpl(Module [, Function [, Arity]], MatchSpec)</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="tracer/0">

  <div class="detail-header">
    <a href="#tracer/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tracer() -&gt; Result</h1>


  </div>

  <section class="docstring">

<p>Equivalent to <code>tracer(node())</code>.</p>
  </section>
</section>
<section class="detail" id="tracer/1">

  <div class="detail-header">
    <a href="#tracer/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tracer(Shortcut) -&gt; Result</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Shortcut = shell | dbg</li></ul><p>Handy shortcuts for common tracing settings.</p><p><code>shell</code> is equivalent to <code>tracer(node(),[{file, {local, &quot;ttb&quot;}}, shell])</code>.</p><p><code>dbg</code> is equivalent to <code>tracer(node(),[{shell, only}])</code>.</p>
  </section>
</section>
<section class="detail" id="tracer/1">

  <div class="detail-header">
    <a href="#tracer/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tracer(Nodes) -&gt; Result</h1>


  </div>

  <section class="docstring">

<p>Equivalent to <code>tracer(Nodes,[])</code>.</p>
  </section>
</section>
<section class="detail" id="tracer/2">

  <div class="detail-header">
    <a href="#tracer/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tracer(Nodes,Opts) -&gt; Result</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Result = {ok, ActivatedNodes} | {error,Reason}</li><li class="type">Nodes = atom() | [atom()] | all | existing | new</li><li class="type">Opts = Opt | [Opt]</li><li class="type">Opt = {file,Client} | {handler, FormatHandler} | {process_info,PI} | shell | {shell, ShellSpec} | {timer, TimerSpec} | {overload_check, {MSec, Module, Function}} | {flush, MSec} | resume | {resume, FetchTimeout} | {queue_size, QueueSize}</li><li class="type">TimerSpec = MSec | {MSec, StopOpts}</li><li class="type">MSec = FetchTimeout = integer()</li><li class="type">Module = Function = atom()</li><li class="type">StopOpts = see stop/2</li><li class="type">Client = File | {local, File}</li><li class="type">File = Filename | Wrap</li><li class="type">Filename = string()</li><li class="type">Wrap = {wrap,Filename} | {wrap,Filename,Size,Count}</li><li class="type">FormatHandler = See format/2</li><li class="type">PI = true | false</li><li class="type">ShellSpec = true | false | only</li><li class="type">QueueSize = non_neg_integer()</li></ul><p>Starts a file trace port on all specified nodes and points the system tracer for sequential tracing to the same port.</p><p><em>Options:</em></p><dl><dt><code>Filename</code></dt><dd><p>The specified <code>Filename</code> is prefixed with the node name. Default <code>Filename</code> is <code>ttb</code>.</p></dd><dt><code>File={wrap,Filename,Size,Count}</code></dt><dd><p>Can be used if the size of the trace logs must be limited. Default values are <code>Size=128*1024</code> and <code>Count=8</code>.</p></dd><dt><code>Client</code></dt><dd><p>When tracing diskless nodes, <code>ttb</code> must be started from an external &quot;trace control node&quot; with disk access, and <code>Client</code> must be <code>{local, File}</code>. All trace information is then sent to the trace control node where it is written to file.</p></dd><dt><code>queue_size</code></dt><dd><p>When tracing to shell or <code>{local,File}</code>, an ip trace driver is used internally. The ip trace driver has a queue of maximum <code>QueueSize</code> messages waiting to be delivered. If the driver cannot deliver messages as fast as they are produced, the queue size might be exceeded and messages are dropped. This parameter is optional, and is only useful if many <code>{drop,N}</code> trace messages are received by the trace handler. It has no meaning if shell or <code>{local,File}</code> is not used. See <a href="https://wojtekmach.pl/otp_docs/runtime_tools/dbg.html#trace_port/2">dbg:trace_port/2</a> for more information about the ip trace driver.</p></dd><dt><code>process_info</code></dt><dd><p>Indicates if process information is to be collected. If <code>PI = true</code> (which is default), each process identifier <code>Pid</code> is replaced by a tuple <code>{Pid,ProcessInfo,Node}</code>, where <code>ProcessInfo</code> is the registered process name, its globally registered name, or its initial function. To turn off this functionality, set <code>PI = false</code>.</p></dd><dt><code>{shell, ShellSpec}</code></dt><dd><p>Indicates that trace messages are to be printed on the console as they are received by the tracing process. This implies trace client <code>{local, File}</code>. If <code>ShellSpec</code> is <code>only</code> (instead of <code>true</code>), no trace logs are stored.</p></dd><dt><code>shell</code></dt><dd><p>Shortcut for <code>{shell, true}</code>.</p></dd><dt><code>timer</code></dt><dd><p>Indicates that the trace is to be automatically stopped after <code>MSec</code> milliseconds. <code>StopOpts</code> are passed to command <code>ttb:stop/2</code> if specified (default is <code>[]</code>). Notice that the timing is approximate, as delays related to network communication are always present. The timer starts after <code>ttb:p/2</code> is issued, so you can set up your trace patterns before.</p></dd><dt><code>overload_check</code></dt><dd><p>Allows to enable overload checking on the nodes under trace. <code>Module:Function(check)</code> is performed each <code>MSec</code> millisecond. If the check returns <code>true</code>, the tracing is disabled on a specified node.</p><p><code>Module:Function</code> must be able to handle at least three atoms: <code>init</code>, <code>check</code>, and <code>stop</code>. <code>init</code> and <code>stop</code> allows you to initialize and clean up the check environment.</p><p>When a node gets overloaded, it is not possible to issue <code>ttb:p/2</code> or any command from the <code>ttb:tp/2,3,4</code> family, as it would lead to inconsistent tracing state (different trace specifications on different nodes).</p></dd><dt><code>flush</code></dt><dd><p>Periodically flushes all file trace port clients (see <a href="https://wojtekmach.pl/otp_docs/runtime_tools/dbg.html#flush_trace_port/1"><code>dbg:flush_trace_port/1</code></a>). When enabled, the buffers are freed each <code>MSec</code> millisecond. This option is not allowed with <code>{file, {local, File}}</code> tracing.</p></dd><dt><code>{resume, FetchTimeout}</code></dt><dd><p>Enables the autoresume feature. When enabled, remote nodes try to reconnect to the controlling node if they are restarted. The feature requires application Runtime_Tools to be started (so it has to be present in the <code>.boot</code> scripts if the traced nodes run with embedded Erlang). If this is not possible, resume can be performed manually by starting <code>Runtime_Tools</code> remotely using <a href="https://wojtekmach.pl/otp_docs/kernel/rpc.html#call/4"><code>rpc:call/4</code></a>.</p><p><code>ttb</code> tries to fetch all logs from a reconnecting node before reinitializing the trace. This must finish within <code>FetchTimeout</code> milliseconds or is aborted.</p><p>By default, autostart information is stored in a file named <code>ttb_autostart.bin</code> on each node. If this is not desired (for example, on diskless nodes), a custom module handling autostart information storage and retrieval can be provided by specifying environment variable <code>ttb_autostart_module</code> for the application Runtime_Tools. The module must respond to the following API:</p><dl><dt><code>write_config(Data) -&gt; ok</code></dt><dd><p>Stores the provided data for further retrieval. It is important to realize that the data storage used must not be affected by the node crash.</p></dd><dt><code>read_config() -&gt; {ok, Data} | {error, Error}</code></dt><dd><p>Retrieves configuration stored with <code>write_config(Data)</code>.</p></dd><dt><code>delete_config() -&gt; ok</code></dt><dd><p>Deletes configuration stored with <code>write_config(Data)</code>. Notice that after this call any subsequent calls to <code>read_config</code> must return <code>{error, Error}</code>.</p></dd></dl><p><code>resume</code> implies the default <code>FetchTimeout</code>, which is 10 seconds</p></dd></dl>
  </section>
</section>
<section class="detail" id="write_config/2">

  <div class="detail-header">
    <a href="#write_config/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">write_config(ConfigFile,Config)</h1>


  </div>

  <section class="docstring">

<p>Equivalent to <code>write_config(ConfigFile,Config,[])</code>.</p>
  </section>
</section>
<section class="detail" id="write_config/3">

  <div class="detail-header">
    <a href="#write_config/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">write_config(ConfigFile,Config,Opts) -&gt; ok | {error,Reason}</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">ConfigFile = string()</li><li class="type">Config = all | [integer()] | [{Mod,Func,Args}]</li><li class="type">Mod = atom()</li><li class="type">Func = atom()</li><li class="type">Args = [term()]</li><li class="type">Opts = Opt | [Opt]</li><li class="type">Opt = append</li></ul><p>Creates or extends a configuration file, which can be used for restoring a specific configuration later.</p><p>The contents of the configuration file can either be fetched from the history or specified directly as a list of <code>{Mod,Func,Args}</code>.</p><p>If the complete history is to be stored in the configuration file, <code>Config</code> must be <code>all</code>. If only a selected number of entries from the history are to be stored, <code>Config</code> must be a list of integers pointing out the entries to be stored.</p><p>If <code>Opts</code> is not specified or if it is <code>[]</code>, <code>ConfigFile</code> is deleted and a new file is created. If <code>Opts = [append]</code>, <code>ConfigFile</code> is not deleted. The new information is appended at the end of the file.</p>
  </section>
</section>
<section class="detail" id="write_trace_info/2">

  <div class="detail-header">
    <a href="#write_trace_info/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">write_trace_info(Key,Info) -&gt; ok</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Key = term()</li><li class="type">Info = Data | fun() -&gt; Data</li><li class="type">Data = term()</li></ul><p>File <code>.ti</code> contains <code>{Key,ValueList}</code> tuples. This function adds <code>Data</code> to the <code>ValueList</code> associated with <code>Key</code>. All information written with this function is included in the call to the format handler.</p>
  </section>
</section>

          </div>
        </section>

      <footer class="footer">

        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener">ExDoc</a> (v0.25.1) for the
            <a href="https://elixir-lang.org" title="Elixir" target="_blank">Elixir programming language</a>.
          </span>
          <span class="line">
            Designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" rel="noopener" title="@dignifiedquire">Friedel Ziegelmayer</a>.
          </span>
        </p>
        <p>

            <a href="api-reference.html" title="API reference" class="line footer-button">API Reference</a>

          <button class="line footer-button display-shortcuts-help">
            Display keyboard shortcuts
          </button>
          <button class="line footer-button night-mode-toggle">
            Toggle night mode
          </button>
          <button class="line footer-button display-quick-switch">
            Go to a HexDocs package
          </button>
          <button class="line footer-button tooltips-toggle">
            <span class="tooltips-option-disable">Disable tooltips</span>
            <span class="tooltips-option-enable">Enable tooltips</span>
          </button>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
