<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.25.1">
    <meta name="project" content="kernel v8.0.2">

    <title>gen_sctp â€” kernel v8.0.2</title>
    <link rel="stylesheet" href="dist/erlang-951161c89561e05735a5.css" />

    <script src="dist/sidebar_items-69e02f009e.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-f97730d45ef67f3e6188.js"></script>


  </head>
  <body data-type="modules">
    <script>

      try {
        if (localStorage.getItem('night-mode') === 'true') {
          document.body.classList.add('night-mode');
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle">
  <span class="icon-menu" title="Collapse/expand sidebar"></span>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <span class="icon-search" aria-hidden="true" title="Submit search"></span>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <span class="icon-cross" aria-hidden="true" title="Cancel search"></span>
    </button>
    <label class="search-label">
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">
    <div class="sidebar-projectDetails">
      <a href="api-reference.html" class="sidebar-projectName">
kernel
      </a>
      <strong class="sidebar-projectVersion">
        v8.0.2
      </strong>
    </div>

  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list-link" href="#full-list">Pages</a></li>

      <li><a id="modules-list-link" href="#full-list">Modules</a></li>


  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

      <h1>
gen_sctp <small class="app-vsn">(kernel v8.0.2)</small>

      </h1>


        <section id="moduledoc">
<p>This module provides functions for communicating with sockets using the SCTP protocol. The implementation assumes that the OS kernel supports SCTP <a href="http://www.rfc-archive.org/getrfc.php?rfc=2960">(RFC 2960)</a> through the user-level <a href="http://tools.ietf.org/html/draft-ietf-tsvwg-sctpsocket-13">Sockets API Extensions</a>.</p><p>During development, this implementation was tested on:</p><ul><li>Linux Fedora Core 5.0 (kernel 2.6.15-2054 or later is needed)</li><li>Solaris 10, 11</li></ul><p>During OTP adaptation it was tested on:</p><ul><li>SUSE Linux Enterprise Server 10 (x86_64) kernel 2.6.16.27-0.6-smp, with lksctp-tools-1.0.6</li><li>Briefly on Solaris 10</li><li>SUSE Linux Enterprise Server 10 Service Pack 1 (x86_64) kernel 2.6.16.54-0.2.3-smp with lksctp-tools-1.0.7</li><li>FreeBSD 8.2</li></ul><p>This module was written for one-to-many style sockets (type <code>seqpacket</code>). With the addition of <a href="gen_sctp.html#peeloff/2"><code>peeloff/2</code></a>, one-to-one style sockets (type <code>stream</code>) were introduced.</p><p>Record definitions for this module can be found using:</p><pre><code class="makeup erlang"><span class="p">-</span><span class="na">include_lib</span><span class="p" data-group-id="0624483732-1">(</span><span class="s">&quot;kernel/include/inet_sctp.hrl&quot;</span><span class="p" data-group-id="0624483732-1">)</span><span class="p">.</span></code></pre><p>These record definitions use the &quot;new&quot; spelling 'adaptation', not the deprecated 'adaption', regardless of which spelling the underlying C API uses.</p><a id="options"></a><h2 id="module-sctp-socket-options" class="section-heading">
  <a href="#module-sctp-socket-options" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  SCTP Socket Options
</h2>
<p>The set of admissible SCTP socket options is by construction orthogonal to the sets of TCP, UDP, and generic <code>inet</code> options. Only options listed here are allowed for SCTP sockets. Options can be set on the socket using <a href="gen_sctp.html#open/1"><code>open/1,2</code></a> or <a href="inet.html#setopts/2"><code>inet:setopts/2</code></a>, retrieved using <a href="inet.html#getopts/2"><code>inet:getopts/2</code></a>. Options can be changed when calling <a href="gen_sctp.html#connect/4"><code>connect/4,5</code></a>.</p><a id="option-binary"></a><a id="option-list"></a><dl><dt><code>{mode, list|binary}</code> or just <code>list</code> or <code>binary</code></dt><dd><p>Determines the type of data returned from <a href="gen_sctp.html#recv/1"><code>recv/1,2</code></a>.</p><a id="option-active"></a></dd><dt><code>{active, true|false|once|N}</code></dt><dd><ul><li><p>If <code>false</code> (passive mode, the default), the caller must do an explicit <a href="gen_sctp.html#recv/1"><code>recv</code></a> call to retrieve the available data from the socket.</p></li><li><p>If <code>true|once|N</code> (active modes) received data or events are sent to the owning process. See <a href="gen_sctp.html#open/0"><code>open/0..2</code></a> for the message format.</p></li><li><p>If <code>true</code> (full active mode) there is no flow control.</p><div class="note"><p>Note that this can cause the message queue to overflow causing for example the virtual machine to run out of memory and crash.</p></div></li><li><p>If <code>once</code>, only one message is automatically placed in the message queue, and after that the mode is automatically reset to passive. This provides flow control and the possibility for the receiver to listen for its incoming SCTP data interleaved with other inter-process messages.</p></li><li><p>If <code>active</code> is specified as an integer <code>N</code> in the range -32768 to 32767 (inclusive), that number is added to the socket's counting of data messages to be delivered to the controlling process. If the result of the addition is negative, the count is set to <code>0</code>. Once the count reaches <code>0</code>, either through the delivery of messages or by being explicitly set with <a href="inet.html#setopts/2"><code>inet:setopts/2</code></a>, the socket mode is automatically reset to passive (<code>{active, false}</code>). When a socket in this active mode transitions to passive mode, the message <code>{sctp_passive, Socket}</code> is sent to the controlling process to notify it that if it wants to receive more data messages from the socket, it must call <a href="inet.html#setopts/2"><code>inet:setopts/2</code></a> to set the socket back into an active mode.</p></li></ul></dd><dt><code>{tos, integer()}</code></dt><dd><p>Sets the Type-Of-Service field on the IP datagrams that are sent, to the specified value. This effectively determines a prioritization policy for the outbound packets. The acceptable values are system-dependent.</p></dd><dt><code>{priority, integer()}</code></dt><dd><p>A protocol-independent equivalent of <code>tos</code> above. Setting priority implies setting <code>tos</code> as well.</p></dd><dt><code>{dontroute, true|false}</code></dt><dd><p>Defaults to <code>false</code>. If <code>true</code>, the kernel does not send packets through any gateway, only sends them to directly connected hosts.</p></dd><dt><code>{reuseaddr, true|false}</code></dt><dd><p>Defaults to <code>false</code>. If true, the local binding address <code>{IP,Port}</code> of the socket can be reused immediately. No waiting in state <code>CLOSE_WAIT</code> is performed (can be required for high-throughput servers).</p></dd><dt><code>{sndbuf, integer()}</code></dt><dd><p>The size, in bytes, of the OS kernel send buffer for this socket. Sending errors would occur for datagrams larger than <code>val(sndbuf)</code>. Setting this option also adjusts the size of the driver buffer (see <code>buffer</code> above).</p></dd><dt><code>{recbuf, integer()}</code></dt><dd><p>The size, in bytes, of the OS kernel receive buffer for this socket. Sending errors would occur for datagrams larger than <code>val(recbuf)</code>. Setting this option also adjusts the size of the driver buffer (see <code>buffer</code> above).</p></dd><dt><code>{sctp_module, module()}</code></dt><dd><p>Overrides which callback module is used. Defaults to <code>inet_sctp</code> for IPv4 and <code>inet6_sctp</code> for IPv6.</p></dd><dt><code>{sctp_rtoinfo, #sctp_rtoinfo{}}</code></dt><dd><pre><code class="makeup erlang"><span class="o">#</span><span class="ss">sctp_rtoinfo</span><span class="p" data-group-id="8221377811-1">{</span><span class="w">
      </span><span class="ss">assoc_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">assoc_id</span><span class="p" data-group-id="8221377811-2">(</span><span class="p" data-group-id="8221377811-2">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">initial</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="8221377811-3">(</span><span class="p" data-group-id="8221377811-3">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">max</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="8221377811-4">(</span><span class="p" data-group-id="8221377811-4">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">min</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="8221377811-5">(</span><span class="p" data-group-id="8221377811-5">)</span><span class="w">
</span><span class="p" data-group-id="8221377811-1">}</span></code></pre><p>Determines retransmission time-out parameters, in milliseconds, for the association(s) specified by <code>assoc_id</code>.</p><p><code>assoc_id = 0</code> (default) indicates the whole endpoint. See <a href="http://www.rfc-archive.org/getrfc.php?rfc=2960">RFC 2960</a> and <a href="http://tools.ietf.org/html/draft-ietf-tsvwg-sctpsocket-13">Sockets API Extensions for SCTP</a> for the exact semantics of the field values.</p></dd><dt><code>{sctp_associnfo, #sctp_assocparams{}}</code></dt><dd><pre><code class="makeup erlang"><span class="o">#</span><span class="ss">sctp_assocparams</span><span class="p" data-group-id="2182310265-1">{</span><span class="w">
      </span><span class="ss">assoc_id</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="nf">assoc_id</span><span class="p" data-group-id="2182310265-2">(</span><span class="p" data-group-id="2182310265-2">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">asocmaxrxt</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="2182310265-3">(</span><span class="p" data-group-id="2182310265-3">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">number_peer_destinations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="2182310265-4">(</span><span class="p" data-group-id="2182310265-4">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">peer_rwnd</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="2182310265-5">(</span><span class="p" data-group-id="2182310265-5">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">local_rwnd</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="2182310265-6">(</span><span class="p" data-group-id="2182310265-6">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">cookie_life</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="2182310265-7">(</span><span class="p" data-group-id="2182310265-7">)</span><span class="w">
</span><span class="p" data-group-id="2182310265-1">}</span></code></pre><p>Determines association parameters for the association(s) specified by <code>assoc_id</code>.</p><p><code>assoc_id = 0</code> (default) indicates the whole endpoint. See <a href="http://tools.ietf.org/html/draft-ietf-tsvwg-sctpsocket-13">Sockets API Extensions for SCTP</a> for the discussion of their semantics. Rarely used.</p></dd><dt><code>{sctp_initmsg, #sctp_initmsg{}}</code></dt><dd><pre><code class="makeup erlang"><span class="o">#</span><span class="ss">sctp_initmsg</span><span class="p" data-group-id="7699182594-1">{</span><span class="w">
     </span><span class="ss">num_ostreams</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="7699182594-2">(</span><span class="p" data-group-id="7699182594-2">)</span><span class="p">,</span><span class="w">
     </span><span class="ss">max_instreams</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="7699182594-3">(</span><span class="p" data-group-id="7699182594-3">)</span><span class="p">,</span><span class="w">
     </span><span class="ss">max_attempts</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="7699182594-4">(</span><span class="p" data-group-id="7699182594-4">)</span><span class="p">,</span><span class="w">
     </span><span class="ss">max_init_timeo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="7699182594-5">(</span><span class="p" data-group-id="7699182594-5">)</span><span class="w">
</span><span class="p" data-group-id="7699182594-1">}</span></code></pre><p>Determines the default parameters that this socket tries to negotiate with its peer while establishing an association with it. Is to be set after <a href="gen_sctp.html#open/1"><code>open/*</code></a> but before the first <a href="gen_sctp.html#connect/4"><code>connect/*</code></a>. <code>#sctp_initmsg{}</code> can also be used as ancillary data with the first call of <a href="gen_sctp.html#send/3"><code>send/*</code></a> to a new peer (when a new association is created).</p><dl><dt><code>num_ostreams</code></dt><dd>Number of outbound streams</dd><dt><code>max_instreams</code></dt><dd>Maximum number of inbound streams</dd><dt><code>max_attempts</code></dt><dd>Maximum retransmissions while establishing an association</dd><dt><code>max_init_timeo</code></dt><dd>Time-out, in milliseconds, for establishing an association</dd></dl></dd><dt><code>{sctp_autoclose, integer() &gt;= 0}</code></dt><dd><p>Determines the time, in seconds, after which an idle association is automatically closed. <code>0</code> means that the association is never automatically closed.</p></dd><dt><code>{sctp_nodelay, true|false}</code></dt><dd><p>Turns on|off the Nagle algorithm for merging small packets into larger ones. This improves throughput at the expense of latency.</p></dd><dt><code>{sctp_disable_fragments, true|false}</code></dt><dd><p>If <code>true</code>, induces an error on an attempt to send a message larger than the current PMTU size (which would require fragmentation/reassembling). Notice that message fragmentation does not affect the logical atomicity of its delivery; this option is provided for performance reasons only.</p></dd><dt><code>{sctp_i_want_mapped_v4_addr, true|false}</code></dt><dd><p>Turns on|off automatic mapping of IPv4 addresses into IPv6 ones (if the socket address family is <code>AF_INET6</code>).</p></dd><dt><code>{sctp_maxseg, integer()}</code></dt><dd><p>Determines the maximum chunk size if message fragmentation is used. If <code>0</code>, the chunk size is limited by the Path MTU only.</p></dd><dt><code>{sctp_primary_addr, #sctp_prim{}}</code></dt><dd><pre><code class="makeup erlang"><span class="o">#</span><span class="ss">sctp_prim</span><span class="p" data-group-id="2542112772-1">{</span><span class="w">
      </span><span class="ss">assoc_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">assoc_id</span><span class="p" data-group-id="2542112772-2">(</span><span class="p" data-group-id="2542112772-2">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">addr</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="2542112772-3">{</span><span class="n">IP</span><span class="p">,</span><span class="w"> </span><span class="n">Port</span><span class="p" data-group-id="2542112772-3">}</span><span class="w">
</span><span class="p" data-group-id="2542112772-1">}</span><span class="w">
 </span><span class="n">IP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">ip_address</span><span class="p" data-group-id="2542112772-4">(</span><span class="p" data-group-id="2542112772-4">)</span><span class="w">
 </span><span class="n">Port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">port_number</span><span class="p" data-group-id="2542112772-5">(</span><span class="p" data-group-id="2542112772-5">)</span></code></pre><p>For the association specified by <code>assoc_id</code>, <code>{IP,Port}</code> must be one of the peer addresses. This option determines that the specified address is treated by the local SCTP stack as the primary address of the peer.</p></dd><dt><code>{sctp_set_peer_primary_addr, #sctp_setpeerprim{}}</code></dt><dd><pre><code class="makeup erlang"><span class="o">#</span><span class="ss">sctp_setpeerprim</span><span class="p" data-group-id="7917826070-1">{</span><span class="w">
      </span><span class="ss">assoc_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">assoc_id</span><span class="p" data-group-id="7917826070-2">(</span><span class="p" data-group-id="7917826070-2">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">addr</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="7917826070-3">{</span><span class="n">IP</span><span class="p">,</span><span class="w"> </span><span class="n">Port</span><span class="p" data-group-id="7917826070-3">}</span><span class="w">
</span><span class="p" data-group-id="7917826070-1">}</span><span class="w">
 </span><span class="n">IP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">ip_address</span><span class="p" data-group-id="7917826070-4">(</span><span class="p" data-group-id="7917826070-4">)</span><span class="w">
 </span><span class="n">Port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">port_number</span><span class="p" data-group-id="7917826070-5">(</span><span class="p" data-group-id="7917826070-5">)</span></code></pre><p>When set, informs the peer to use <code>{IP, Port}</code> as the primary address of the local endpoint for the association specified by <code>assoc_id</code>.</p><a id="option-sctp_adaptation_layer"></a></dd><dt><code>{sctp_adaptation_layer, #sctp_setadaptation{}}</code></dt><dd><a id="record-sctp_setadaptation"></a><pre><code class="makeup erlang"><span class="o">#</span><span class="ss">sctp_setadaptation</span><span class="p" data-group-id="1299432692-1">{</span><span class="w">
      </span><span class="ss">adaptation_ind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="1299432692-2">(</span><span class="p" data-group-id="1299432692-2">)</span><span class="w">
</span><span class="p" data-group-id="1299432692-1">}</span></code></pre><p>When set, requests that the local endpoint uses the value specified by <code>adaptation_ind</code> as the Adaptation Indication parameter for establishing new associations. For details, see <a href="http://www.rfc-archive.org/getrfc.php?rfc=2960">RFC 2960</a> and <a href="http://tools.ietf.org/html/draft-ietf-tsvwg-sctpsocket-13">Sockets API Extenstions for SCTP</a>.</p></dd><dt><code>{sctp_peer_addr_params, #sctp_paddrparams{}}</code></dt><dd><pre><code class="makeup erlang"><span class="o">#</span><span class="ss">sctp_paddrparams</span><span class="p" data-group-id="3285792185-1">{</span><span class="w">
      </span><span class="ss">assoc_id</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nf">assoc_id</span><span class="p" data-group-id="3285792185-2">(</span><span class="p" data-group-id="3285792185-2">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">address</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3285792185-3">{</span><span class="n">IP</span><span class="p">,</span><span class="w"> </span><span class="n">Port</span><span class="p" data-group-id="3285792185-3">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">hbinterval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="3285792185-4">(</span><span class="p" data-group-id="3285792185-4">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">pathmaxrxt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="3285792185-5">(</span><span class="p" data-group-id="3285792185-5">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">pathmtu</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="3285792185-6">(</span><span class="p" data-group-id="3285792185-6">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">sackdelay</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="3285792185-7">(</span><span class="p" data-group-id="3285792185-7">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">flags</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p" data-group-id="3285792185-8">(</span><span class="p" data-group-id="3285792185-8">)</span><span class="w">
</span><span class="p" data-group-id="3285792185-1">}</span><span class="w">
</span><span class="n">IP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">ip_address</span><span class="p" data-group-id="3285792185-9">(</span><span class="p" data-group-id="3285792185-9">)</span><span class="w">
</span><span class="n">Port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">port_number</span><span class="p" data-group-id="3285792185-10">(</span><span class="p" data-group-id="3285792185-10">)</span></code></pre><p>Determines various per-address parameters for the association specified by <code>assoc_id</code> and the peer address <code>address</code> (the SCTP protocol supports multi-homing, so more than one address can correspond to a specified association).</p><dl><dt><code>hbinterval</code></dt><dd><p>Heartbeat interval, in milliseconds</p></dd><dt><code>pathmaxrxt</code></dt><dd><p>Maximum number of retransmissions before this address is considered unreachable (and an alternative address is selected)</p></dd><dt><code>pathmtu</code></dt><dd><p>Fixed Path MTU, if automatic discovery is disabled (see <code>flags</code> below)</p></dd><dt><code>sackdelay</code></dt><dd><p>Delay, in milliseconds, for SAC messages (if the delay is enabled, see <code>flags</code> below)</p></dd><dt><code>flags</code></dt><dd><p>The following flags are available:</p><dl><dt><code>hb_enable</code></dt><dd>Enables heartbeat</dd><dt><code>hb_disable</code></dt><dd>Disables heartbeat</dd><dt><code>hb_demand</code></dt><dd>Initiates heartbeat immediately</dd><dt><code>pmtud_enable</code></dt><dd>Enables automatic Path MTU discovery</dd><dt><code>pmtud_disable</code></dt><dd>Disables automatic Path MTU discovery</dd><dt><code>sackdelay_enable</code></dt><dd>Enables SAC delay</dd><dt><code>sackdelay_disable</code></dt><dd>Disables SAC delay</dd></dl></dd></dl></dd><dt><code>{sctp_default_send_param, #sctp_sndrcvinfo{}}</code></dt><dd><a id="record-sctp_sndrcvinfo"></a><pre><code class="makeup erlang"><span class="o">#</span><span class="ss">sctp_sndrcvinfo</span><span class="p" data-group-id="7891015100-1">{</span><span class="w">
      </span><span class="ss">stream</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="7891015100-2">(</span><span class="p" data-group-id="7891015100-2">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">ssn</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="7891015100-3">(</span><span class="p" data-group-id="7891015100-3">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">flags</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p" data-group-id="7891015100-4">(</span><span class="p" data-group-id="7891015100-4">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">ppid</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="7891015100-5">(</span><span class="p" data-group-id="7891015100-5">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">context</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="7891015100-6">(</span><span class="p" data-group-id="7891015100-6">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">timetolive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="7891015100-7">(</span><span class="p" data-group-id="7891015100-7">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">tsn</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="7891015100-8">(</span><span class="p" data-group-id="7891015100-8">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">cumtsn</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="7891015100-9">(</span><span class="p" data-group-id="7891015100-9">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">assoc_id</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nf">assoc_id</span><span class="p" data-group-id="7891015100-10">(</span><span class="p" data-group-id="7891015100-10">)</span><span class="w">
</span><span class="p" data-group-id="7891015100-1">}</span></code></pre><p><code>#sctp_sndrcvinfo{}</code> is used both in this socket option, and as ancillary data while sending or receiving SCTP messages. When set as an option, it provides default values for subsequent <a href="gen_sctp.html#send/3"><code>send</code></a> calls on the association specified by <code>assoc_id</code>.</p><p><code>assoc_id = 0</code> (default) indicates the whole endpoint.</p><p>The following fields typically must be specified by the sender:</p><dl><dt><code>sinfo_stream</code></dt><dd><p>Stream number (0-base) within the association to send the messages through;</p></dd><dt><code>sinfo_flags</code></dt><dd><p>The following flags are recognised:</p><dl><dt><code>unordered</code></dt><dd>The message is to be sent unordered</dd><dt><code>addr_over</code></dt><dd>The address specified in <a href="gen_sctp.html#send/3"><code>send</code></a> overwrites the primary peer address</dd><dt><code>abort</code></dt><dd>Aborts the current association without flushing any unsent data</dd><dt><code>eof</code></dt><dd>Gracefully shuts down the current association, with flushing of unsent data</dd></dl><p>Other fields are rarely used. For complete information, see <a href="http://www.rfc-archive.org/getrfc.php?rfc=2960">RFC 2960</a> and <a href="http://tools.ietf.org/html/draft-ietf-tsvwg-sctpsocket-13">Sockets API Extensions for SCTP</a>.</p></dd></dl><a id="option-sctp_events"></a></dd><dt><code>{sctp_events, #sctp_event_subscribe{}}</code></dt><dd><a id="record-sctp_event_subscribe"></a><pre><code class="makeup erlang"><span class="o">#</span><span class="ss">sctp_event_subscribe</span><span class="p" data-group-id="9020603869-1">{</span><span class="w">
        </span><span class="ss">data_io_event</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="ss">true</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="ss">false</span><span class="p">,</span><span class="w">
        </span><span class="ss">association_event</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="ss">true</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="ss">false</span><span class="p">,</span><span class="w">
        </span><span class="ss">address_event</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="ss">true</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="ss">false</span><span class="p">,</span><span class="w">
        </span><span class="ss">send_failure_event</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="ss">true</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="ss">false</span><span class="p">,</span><span class="w">
        </span><span class="ss">peer_error_event</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="ss">true</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="ss">false</span><span class="p">,</span><span class="w">
        </span><span class="ss">shutdown_event</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="ss">true</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="ss">false</span><span class="p">,</span><span class="w">
        </span><span class="ss">partial_delivery_event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">true</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="ss">false</span><span class="p">,</span><span class="w">
        </span><span class="ss">adaptation_layer_event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">true</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="ss">false</span><span class="w">
</span><span class="p" data-group-id="9020603869-1">}</span></code></pre><p>This option determines which <a href="gen_sctp.html#content#sctp_events">SCTP Events</a> are to be received (through <a href="gen_sctp.html#recv/1"><code>recv/*</code></a>) along with the data. The only exception is <code>data_io_event</code>, which enables or disables receiving of <a href="gen_sctp.html#content#record-sctp_sndrcvinfo"><code>#sctp_sndrcvinfo{}</code></a> ancillary data, not events. By default, all flags except <code>adaptation_layer_event</code> are enabled, although <code>sctp_data_io_event</code> and <code>association_event</code> are used by the driver itself and not exported to the user level.</p></dd><dt><code>{sctp_delayed_ack_time, #sctp_assoc_value{}}</code></dt><dd><pre><code class="makeup erlang"><span class="o">#</span><span class="ss">sctp_assoc_value</span><span class="p" data-group-id="2890273242-1">{</span><span class="w">
      </span><span class="ss">assoc_id</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nf">assoc_id</span><span class="p" data-group-id="2890273242-2">(</span><span class="p" data-group-id="2890273242-2">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">assoc_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="2890273242-3">(</span><span class="p" data-group-id="2890273242-3">)</span><span class="w">
</span><span class="p" data-group-id="2890273242-1">}</span></code></pre><p>Rarely used. Determines the ACK time (specified by <code>assoc_value</code>, in milliseconds) for the specified association or the whole endpoint if <code>assoc_value = 0</code> (default).</p></dd><dt><code>{sctp_status, #sctp_status{}}</code></dt><dd><pre><code class="makeup erlang"><span class="o">#</span><span class="ss">sctp_status</span><span class="p" data-group-id="5195034267-1">{</span><span class="w">
      </span><span class="ss">assoc_id</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="nf">assoc_id</span><span class="p" data-group-id="5195034267-2">(</span><span class="p" data-group-id="5195034267-2">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">state</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="nf">atom</span><span class="p" data-group-id="5195034267-3">(</span><span class="p" data-group-id="5195034267-3">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">rwnd</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="5195034267-4">(</span><span class="p" data-group-id="5195034267-4">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">unackdata</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="5195034267-5">(</span><span class="p" data-group-id="5195034267-5">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">penddata</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="5195034267-6">(</span><span class="p" data-group-id="5195034267-6">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">instrms</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="5195034267-7">(</span><span class="p" data-group-id="5195034267-7">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">outstrms</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="5195034267-8">(</span><span class="p" data-group-id="5195034267-8">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">fragmentation_point</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="5195034267-9">(</span><span class="p" data-group-id="5195034267-9">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">primary</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">sctp_paddrinfo</span><span class="p" data-group-id="5195034267-10">{</span><span class="p" data-group-id="5195034267-10">}</span><span class="w">
</span><span class="p" data-group-id="5195034267-1">}</span></code></pre><p>This option is read-only. It determines the status of the SCTP association specified by <code>assoc_id</code>. The following are the possible values of <code>state</code> (the state designations are mostly self-explanatory):</p><dl><dt><code>sctp_state_empty</code></dt><dd>Default. Means that no other state is active.</dd><dt><code>sctp_state_closed</code></dt><dd></dd><dt><code>sctp_state_cookie_wait</code></dt><dd></dd><dt><code>sctp_state_cookie_echoed</code></dt><dd></dd><dt><code>sctp_state_established</code></dt><dd></dd><dt><code>sctp_state_shutdown_pending</code></dt><dd></dd><dt><code>sctp_state_shutdown_sent</code></dt><dd></dd><dt><code>sctp_state_shutdown_received</code></dt><dd></dd><dt><code>sctp_state_shutdown_ack_sent</code></dt><dd></dd></dl><p>Semantics of the other fields:</p><dl><dt><code>sstat_rwnd</code></dt><dd>Current receiver window size of the association</dd><dt><code>sstat_unackdata</code></dt><dd>Number of unacked data chunks</dd><dt><code>sstat_penddata</code></dt><dd>Number of data chunks pending receipt</dd><dt><code>sstat_instrms</code></dt><dd>Number of inbound streams</dd><dt><code>sstat_outstrms</code></dt><dd>Number of outbound streams</dd><dt><code>sstat_fragmentation_point</code></dt><dd>Message size at which SCTP fragmentation occurs</dd><dt><code>sstat_primary</code></dt><dd>Information on the current primary peer address (see below for the format of <code>#sctp_paddrinfo{}</code>)</dd></dl><a id="option-sctp_get_peer_addr_info"></a></dd><dt><code>{sctp_get_peer_addr_info, #sctp_paddrinfo{}}</code></dt><dd><a id="record-sctp_paddrinfo"></a><pre><code class="makeup erlang"><span class="o">#</span><span class="ss">sctp_paddrinfo</span><span class="p" data-group-id="5598584841-1">{</span><span class="w">
      </span><span class="ss">assoc_id</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nf">assoc_id</span><span class="p" data-group-id="5598584841-2">(</span><span class="p" data-group-id="5598584841-2">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">address</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5598584841-3">{</span><span class="n">IP</span><span class="p">,</span><span class="w"> </span><span class="n">Port</span><span class="p" data-group-id="5598584841-3">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">state</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="ss">inactive</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="ss">active</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="ss">unconfirmed</span><span class="p">,</span><span class="w">
      </span><span class="ss">cwnd</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="5598584841-4">(</span><span class="p" data-group-id="5598584841-4">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">srtt</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="5598584841-5">(</span><span class="p" data-group-id="5598584841-5">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">rto</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="5598584841-6">(</span><span class="p" data-group-id="5598584841-6">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">mtu</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="5598584841-7">(</span><span class="p" data-group-id="5598584841-7">)</span><span class="w">
</span><span class="p" data-group-id="5598584841-1">}</span><span class="w">
</span><span class="n">IP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">ip_address</span><span class="p" data-group-id="5598584841-8">(</span><span class="p" data-group-id="5598584841-8">)</span><span class="w">
</span><span class="n">Port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">port_number</span><span class="p" data-group-id="5598584841-9">(</span><span class="p" data-group-id="5598584841-9">)</span></code></pre><p>This option is read-only. It determines the parameters specific to the peer address specified by <code>address</code> within the association specified by <code>assoc_id</code>. Field <code>address</code> fmust be set by the caller; all other fields are filled in on return. If <code>assoc_id = 0</code> (default), the <code>address</code> is automatically translated into the corresponding association ID. This option is rarely used. For the semantics of all fields, see <a href="http://www.rfc-archive.org/getrfc.php?rfc=2960">RFC 2960</a> and <a href="http://tools.ietf.org/html/draft-ietf-tsvwg-sctpsocket-13">Sockets API Extensions for SCTP</a>.</p></dd></dl><a id="examples"></a><h2 id="module-sctp-examples" class="section-heading">
  <a href="#module-sctp-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  SCTP Examples
</h2>
<p>Example of an Erlang SCTP server that receives SCTP messages and prints them on the standard output:</p><pre><code class="makeup erlang"><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="2540479361-1">(</span><span class="ss">sctp_server</span><span class="p" data-group-id="2540479361-1">)</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="2540479361-2">(</span><span class="p" data-group-id="2540479361-3">[</span><span class="ss">server</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span><span class="ss">server</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="ss">server</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="2540479361-3">]</span><span class="p" data-group-id="2540479361-2">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">include_lib</span><span class="p" data-group-id="2540479361-4">(</span><span class="s">&quot;kernel/include/inet.hrl&quot;</span><span class="p" data-group-id="2540479361-4">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">include_lib</span><span class="p" data-group-id="2540479361-5">(</span><span class="s">&quot;kernel/include/inet_sctp.hrl&quot;</span><span class="p" data-group-id="2540479361-5">)</span><span class="p">.</span><span class="w">

</span><span class="nf">server</span><span class="p" data-group-id="2540479361-6">(</span><span class="p" data-group-id="2540479361-6">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">server</span><span class="p" data-group-id="2540479361-7">(</span><span class="ss">any</span><span class="p">,</span><span class="w"> </span><span class="mi">2006</span><span class="p" data-group-id="2540479361-7">)</span><span class="p">.</span><span class="w">

</span><span class="nf">server</span><span class="p" data-group-id="2540479361-8">(</span><span class="p" data-group-id="2540479361-9">[</span><span class="n">Host</span><span class="p">,</span><span class="n">Port</span><span class="p" data-group-id="2540479361-9">]</span><span class="p" data-group-id="2540479361-8">)</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="nf">is_list</span><span class="p" data-group-id="2540479361-10">(</span><span class="n">Host</span><span class="p" data-group-id="2540479361-10">)</span><span class="p">,</span><span class="w"> </span><span class="nf">is_list</span><span class="p" data-group-id="2540479361-11">(</span><span class="n">Port</span><span class="p" data-group-id="2540479361-11">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="2540479361-12">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="o">#</span><span class="ss">hostent</span><span class="p" data-group-id="2540479361-13">{</span><span class="ss">h_addr_list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="2540479361-14">[</span><span class="n">IP</span><span class="p">|</span><span class="p">_</span><span class="p" data-group-id="2540479361-14">]</span><span class="p" data-group-id="2540479361-13">}</span><span class="p" data-group-id="2540479361-12">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">inet</span><span class="p">:</span><span class="nf">gethostbyname</span><span class="p" data-group-id="2540479361-15">(</span><span class="n">Host</span><span class="p" data-group-id="2540479361-15">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="2540479361-16">(</span><span class="s">&quot;</span><span class="si">~w</span><span class="s"> -&gt; </span><span class="si">~w</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2540479361-17">[</span><span class="n">Host</span><span class="p">,</span><span class="w"> </span><span class="n">IP</span><span class="p" data-group-id="2540479361-17">]</span><span class="p" data-group-id="2540479361-16">)</span><span class="p">,</span><span class="w">
    </span><span class="nf">server</span><span class="p" data-group-id="2540479361-18">(</span><span class="p" data-group-id="2540479361-19">[</span><span class="n">IP</span><span class="p">,</span><span class="w"> </span><span class="nf">list_to_integer</span><span class="p" data-group-id="2540479361-20">(</span><span class="n">Port</span><span class="p" data-group-id="2540479361-20">)</span><span class="p" data-group-id="2540479361-19">]</span><span class="p" data-group-id="2540479361-18">)</span><span class="p">.</span><span class="w">

</span><span class="nf">server</span><span class="p" data-group-id="2540479361-21">(</span><span class="n">IP</span><span class="p">,</span><span class="w"> </span><span class="n">Port</span><span class="p" data-group-id="2540479361-21">)</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="nf">is_tuple</span><span class="p" data-group-id="2540479361-22">(</span><span class="n">IP</span><span class="p" data-group-id="2540479361-22">)</span><span class="w"> </span><span class="ow">orelse</span><span class="w"> </span><span class="n">IP</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">any</span><span class="w"> </span><span class="ow">orelse</span><span class="w"> </span><span class="n">IP</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">loopback</span><span class="p">,</span><span class="w">
                      </span><span class="nf">is_integer</span><span class="p" data-group-id="2540479361-23">(</span><span class="n">Port</span><span class="p" data-group-id="2540479361-23">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="2540479361-24">{</span><span class="ss">ok</span><span class="p">,</span><span class="n">S</span><span class="p" data-group-id="2540479361-24">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">gen_sctp</span><span class="p">:</span><span class="nf">open</span><span class="p" data-group-id="2540479361-25">(</span><span class="n">Port</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2540479361-26">[</span><span class="p" data-group-id="2540479361-27">{</span><span class="ss">recbuf</span><span class="p">,</span><span class="mi">65536</span><span class="p" data-group-id="2540479361-27">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2540479361-28">{</span><span class="ss">ip</span><span class="p">,</span><span class="n">IP</span><span class="p" data-group-id="2540479361-28">}</span><span class="p" data-group-id="2540479361-26">]</span><span class="p" data-group-id="2540479361-25">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="2540479361-29">(</span><span class="s">&quot;Listening on </span><span class="si">~w</span><span class="s">:</span><span class="si">~w</span><span class="s">. </span><span class="si">~w</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2540479361-30">[</span><span class="n">IP</span><span class="p">,</span><span class="n">Port</span><span class="p">,</span><span class="n">S</span><span class="p" data-group-id="2540479361-30">]</span><span class="p" data-group-id="2540479361-29">)</span><span class="p">,</span><span class="w">
    </span><span class="ss">ok</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">gen_sctp</span><span class="p">:</span><span class="nf">listen</span><span class="p" data-group-id="2540479361-31">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="ss">true</span><span class="p" data-group-id="2540479361-31">)</span><span class="p">,</span><span class="w">
    </span><span class="nf">server_loop</span><span class="p" data-group-id="2540479361-32">(</span><span class="n">S</span><span class="p" data-group-id="2540479361-32">)</span><span class="p">.</span><span class="w">

</span><span class="nf">server_loop</span><span class="p" data-group-id="2540479361-33">(</span><span class="n">S</span><span class="p" data-group-id="2540479361-33">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="nc">gen_sctp</span><span class="p">:</span><span class="nf">recv</span><span class="p" data-group-id="2540479361-34">(</span><span class="n">S</span><span class="p" data-group-id="2540479361-34">)</span><span class="w"> </span><span class="k">of</span><span class="w">
    </span><span class="p" data-group-id="2540479361-35">{</span><span class="ss">error</span><span class="p">,</span><span class="w"> </span><span class="n">Error</span><span class="p" data-group-id="2540479361-35">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
        </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="2540479361-36">(</span><span class="s">&quot;SCTP RECV ERROR: </span><span class="si">~p</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2540479361-37">[</span><span class="n">Error</span><span class="p" data-group-id="2540479361-37">]</span><span class="p" data-group-id="2540479361-36">)</span><span class="p">;</span><span class="w">
    </span><span class="n">Data</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
        </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="2540479361-38">(</span><span class="s">&quot;Received: </span><span class="si">~p</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2540479361-39">[</span><span class="n">Data</span><span class="p" data-group-id="2540479361-39">]</span><span class="p" data-group-id="2540479361-38">)</span><span class="w">
    </span><span class="k">end</span><span class="p">,</span><span class="w">
    </span><span class="nf">server_loop</span><span class="p" data-group-id="2540479361-40">(</span><span class="n">S</span><span class="p" data-group-id="2540479361-40">)</span><span class="p">.</span></code></pre><p>Example of an Erlang SCTP client interacting with the above server. Notice that in this example the client creates an association with the server with 5 outbound streams. Therefore, sending of <code>&quot;Test 0&quot;</code> over stream 0 succeeds, but sending of <code>&quot;Test 5&quot;</code> over stream 5 fails. The client then <code>abort</code>s the association, which results in that the corresponding event is received on the server side.</p><pre><code class="makeup erlang"><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="6040413608-1">(</span><span class="ss">sctp_client</span><span class="p" data-group-id="6040413608-1">)</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="6040413608-2">(</span><span class="p" data-group-id="6040413608-3">[</span><span class="ss">client</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">client</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">client</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="6040413608-3">]</span><span class="p" data-group-id="6040413608-2">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">include_lib</span><span class="p" data-group-id="6040413608-4">(</span><span class="s">&quot;kernel/include/inet.hrl&quot;</span><span class="p" data-group-id="6040413608-4">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">include_lib</span><span class="p" data-group-id="6040413608-5">(</span><span class="s">&quot;kernel/include/inet_sctp.hrl&quot;</span><span class="p" data-group-id="6040413608-5">)</span><span class="p">.</span><span class="w">

</span><span class="nf">client</span><span class="p" data-group-id="6040413608-6">(</span><span class="p" data-group-id="6040413608-6">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">client</span><span class="p" data-group-id="6040413608-7">(</span><span class="p" data-group-id="6040413608-8">[</span><span class="ss">localhost</span><span class="p" data-group-id="6040413608-8">]</span><span class="p" data-group-id="6040413608-7">)</span><span class="p">.</span><span class="w">

</span><span class="nf">client</span><span class="p" data-group-id="6040413608-9">(</span><span class="p" data-group-id="6040413608-10">[</span><span class="n">Host</span><span class="p" data-group-id="6040413608-10">]</span><span class="p" data-group-id="6040413608-9">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">client</span><span class="p" data-group-id="6040413608-11">(</span><span class="n">Host</span><span class="p">,</span><span class="w"> </span><span class="mi">2006</span><span class="p" data-group-id="6040413608-11">)</span><span class="p">;</span><span class="w">
 
</span><span class="nf">client</span><span class="p" data-group-id="6040413608-12">(</span><span class="p" data-group-id="6040413608-13">[</span><span class="n">Host</span><span class="p">,</span><span class="w"> </span><span class="n">Port</span><span class="p" data-group-id="6040413608-13">]</span><span class="p" data-group-id="6040413608-12">)</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="nf">is_list</span><span class="p" data-group-id="6040413608-14">(</span><span class="n">Host</span><span class="p" data-group-id="6040413608-14">)</span><span class="p">,</span><span class="w"> </span><span class="nf">is_list</span><span class="p" data-group-id="6040413608-15">(</span><span class="n">Port</span><span class="p" data-group-id="6040413608-15">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">client</span><span class="p" data-group-id="6040413608-16">(</span><span class="n">Host</span><span class="p">,</span><span class="nf">list_to_integer</span><span class="p" data-group-id="6040413608-17">(</span><span class="n">Port</span><span class="p" data-group-id="6040413608-17">)</span><span class="p" data-group-id="6040413608-16">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">init</span><span class="p">:</span><span class="nf">stop</span><span class="p" data-group-id="6040413608-18">(</span><span class="p" data-group-id="6040413608-18">)</span><span class="p">.</span><span class="w">

</span><span class="nf">client</span><span class="p" data-group-id="6040413608-19">(</span><span class="n">Host</span><span class="p">,</span><span class="w"> </span><span class="n">Port</span><span class="p" data-group-id="6040413608-19">)</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="nf">is_integer</span><span class="p" data-group-id="6040413608-20">(</span><span class="n">Port</span><span class="p" data-group-id="6040413608-20">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="6040413608-21">{</span><span class="ss">ok</span><span class="p">,</span><span class="n">S</span><span class="p" data-group-id="6040413608-21">}</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">gen_sctp</span><span class="p">:</span><span class="nf">open</span><span class="p" data-group-id="6040413608-22">(</span><span class="p" data-group-id="6040413608-22">)</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="6040413608-23">{</span><span class="ss">ok</span><span class="p">,</span><span class="n">Assoc</span><span class="p" data-group-id="6040413608-23">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">gen_sctp</span><span class="p">:</span><span class="nf">connect</span><span class="w">
        </span><span class="p" data-group-id="6040413608-24">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">Host</span><span class="p">,</span><span class="w"> </span><span class="n">Port</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6040413608-25">[</span><span class="p" data-group-id="6040413608-26">{</span><span class="ss">sctp_initmsg</span><span class="p">,</span><span class="o">#</span><span class="ss">sctp_initmsg</span><span class="p" data-group-id="6040413608-27">{</span><span class="ss">num_ostreams</span><span class="o">=</span><span class="mi">5</span><span class="p" data-group-id="6040413608-27">}</span><span class="p" data-group-id="6040413608-26">}</span><span class="p" data-group-id="6040413608-25">]</span><span class="p" data-group-id="6040413608-24">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="6040413608-28">(</span><span class="s">&quot;Connection Successful, Assoc=</span><span class="si">~p</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6040413608-29">[</span><span class="n">Assoc</span><span class="p" data-group-id="6040413608-29">]</span><span class="p" data-group-id="6040413608-28">)</span><span class="p">,</span><span class="w">

    </span><span class="nc">io</span><span class="p">:</span><span class="nf">write</span><span class="p" data-group-id="6040413608-30">(</span><span class="nc">gen_sctp</span><span class="p">:</span><span class="nf">send</span><span class="p" data-group-id="6040413608-31">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">Assoc</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="p">&lt;&lt;</span><span class="s">&quot;Test 0&quot;</span><span class="p">&gt;&gt;</span><span class="p" data-group-id="6040413608-31">)</span><span class="p" data-group-id="6040413608-30">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">io</span><span class="p">:</span><span class="nf">nl</span><span class="p" data-group-id="6040413608-32">(</span><span class="p" data-group-id="6040413608-32">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">timer</span><span class="p">:</span><span class="nf">sleep</span><span class="p" data-group-id="6040413608-33">(</span><span class="mi">10000</span><span class="p" data-group-id="6040413608-33">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">io</span><span class="p">:</span><span class="nf">write</span><span class="p" data-group-id="6040413608-34">(</span><span class="nc">gen_sctp</span><span class="p">:</span><span class="nf">send</span><span class="p" data-group-id="6040413608-35">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">Assoc</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="p">&lt;&lt;</span><span class="s">&quot;Test 5&quot;</span><span class="p">&gt;&gt;</span><span class="p" data-group-id="6040413608-35">)</span><span class="p" data-group-id="6040413608-34">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">io</span><span class="p">:</span><span class="nf">nl</span><span class="p" data-group-id="6040413608-36">(</span><span class="p" data-group-id="6040413608-36">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">timer</span><span class="p">:</span><span class="nf">sleep</span><span class="p" data-group-id="6040413608-37">(</span><span class="mi">10000</span><span class="p" data-group-id="6040413608-37">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">io</span><span class="p">:</span><span class="nf">write</span><span class="p" data-group-id="6040413608-38">(</span><span class="nc">gen_sctp</span><span class="p">:</span><span class="nf">abort</span><span class="p" data-group-id="6040413608-39">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">Assoc</span><span class="p" data-group-id="6040413608-39">)</span><span class="p" data-group-id="6040413608-38">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">io</span><span class="p">:</span><span class="nf">nl</span><span class="p" data-group-id="6040413608-40">(</span><span class="p" data-group-id="6040413608-40">)</span><span class="p">,</span><span class="w">

    </span><span class="nc">timer</span><span class="p">:</span><span class="nf">sleep</span><span class="p" data-group-id="6040413608-41">(</span><span class="mi">1000</span><span class="p" data-group-id="6040413608-41">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">gen_sctp</span><span class="p">:</span><span class="nf">close</span><span class="p" data-group-id="6040413608-42">(</span><span class="n">S</span><span class="p" data-group-id="6040413608-42">)</span><span class="p">.</span></code></pre><p>A simple Erlang SCTP client that uses the <code>connect_init</code> API:</p><pre><code class="makeup erlang"><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="7228941468-1">(</span><span class="ss">ex3</span><span class="p" data-group-id="7228941468-1">)</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="7228941468-2">(</span><span class="p" data-group-id="7228941468-3">[</span><span class="ss">client</span><span class="o">/</span><span class="mi">4</span><span class="p" data-group-id="7228941468-3">]</span><span class="p" data-group-id="7228941468-2">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">include_lib</span><span class="p" data-group-id="7228941468-4">(</span><span class="s">&quot;kernel/include/inet.hrl&quot;</span><span class="p" data-group-id="7228941468-4">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">include_lib</span><span class="p" data-group-id="7228941468-5">(</span><span class="s">&quot;kernel/include/inet_sctp.hrl&quot;</span><span class="p" data-group-id="7228941468-5">)</span><span class="p">.</span><span class="w">

</span><span class="nf">client</span><span class="p" data-group-id="7228941468-6">(</span><span class="n">Peer1</span><span class="p">,</span><span class="w"> </span><span class="n">Port1</span><span class="p">,</span><span class="w"> </span><span class="n">Peer2</span><span class="p">,</span><span class="w"> </span><span class="n">Port2</span><span class="p" data-group-id="7228941468-6">)</span><span class="w">
  </span><span class="k">when</span><span class="w"> </span><span class="nf">is_tuple</span><span class="p" data-group-id="7228941468-7">(</span><span class="n">Peer1</span><span class="p" data-group-id="7228941468-7">)</span><span class="p">,</span><span class="w"> </span><span class="nf">is_integer</span><span class="p" data-group-id="7228941468-8">(</span><span class="n">Port1</span><span class="p" data-group-id="7228941468-8">)</span><span class="p">,</span><span class="w"> </span><span class="nf">is_tuple</span><span class="p" data-group-id="7228941468-9">(</span><span class="n">Peer2</span><span class="p" data-group-id="7228941468-9">)</span><span class="p">,</span><span class="w"> </span><span class="nf">is_integer</span><span class="p" data-group-id="7228941468-10">(</span><span class="n">Port2</span><span class="p" data-group-id="7228941468-10">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="7228941468-11">{</span><span class="ss">ok</span><span class="p">,</span><span class="n">S</span><span class="p" data-group-id="7228941468-11">}</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">gen_sctp</span><span class="p">:</span><span class="nf">open</span><span class="p" data-group-id="7228941468-12">(</span><span class="p" data-group-id="7228941468-12">)</span><span class="p">,</span><span class="w">
    </span><span class="n">SctpInitMsgOpt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="7228941468-13">{</span><span class="ss">sctp_initmsg</span><span class="p">,</span><span class="o">#</span><span class="ss">sctp_initmsg</span><span class="p" data-group-id="7228941468-14">{</span><span class="ss">num_ostreams</span><span class="o">=</span><span class="mi">5</span><span class="p" data-group-id="7228941468-14">}</span><span class="p" data-group-id="7228941468-13">}</span><span class="p">,</span><span class="w">
    </span><span class="n">ActiveOpt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="7228941468-15">{</span><span class="ss">active</span><span class="p">,</span><span class="w"> </span><span class="ss">true</span><span class="p" data-group-id="7228941468-15">}</span><span class="p">,</span><span class="w">
    </span><span class="n">Opts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="7228941468-16">[</span><span class="n">SctpInitMsgOpt</span><span class="p">,</span><span class="w"> </span><span class="n">ActiveOpt</span><span class="p" data-group-id="7228941468-16">]</span><span class="p">,</span><span class="w">
    </span><span class="ss">ok</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">gen_sctp</span><span class="p">:</span><span class="nf">connect</span><span class="p" data-group-id="7228941468-17">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">Peer1</span><span class="p">,</span><span class="w"> </span><span class="n">Port1</span><span class="p">,</span><span class="w"> </span><span class="n">Opts</span><span class="p" data-group-id="7228941468-17">)</span><span class="p">,</span><span class="w">
    </span><span class="ss">ok</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">gen_sctp</span><span class="p">:</span><span class="nf">connect</span><span class="p" data-group-id="7228941468-18">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">Peer2</span><span class="p">,</span><span class="w"> </span><span class="n">Port2</span><span class="p">,</span><span class="w"> </span><span class="n">Opts</span><span class="p" data-group-id="7228941468-18">)</span><span class="p">,</span><span class="w">
    </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="7228941468-19">(</span><span class="s">&quot;Connections initiated</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7228941468-20">[</span><span class="p" data-group-id="7228941468-20">]</span><span class="p" data-group-id="7228941468-19">)</span><span class="p">,</span><span class="w">
    </span><span class="nf">client_loop</span><span class="p" data-group-id="7228941468-21">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">Peer1</span><span class="p">,</span><span class="w"> </span><span class="n">Port1</span><span class="p">,</span><span class="w"> </span><span class="ss">undefined</span><span class="p">,</span><span class="w"> </span><span class="n">Peer2</span><span class="p">,</span><span class="w"> </span><span class="n">Port2</span><span class="p">,</span><span class="w"> </span><span class="ss">undefined</span><span class="p" data-group-id="7228941468-21">)</span><span class="p">.</span><span class="w">

</span><span class="nf">client_loop</span><span class="p" data-group-id="7228941468-22">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">Peer1</span><span class="p">,</span><span class="w"> </span><span class="n">Port1</span><span class="p">,</span><span class="w"> </span><span class="n">AssocId1</span><span class="p">,</span><span class="w"> </span><span class="n">Peer2</span><span class="p">,</span><span class="w"> </span><span class="n">Port2</span><span class="p">,</span><span class="w"> </span><span class="n">AssocId2</span><span class="p" data-group-id="7228941468-22">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="k">receive</span><span class="w">
        </span><span class="p" data-group-id="7228941468-23">{</span><span class="ss">sctp</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">Peer1</span><span class="p">,</span><span class="w"> </span><span class="n">Port1</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7228941468-24">{</span><span class="p">_</span><span class="n">Anc</span><span class="p">,</span><span class="w"> </span><span class="n">SAC</span><span class="p" data-group-id="7228941468-24">}</span><span class="p" data-group-id="7228941468-23">}</span><span class="w">
          </span><span class="k">when</span><span class="w"> </span><span class="nf">is_record</span><span class="p" data-group-id="7228941468-25">(</span><span class="n">SAC</span><span class="p">,</span><span class="w"> </span><span class="ss">sctp_assoc_change</span><span class="p" data-group-id="7228941468-25">)</span><span class="p">,</span><span class="w"> </span><span class="n">AssocId1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">undefined</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
            </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="7228941468-26">(</span><span class="s">&quot;Association 1 connect result: </span><span class="si">~p</span><span class="s">. AssocId: </span><span class="si">~p</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w">
                      </span><span class="p" data-group-id="7228941468-27">[</span><span class="n">SAC</span><span class="o">#</span><span class="ss">sctp_assoc_change</span><span class="p">.</span><span class="ss">state</span><span class="p">,</span><span class="w">
                       </span><span class="n">SAC</span><span class="o">#</span><span class="ss">sctp_assoc_change</span><span class="p">.</span><span class="ss">assoc_id</span><span class="p" data-group-id="7228941468-27">]</span><span class="p" data-group-id="7228941468-26">)</span><span class="p">,</span><span class="w">
            </span><span class="nf">client_loop</span><span class="p" data-group-id="7228941468-28">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">Peer1</span><span class="p">,</span><span class="w"> </span><span class="n">Port1</span><span class="p">,</span><span class="w"> </span><span class="n">SAC</span><span class="o">#</span><span class="ss">sctp_assoc_change</span><span class="p">.</span><span class="ss">assoc_id</span><span class="p">,</span><span class="w">
                        </span><span class="n">Peer2</span><span class="p">,</span><span class="w"> </span><span class="n">Port2</span><span class="p">,</span><span class="w"> </span><span class="n">AssocId2</span><span class="p" data-group-id="7228941468-28">)</span><span class="p">;</span><span class="w">

        </span><span class="p" data-group-id="7228941468-29">{</span><span class="ss">sctp</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">Peer2</span><span class="p">,</span><span class="w"> </span><span class="n">Port2</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7228941468-30">{</span><span class="p">_</span><span class="n">Anc</span><span class="p">,</span><span class="w"> </span><span class="n">SAC</span><span class="p" data-group-id="7228941468-30">}</span><span class="p" data-group-id="7228941468-29">}</span><span class="w">
          </span><span class="k">when</span><span class="w"> </span><span class="nf">is_record</span><span class="p" data-group-id="7228941468-31">(</span><span class="n">SAC</span><span class="p">,</span><span class="w"> </span><span class="ss">sctp_assoc_change</span><span class="p" data-group-id="7228941468-31">)</span><span class="p">,</span><span class="w"> </span><span class="n">AssocId2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">undefined</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
            </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="7228941468-32">(</span><span class="s">&quot;Association 2 connect result: </span><span class="si">~p</span><span class="s">. AssocId: </span><span class="si">~p</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w">
                      </span><span class="p" data-group-id="7228941468-33">[</span><span class="n">SAC</span><span class="o">#</span><span class="ss">sctp_assoc_change</span><span class="p">.</span><span class="ss">state</span><span class="p">,</span><span class="w"> </span><span class="n">SAC</span><span class="o">#</span><span class="ss">sctp_assoc_change</span><span class="p">.</span><span class="ss">assoc_id</span><span class="p" data-group-id="7228941468-33">]</span><span class="p" data-group-id="7228941468-32">)</span><span class="p">,</span><span class="w">
            </span><span class="nf">client_loop</span><span class="p" data-group-id="7228941468-34">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">Peer1</span><span class="p">,</span><span class="w"> </span><span class="n">Port1</span><span class="p">,</span><span class="w"> </span><span class="n">AssocId1</span><span class="p">,</span><span class="w"> </span><span class="n">Peer2</span><span class="p">,</span><span class="w"> </span><span class="n">Port2</span><span class="p">,</span><span class="w">
                       </span><span class="n">SAC</span><span class="o">#</span><span class="ss">sctp_assoc_change</span><span class="p">.</span><span class="ss">assoc_id</span><span class="p" data-group-id="7228941468-34">)</span><span class="p">;</span><span class="w">

        </span><span class="p" data-group-id="7228941468-35">{</span><span class="ss">sctp</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">Peer1</span><span class="p">,</span><span class="w"> </span><span class="n">Port1</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7228941468-35">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
            </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="7228941468-36">(</span><span class="s">&quot;Association 1: received </span><span class="si">~p</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7228941468-37">[</span><span class="n">Data</span><span class="p" data-group-id="7228941468-37">]</span><span class="p" data-group-id="7228941468-36">)</span><span class="p">,</span><span class="w">
            </span><span class="nf">client_loop</span><span class="p" data-group-id="7228941468-38">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">Peer1</span><span class="p">,</span><span class="w"> </span><span class="n">Port1</span><span class="p">,</span><span class="w"> </span><span class="n">AssocId1</span><span class="p">,</span><span class="w">
                        </span><span class="n">Peer2</span><span class="p">,</span><span class="w"> </span><span class="n">Port2</span><span class="p">,</span><span class="w"> </span><span class="n">AssocId2</span><span class="p" data-group-id="7228941468-38">)</span><span class="p">;</span><span class="w">

        </span><span class="p" data-group-id="7228941468-39">{</span><span class="ss">sctp</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">Peer2</span><span class="p">,</span><span class="w"> </span><span class="n">Port2</span><span class="p">,</span><span class="w"> </span><span class="n">Data</span><span class="p" data-group-id="7228941468-39">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
            </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="7228941468-40">(</span><span class="s">&quot;Association 2: received </span><span class="si">~p</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7228941468-41">[</span><span class="n">Data</span><span class="p" data-group-id="7228941468-41">]</span><span class="p" data-group-id="7228941468-40">)</span><span class="p">,</span><span class="w">
            </span><span class="nf">client_loop</span><span class="p" data-group-id="7228941468-42">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">Peer1</span><span class="p">,</span><span class="w"> </span><span class="n">Port1</span><span class="p">,</span><span class="w"> </span><span class="n">AssocId1</span><span class="p">,</span><span class="w">
                        </span><span class="n">Peer2</span><span class="p">,</span><span class="w"> </span><span class="n">Port2</span><span class="p">,</span><span class="w"> </span><span class="n">AssocId2</span><span class="p" data-group-id="7228941468-42">)</span><span class="p">;</span><span class="w">

        </span><span class="n">Other</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
            </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="7228941468-43">(</span><span class="s">&quot;Other </span><span class="si">~p</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7228941468-44">[</span><span class="n">Other</span><span class="p" data-group-id="7228941468-44">]</span><span class="p" data-group-id="7228941468-43">)</span><span class="p">,</span><span class="w">
            </span><span class="nf">client_loop</span><span class="p" data-group-id="7228941468-45">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">Peer1</span><span class="p">,</span><span class="w"> </span><span class="n">Port1</span><span class="p">,</span><span class="w"> </span><span class="n">AssocId1</span><span class="p">,</span><span class="w">
                        </span><span class="n">Peer2</span><span class="p">,</span><span class="w"> </span><span class="n">Port2</span><span class="p">,</span><span class="w"> </span><span class="n">AssocId2</span><span class="p" data-group-id="7228941468-45">)</span><span class="w">

    </span><span class="k">after</span><span class="w"> </span><span class="mi">5000</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
            </span><span class="ss">ok</span><span class="w">
    </span><span class="k">end</span><span class="p">.</span></code></pre><a id="seealso"></a><h2 id="module-see-also" class="section-heading">
  <a href="#module-see-also" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  See Also
</h2>
<p><a href="gen_tcp.html"><code>gen_tcp(3)</code></a>, <a href="gen_udp.html"><code>gen_udp(3)</code></a>, <a href="inet.html"><code>inet(3)</code></a>, <a href="http://www.rfc-archive.org/getrfc.php?rfc=2960">RFC 2960</a> (Stream Control Transmission Protocol), <a href="http://tools.ietf.org/html/draft-ietf-tsvwg-sctpsocket-13">Sockets API Extensions for SCTP</a></p>
        </section>


        <section id="summary" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#summary">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Summary
          </h1>

  <div class="summary-types summary">
    <h2>
      <a href="#types">Types</a>
    </h2>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:assoc_id/0">assoc_id()</a>

  </div>

    <div class="summary-synopsis"><p>An opaque term returned in, for example, <code>#sctp_paddr_change{}</code>, which identifies an association for an SCTP socket. The term is opaque except for the special value <code>0</code>, which has a meaning such as &quot;the whole endpoint&quot; or &quot;all future associations&quot;.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:option/0">-type option() :: term().</a>

  </div>

    <div class="summary-synopsis"><p>One of the <a href="gen_sctp.html#content#options">SCTP Socket Options</a>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:option_name/0">-type option_name() :: term().</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:sctp_socket/0">sctp_socket()</a>

  </div>

    <div class="summary-synopsis"><p>Socket identifier returned from <a href="gen_sctp.html#open/0"><code>open/*</code></a>.</p></div>

</div>

  </div>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#abort/2">abort/2</a>

  </div>

    <div class="summary-synopsis"><p>Abnormally terminates the association specified by <code>Assoc</code>, without flushing of unsent data. The socket itself remains open. Other associations opened on this socket are still valid, and the socket can be used in new associations.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#close/1">close/1</a>

  </div>

    <div class="summary-synopsis"><p>Closes the socket and all associations on it. The unsent data is flushed as in <a href="gen_sctp.html#eof/2"><code>eof/2</code></a>. The <code>close/1</code> call is blocking or otherwise depending of the value of the <a href="inet.html#option-linger"><code>linger</code></a> socket <a href="gen_sctp.html#content#options">option</a>. If <code>close</code> does not linger or linger time-out expires, the call returns and the data is flushed in the background.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#connect/4">connect/4</a>

  </div>

    <div class="summary-synopsis"><p>Same as <code>connect(Socket, Addr, Port, Opts, infinity)</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#connect/5">connect/5</a>

  </div>

    <div class="summary-synopsis"><p>Establishes a new association for socket <code>Socket</code>, with the peer (SCTP server socket) specified by <code>Addr</code> and <code>Port</code>. <code>Timeout</code>, is expressed in milliseconds. A socket can be associated with multiple peers.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#connect_init/4">connect_init/4</a>

  </div>

    <div class="summary-synopsis"><p>Same as <code>connect_init(Socket, Addr, Port, Opts, infinity)</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#connect_init/5">connect_init/5</a>

  </div>

    <div class="summary-synopsis"><p>Initiates a new association for socket <code>Socket</code>, with the peer (SCTP server socket) specified by <code>Addr</code> and <code>Port</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#controlling_process/2">controlling_process/2</a>

  </div>

    <div class="summary-synopsis"><p>Assigns a new controlling process <code>Pid</code> to <code>Socket</code>. Same implementation as <a href="gen_udp.html#controlling_process/2"><code>gen_udp:controlling_process/2</code></a>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#eof/2">eof/2</a>

  </div>

    <div class="summary-synopsis"><p>Gracefully terminates the association specified by <code>Assoc</code>, with flushing of all unsent data. The socket itself remains open. Other associations opened on this socket are still valid. The socket can be used in new associations.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#error_string/1">error_string/1</a>

  </div>

    <div class="summary-synopsis"><p>Translates an SCTP error number from, for example, <code>#sctp_remote_error{}</code> or <code>#sctp_send_failed{}</code> into an explanatory string, or one of the atoms <code>ok</code> for no error or <code>undefined</code> for an unrecognized error.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#listen/2">listen/2</a>

  </div>

    <div class="summary-synopsis"><p>Sets up a socket to listen on the IP address and port number it is bound to.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#open/0">open/0</a>

  </div>

    <div class="summary-synopsis"><p>Creates an SCTP socket and binds it to the local addresses specified by all <code>{ip,IP}</code> (or synonymously <code>{ifaddr,IP}</code>) options (this feature is called SCTP multi-homing). The default <code>IP</code> and <code>Port</code> are <code>any</code> and <code>0</code>, meaning bind to all local addresses on any free port.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#open/1">open/1</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#open/2">open/2</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#peeloff/2">peeloff/2</a>

  </div>

    <div class="summary-synopsis"><p>Branches off an existing association <code>Assoc</code> in a socket <code>Socket</code> of type <code>seqpacket</code> (one-to-many style) into a new socket <code>NewSocket</code> of type <code>stream</code> (one-to-one style).</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#recv/1">recv/1</a>

  </div>

    <div class="summary-synopsis"><p>Receives the <code>Data</code> message from any association of the socket. If the receive times out, <code>{error,timeout}</code> is returned. The default time-out is <code>infinity</code>. <code>FromIP</code> and <code>FromPort</code> indicate the address of the sender.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#recv/2">recv/2</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#send/3">send/3</a>

  </div>

    <div class="summary-synopsis"><p>Sends the <code>Data</code> message with all sending parameters from a <a href="gen_sctp.html#content#record-sctp_sndrcvinfo"><code>#sctp_sndrcvinfo{}</code></a> record. This way, the user can specify the PPID (passed to the remote end) and context (passed to the local SCTP layer), which can be used, for example, for error identification. However, such a fine level of user control is rarely required. The function <code>send/4</code> is sufficient for most applications.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#send/4">send/4</a>

  </div>

    <div class="summary-synopsis"><p>Sends a <code>Data</code> message over an existing association and specified stream.</p></div>

</div>

  </div>

        </section>


        <section id="types" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#types">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
Types
          </h1>
          <div class="types-list">
<section class="detail" id="t:assoc_id/0">

  <div class="detail-header">
    <a href="#t:assoc_id/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">assoc_id()</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>assoc_id() :: term().</pre>

      </div>

<p>An opaque term returned in, for example, <code>#sctp_paddr_change{}</code>, which identifies an association for an SCTP socket. The term is opaque except for the special value <code>0</code>, which has a meaning such as &quot;the whole endpoint&quot; or &quot;all future associations&quot;.</p>
  </section>
</section>
<section class="detail" id="t:option/0">

  <div class="detail-header">
    <a href="#t:option/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">-type option() :: term().</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>option() ::
    {active, true | false | once | -32768..32767} |
    {buffer, non_neg_integer()} |
    {dontroute, boolean()} |
    {high_msgq_watermark, pos_integer()} |
    {linger, {boolean(), non_neg_integer()}} |
    {low_msgq_watermark, pos_integer()} |
    {mode, list | binary} |
    list | binary |
    {priority, non_neg_integer()} |
    {recbuf, non_neg_integer()} |
    {reuseaddr, boolean()} |
    {ipv6_v6only, boolean()} |
    {sctp_adaptation_layer, #sctp_setadaptation{}} |
    {sctp_associnfo, #sctp_assocparams{}} |
    {sctp_autoclose, non_neg_integer()} |
    {sctp_default_send_param, #sctp_sndrcvinfo{}} |
    {sctp_delayed_ack_time, #sctp_assoc_value{}} |
    {sctp_disable_fragments, boolean()} |
    {sctp_events, #sctp_event_subscribe{}} |
    {sctp_get_peer_addr_info, #sctp_paddrinfo{}} |
    {sctp_i_want_mapped_v4_addr, boolean()} |
    {sctp_initmsg, #sctp_initmsg{}} |
    {sctp_maxseg, non_neg_integer()} |
    {sctp_nodelay, boolean()} |
    {sctp_peer_addr_params, #sctp_paddrparams{}} |
    {sctp_primary_addr, #sctp_prim{}} |
    {sctp_rtoinfo, #sctp_rtoinfo{}} |
    {sctp_set_peer_primary_addr, #sctp_setpeerprim{}} |
    {sctp_status, #sctp_status{}} |
    {sndbuf, non_neg_integer()} |
    {tos, non_neg_integer()} |
    {tclass, non_neg_integer()} |
    {ttl, non_neg_integer()} |
    {recvtos, boolean()} |
    {recvtclass, boolean()} |
    {recvttl, boolean()}.</pre>

      </div>

<p>One of the <a href="gen_sctp.html#content#options">SCTP Socket Options</a>.</p>
  </section>
</section>
<section class="detail" id="t:option_name/0">

  <div class="detail-header">
    <a href="#t:option_name/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">-type option_name() :: term().</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>option_name() ::
    active | buffer | dontroute | high_msgq_watermark | linger | low_msgq_watermark | mode |
    priority | recbuf | reuseaddr | ipv6_v6only | sctp_adaptation_layer | sctp_associnfo |
    sctp_autoclose | sctp_default_send_param | sctp_delayed_ack_time | sctp_disable_fragments |
    sctp_events | sctp_get_peer_addr_info | sctp_i_want_mapped_v4_addr | sctp_initmsg |
    sctp_maxseg | sctp_nodelay | sctp_peer_addr_params | sctp_primary_addr | sctp_rtoinfo |
    sctp_set_peer_primary_addr | sctp_status | sndbuf | tos | tclass | ttl | recvtos |
    recvtclass | recvttl.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:sctp_socket/0">

  <div class="detail-header">
    <a href="#t:sctp_socket/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">sctp_socket()</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>sctp_socket() :: port().</pre>

      </div>

<p>Socket identifier returned from <a href="gen_sctp.html#open/0"><code>open/*</code></a>.</p><a id="exports"></a>
  </section>
</section>

          </div>
        </section>

        <section id="functions" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#functions">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
Functions
          </h1>
          <div class="functions-list">
<section class="detail" id="abort/2">

  <div class="detail-header">
    <a href="#abort/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">abort/2</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>abort(Socket, Assoc) -> ok | {error, <a href="inet.html#t:posix/0">inet:posix</a>()}
         when Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>(), Assoc :: #sctp_assoc_change{}.</pre>

      </div>

<p>Abnormally terminates the association specified by <code>Assoc</code>, without flushing of unsent data. The socket itself remains open. Other associations opened on this socket are still valid, and the socket can be used in new associations.</p>
  </section>
</section>
<section class="detail" id="close/1">

  <div class="detail-header">
    <a href="#close/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">close/1</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>close(Socket) -> ok | {error, <a href="inet.html#t:posix/0">inet:posix</a>()} when Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>().</pre>

      </div>

<p>Closes the socket and all associations on it. The unsent data is flushed as in <a href="gen_sctp.html#eof/2"><code>eof/2</code></a>. The <code>close/1</code> call is blocking or otherwise depending of the value of the <a href="inet.html#option-linger"><code>linger</code></a> socket <a href="gen_sctp.html#content#options">option</a>. If <code>close</code> does not linger or linger time-out expires, the call returns and the data is flushed in the background.</p>
  </section>
</section>
<section class="detail" id="connect/4">

  <div class="detail-header">
    <a href="#connect/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">connect/4</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>connect(Socket, Addr, Port, Opts) ->
           {ok, #sctp_assoc_change{state :: comm_up}} |
           {error, #sctp_assoc_change{state :: cant_assoc}} |
           {error, <a href="inet.html#t:posix/0">inet:posix</a>()}
           when
               Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>(),
               Addr :: <a href="inet.html#t:ip_address/0">inet:ip_address</a>() | <a href="inet.html#t:hostname/0">inet:hostname</a>(),
               Port :: <a href="inet.html#t:port_number/0">inet:port_number</a>(),
               Opts :: [Opt :: <a href="#t:option/0">option</a>()].</pre>

      </div>

<p>Same as <code>connect(Socket, Addr, Port, Opts, infinity)</code>.</p>
  </section>
</section>
<section class="detail" id="connect/5">

  <div class="detail-header">
    <a href="#connect/5" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">connect/5</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>connect(Socket, Addr, Port, Opts, Timeout) ->
           {ok, #sctp_assoc_change{state :: comm_up}} |
           {error, #sctp_assoc_change{state :: cant_assoc}} |
           {error, <a href="inet.html#t:posix/0">inet:posix</a>()}
           when
               Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>(),
               Addr :: <a href="inet.html#t:ip_address/0">inet:ip_address</a>() | <a href="inet.html#t:hostname/0">inet:hostname</a>(),
               Port :: <a href="inet.html#t:port_number/0">inet:port_number</a>(),
               Opts :: [Opt :: <a href="#t:option/0">option</a>()],
               Timeout :: timeout().</pre>

      </div>

<p>Establishes a new association for socket <code>Socket</code>, with the peer (SCTP server socket) specified by <code>Addr</code> and <code>Port</code>. <code>Timeout</code>, is expressed in milliseconds. A socket can be associated with multiple peers.</p><div class="warning"><p>Using a value of <code>Timeout</code> less than the maximum time taken by the OS to establish an association (around 4.5 minutes if the default values from <a href="https://tools.ietf.org/html/rfc4960">RFC 4960</a> are used), can result in inconsistent or incorrect return values. This is especially relevant for associations sharing the same <code>Socket</code> (that is, source address and port), as the controlling process blocks until <code>connect/*</code> returns. <a href="gen_sctp.html#connect_init/4"><code>connect_init/*</code></a> provides an alternative without this limitation.</p></div><p><a id="record-sctp_assoc_change"></a>The result of <code>connect/*</code> is an <code>#sctp_assoc_change{}</code> event that contains, in particular, the new <a href="gen_sctp.html#t:assoc_id/0">Association ID</a>:</p><pre><code class="makeup erlang"><span class="o">#</span><span class="ss">sctp_assoc_change</span><span class="p" data-group-id="9041448388-1">{</span><span class="w">
      </span><span class="ss">state</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="nf">atom</span><span class="p" data-group-id="9041448388-2">(</span><span class="p" data-group-id="9041448388-2">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">error</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="9041448388-3">(</span><span class="p" data-group-id="9041448388-3">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">outbound_streams</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="9041448388-4">(</span><span class="p" data-group-id="9041448388-4">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">inbound_streams</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="9041448388-5">(</span><span class="p" data-group-id="9041448388-5">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">assoc_id</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="nf">assoc_id</span><span class="p" data-group-id="9041448388-6">(</span><span class="p" data-group-id="9041448388-6">)</span><span class="w">
</span><span class="p" data-group-id="9041448388-1">}</span></code></pre><p>The number of outbound and inbound streams can be set by giving an <code>sctp_initmsg</code> option to <code>connect</code> as in:</p><pre><code class="makeup erlang"><span class="nf">connect</span><span class="p" data-group-id="7296252685-1">(</span><span class="n">Socket</span><span class="p">,</span><span class="w"> </span><span class="n">Ip</span><span class="p">,</span><span class="w"> </span><span class="n">Port</span><span class="o">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="7296252685-2">[</span><span class="p" data-group-id="7296252685-3">{</span><span class="ss">sctp_initmsg</span><span class="p">,</span><span class="o">#</span><span class="ss">sctp_initmsg</span><span class="p" data-group-id="7296252685-4">{</span><span class="ss">num_ostreams</span><span class="o">=</span><span class="n">OutStreams</span><span class="p">,</span><span class="w">
                                   </span><span class="ss">max_instreams</span><span class="o">=</span><span class="n">MaxInStreams</span><span class="p" data-group-id="7296252685-4">}</span><span class="p" data-group-id="7296252685-3">}</span><span class="p" data-group-id="7296252685-2">]</span><span class="p" data-group-id="7296252685-1">)</span></code></pre><p>All options <code>Opt</code> are set on the socket before the association is attempted. If an option record has undefined field values, the options record is first read from the socket for those values. In effect, <code>Opt</code> option records only define field values to change before connecting.</p><p>The returned <code>outbound_streams</code> and <code>inbound_streams</code> are the stream numbers on the socket. These can be different from the requested values (<code>OutStreams</code> and <code>MaxInStreams</code>, respectively) if the peer requires lower values.</p><p><code>state</code> can have the following values:</p><dl><dt><code>comm_up</code></dt><dd><p>Association is successfully established. This indicates a successful completion of <code>connect</code>.</p></dd><dt><code>cant_assoc</code></dt><dd><p>The association cannot be established (<code>connect/*</code> failure).</p></dd></dl><p>Other states do not normally occur in the output from <code>connect/*</code>. Rather, they can occur in <code>#sctp_assoc_change{}</code> events received instead of data in <a href="gen_sctp.html#recv/1"><code>recv/*</code></a> calls. All of them indicate losing the association because of various error conditions, and are listed here for the sake of completeness:</p><dl><dt><code>comm_lost</code></dt><dd></dd><dt><code>restart</code></dt><dd></dd><dt><code>shutdown_comp</code></dt><dd></dd></dl><p>Field <code>error</code> can provide more detailed diagnostics. The <code>error</code> field value can be converted into a string using <a href="gen_sctp.html#error_string/1"><code>error_string/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="connect_init/4">

  <div class="detail-header">
    <a href="#connect_init/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">connect_init/4</h1>


      <span class="note">(since OTP R13B04)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>connect_init(Socket, Addr, Port, Opts) -> ok | {error, <a href="inet.html#t:posix/0">inet:posix</a>()}
                when
                    Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>(),
                    Addr :: <a href="inet.html#t:ip_address/0">inet:ip_address</a>() | <a href="inet.html#t:hostname/0">inet:hostname</a>(),
                    Port :: <a href="inet.html#t:port_number/0">inet:port_number</a>(),
                    Opts :: [<a href="#t:option/0">option</a>()].</pre>

      </div>

<p>Same as <code>connect_init(Socket, Addr, Port, Opts, infinity)</code>.</p>
  </section>
</section>
<section class="detail" id="connect_init/5">

  <div class="detail-header">
    <a href="#connect_init/5" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">connect_init/5</h1>


      <span class="note">(since OTP R13B04)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>connect_init(Socket, Addr, Port, Opts, Timeout) -> ok | {error, <a href="inet.html#t:posix/0">inet:posix</a>()}
                when
                    Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>(),
                    Addr :: <a href="inet.html#t:ip_address/0">inet:ip_address</a>() | <a href="inet.html#t:hostname/0">inet:hostname</a>(),
                    Port :: <a href="inet.html#t:port_number/0">inet:port_number</a>(),
                    Opts :: [<a href="#t:option/0">option</a>()],
                    Timeout :: timeout().</pre>

      </div>

<p>Initiates a new association for socket <code>Socket</code>, with the peer (SCTP server socket) specified by <code>Addr</code> and <code>Port</code>.</p><p>The fundamental difference between this API and <code>connect/*</code> is that the return value is that of the underlying OS <code>connect(2)</code> system call. If <code>ok</code> is returned, the result of the association establishment is received by the calling process as an <a href="gen_sctp.html#content#record-sctp_assoc_change"><code>#sctp_assoc_change{}</code></a> event. The calling process must be prepared to receive this, or poll for it using <a href="gen_sctp.html#recv/1"><code>recv/*</code></a>, depending on the value of the active option.</p><p>The parameters are as described in <a href="gen_sctp.html#connect/5"><code>connect/*</code></a>, except the <code>Timeout</code> value.</p><p>The timer associated with <code>Timeout</code> only supervises IP resolution of <code>Addr</code>.</p>
  </section>
</section>
<section class="detail" id="controlling_process/2">

  <div class="detail-header">
    <a href="#controlling_process/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">controlling_process/2</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>controlling_process(Socket, Pid) -> ok | {error, Reason}
                       when
                           Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>(),
                           Pid :: pid(),
                           Reason :: closed | not_owner | badarg | <a href="inet.html#t:posix/0">inet:posix</a>().</pre>

      </div>

<p>Assigns a new controlling process <code>Pid</code> to <code>Socket</code>. Same implementation as <a href="gen_udp.html#controlling_process/2"><code>gen_udp:controlling_process/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="eof/2">

  <div class="detail-header">
    <a href="#eof/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">eof/2</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>eof(Socket, Assoc) -> ok | {error, Reason}
       when Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>(), Assoc :: #sctp_assoc_change{}, Reason :: term().</pre>

      </div>

<p>Gracefully terminates the association specified by <code>Assoc</code>, with flushing of all unsent data. The socket itself remains open. Other associations opened on this socket are still valid. The socket can be used in new associations.</p>
  </section>
</section>
<section class="detail" id="error_string/1">

  <div class="detail-header">
    <a href="#error_string/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">error_string/1</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>error_string(ErrorNumber) -> ok | string() | unknown_error when ErrorNumber :: integer().</pre>

      </div>

<p>Translates an SCTP error number from, for example, <code>#sctp_remote_error{}</code> or <code>#sctp_send_failed{}</code> into an explanatory string, or one of the atoms <code>ok</code> for no error or <code>undefined</code> for an unrecognized error.</p>
  </section>
</section>
<section class="detail" id="listen/2">

  <div class="detail-header">
    <a href="#listen/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">listen/2</h1>


      <span class="note">(since OTP R15B)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>listen(Socket, IsServer) -> ok | {error, Reason}
          when Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>(), IsServer :: boolean(), Reason :: term();
      (Socket, Backlog) -> ok | {error, Reason}
          when Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>(), Backlog :: integer(), Reason :: term().</pre>

      </div>

<p>Sets up a socket to listen on the IP address and port number it is bound to.</p><p>For type <code>seqpacket</code>, sockets (the default) <code>IsServer</code> must be <code>true</code> or <code>false</code>. In contrast to TCP, there is no listening queue length in SCTP. If <code>IsServer</code> is <code>true</code>, the socket accepts new associations, that is, it becomes an SCTP server socket.</p><p>For type <code>stream</code>, sockets Backlog define the backlog queue length just like in TCP.</p>
  </section>
</section>
<section class="detail" id="open/0">

  <div class="detail-header">
    <a href="#open/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">open/0</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>open() -> {ok, Socket} | {error, <a href="inet.html#t:posix/0">inet:posix</a>()} when Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>().</pre>

      </div>

<p>Creates an SCTP socket and binds it to the local addresses specified by all <code>{ip,IP}</code> (or synonymously <code>{ifaddr,IP}</code>) options (this feature is called SCTP multi-homing). The default <code>IP</code> and <code>Port</code> are <code>any</code> and <code>0</code>, meaning bind to all local addresses on any free port.</p><p>Other options:</p><dl><dt><code>inet6</code></dt><dd><p>Sets up the socket for IPv6.</p></dd><dt><code>inet</code></dt><dd><p>Sets up the socket for IPv4. This is the default.</p></dd></dl><p>A default set of socket <a href="gen_sctp.html#content#options">options</a> is used. In particular, the socket is opened in <a href="gen_sctp.html#content#option-binary">binary</a> and <a href="gen_sctp.html#content#option-active">passive</a> mode, with SockType <code>seqpacket</code>, and with reasonably large <a href="inet.html#option-sndbuf">kernel</a> and driver <a href="inet.html#option-buffer">buffers</a>.</p><p>If the socket is in <a href="gen_sctp.html#content#option-active">passive</a> mode data can be received through the <a href="gen_sctp.html#recv/1"><code>recv/1,2</code></a> calls.</p><p>If the socket is in <a href="gen_sctp.html#content#option-active">active</a> mode data received data is delivered to the controlling process as messages:</p><pre><code type="none">{sctp, Socket, FromIP, FromPort, {AncData, Data}}
	</code></pre><p>See <a href="gen_sctp.html#recv/1"><code>recv/1,2</code></a> for a description of the message fields.</p><div class="note"><p>This message format unfortunately differs slightly from the <a href="gen_udp.html#open/1"><code>gen_udp</code></a> message format with ancillary data, and from the <a href="gen_sctp.html#recv/1"><code>recv/1,2</code></a> return tuple format.</p></div>
  </section>
</section>
<section class="detail" id="open/1">

  <div class="detail-header">
    <a href="#open/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">open/1</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>open(Port) -> {ok, Socket} | {error, <a href="inet.html#t:posix/0">inet:posix</a>()}
        when Port :: <a href="inet.html#t:port_number/0">inet:port_number</a>(), Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>();
    (Opts) -> {ok, Socket} | {error, <a href="inet.html#t:posix/0">inet:posix</a>()}
        when
            Opts :: [Opt],
            Opt ::
                {ip, IP} |
                {ifaddr, IP} |
                <a href="inet.html#t:address_family/0">inet:address_family</a>() |
                {port, Port} |
                {type, SockType} |
                {netns, <a href="file.html#t:filename_all/0">file:filename_all</a>()} |
                {bind_to_device, binary()} |
                <a href="#t:option/0">option</a>(),
            IP :: <a href="inet.html#t:ip_address/0">inet:ip_address</a>() | any | loopback,
            Port :: <a href="inet.html#t:port_number/0">inet:port_number</a>(),
            SockType :: seqpacket | stream,
            Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="open/2">

  <div class="detail-header">
    <a href="#open/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">open/2</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>open(Port, Opts) -> {ok, Socket} | {error, <a href="inet.html#t:posix/0">inet:posix</a>()}
        when
            Opts :: [Opt],
            Opt ::
                {ip, IP} |
                {ifaddr, IP} |
                <a href="inet.html#t:address_family/0">inet:address_family</a>() |
                {port, Port} |
                {type, SockType} |
                <a href="#t:option/0">option</a>(),
            IP :: <a href="inet.html#t:ip_address/0">inet:ip_address</a>() | any | loopback,
            Port :: <a href="inet.html#t:port_number/0">inet:port_number</a>(),
            SockType :: seqpacket | stream,
            Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>().</pre>

      </div>


  </section>
</section>
<section class="detail" id="peeloff/2">

  <div class="detail-header">
    <a href="#peeloff/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">peeloff/2</h1>


      <span class="note">(since OTP R15B)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>peeloff(Socket, Assoc) -> {ok, NewSocket} | {error, Reason}
           when
               Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>(),
               Assoc :: #sctp_assoc_change{} | <a href="#t:assoc_id/0">assoc_id</a>(),
               NewSocket :: <a href="#t:sctp_socket/0">sctp_socket</a>(),
               Reason :: term().</pre>

      </div>

<p>Branches off an existing association <code>Assoc</code> in a socket <code>Socket</code> of type <code>seqpacket</code> (one-to-many style) into a new socket <code>NewSocket</code> of type <code>stream</code> (one-to-one style).</p><p>The existing association argument <code>Assoc</code> can be either a <a href="gen_sctp.html#content#record-sctp_assoc_change"><code>#sctp_assoc_change{}</code></a> record as returned from, for example, <a href="gen_sctp.html#recv/2"><code>recv/*</code></a>, <a href="gen_sctp.html#connect/5"><code>connect/*</code></a>, or from a listening socket in active mode. It can also be just the field <code>assoc_id</code> integer from such a record.</p>
  </section>
</section>
<section class="detail" id="recv/1">

  <div class="detail-header">
    <a href="#recv/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">recv/1</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>recv(Socket) -> {ok, {FromIP, FromPort, AncData, Data}} | {error, Reason}
        when
            Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>(),
            FromIP :: <a href="inet.html#t:ip_address/0">inet:ip_address</a>(),
            FromPort :: <a href="inet.html#t:port_number/0">inet:port_number</a>(),
            AncData :: [#sctp_sndrcvinfo{} | <a href="inet.html#t:ancillary_data/0">inet:ancillary_data</a>()],
            Data ::
                binary() |
                string() |
                #sctp_sndrcvinfo{} |
                #sctp_assoc_change{} |
                #sctp_paddr_change{} |
                #sctp_adaptation_event{},
            Reason ::
                <a href="inet.html#t:posix/0">inet:posix</a>() |
                #sctp_send_failed{} |
                #sctp_paddr_change{} |
                #sctp_pdapi_event{} |
                #sctp_remote_error{} |
                #sctp_shutdown_event{}.</pre>

      </div>

<p>Receives the <code>Data</code> message from any association of the socket. If the receive times out, <code>{error,timeout}</code> is returned. The default time-out is <code>infinity</code>. <code>FromIP</code> and <code>FromPort</code> indicate the address of the sender.</p><p><code>AncData</code> is a list of ancillary data items that can be received along with the main <code>Data</code>. This list can be empty, or contain a single <a href="gen_sctp.html#content#record-sctp_sndrcvinfo"><code>#sctp_sndrcvinfo{}</code></a> record if receiving of such ancillary data is enabled (see option <a href="gen_sctp.html#content#option-sctp_events"><code>sctp_events</code></a>). It is enabled by default, as such ancillary data provides an easy way of determining the association and stream over which the message is received. (An alternative way is to get the association ID from <code>FromIP</code> and <code>FromPort</code> using socket option <a href="gen_sctp.html#content#option-sctp_get_peer_addr_info"><code>sctp_get_peer_addr_info</code></a>, but this does still not produce the stream number).</p><p><code>AncData</code> may also contain <a href="inet.html#t:ancillary_data/0">ancillary data </a>from the socket <a href="gen_sctp.html#t:option/0">options</a> <a href="inet.html#option-recvtos"><code>recvtos</code></a>, <a href="inet.html#option-recvtclass"><code>recvtclass</code></a> or <a href="inet.html#option-recvttl"><code>recvttl</code></a>, if that is supported by the platform for the socket.</p><p>The <code>Data</code> received can be a <code>binary()</code> or a <code>list()</code> of bytes (integers in the range 0 through 255) depending on the socket mode, or an SCTP event.</p><a id="sctp_events"></a><p>Possible SCTP events:</p><ul><li><a href="gen_sctp.html#content#record-sctp_sndrcvinfo"><code>#sctp_sndrcvinfo{}</code></a></li><li><a href="gen_sctp.html#content#record-sctp_assoc_change"><code>#sctp_assoc_change{}</code></a></li><li><pre><code class="makeup erlang"><span class="o">#</span><span class="ss">sctp_paddr_change</span><span class="p" data-group-id="8938530682-1">{</span><span class="w">
      </span><span class="ss">addr</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="8938530682-2">{</span><span class="nf">ip_address</span><span class="p" data-group-id="8938530682-3">(</span><span class="p" data-group-id="8938530682-3">)</span><span class="p">,</span><span class="nf">port</span><span class="p" data-group-id="8938530682-4">(</span><span class="p" data-group-id="8938530682-4">)</span><span class="p" data-group-id="8938530682-2">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">state</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nf">atom</span><span class="p" data-group-id="8938530682-5">(</span><span class="p" data-group-id="8938530682-5">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">error</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="8938530682-6">(</span><span class="p" data-group-id="8938530682-6">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">assoc_id</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nf">assoc_id</span><span class="p" data-group-id="8938530682-7">(</span><span class="p" data-group-id="8938530682-7">)</span><span class="w">
</span><span class="p" data-group-id="8938530682-1">}</span></code></pre><p>Indicates change of the status of the IP address of the peer specified by <code>addr</code> within association <code>assoc_id</code>. Possible values of <code>state</code> (mostly self-explanatory) include:</p><dl><dt><code>addr_unreachable</code></dt><dd></dd><dt><code>addr_available</code></dt><dd></dd><dt><code>addr_removed</code></dt><dd></dd><dt><code>addr_added</code></dt><dd></dd><dt><code>addr_made_prim</code></dt><dd></dd><dt><code>addr_confirmed</code></dt><dd></dd></dl><p>In case of an error (for example, <code>addr_unreachable</code>), field <code>error</code> provides more diagnostics. In such cases, event <code>#sctp_paddr_change{}</code> is automatically converted into an <code>error</code> term returned by <a href="gen_sctp.html#recv/1"><code>recv</code></a>. The <code>error</code> field value can be converted into a string using <a href="gen_sctp.html#error_string/1"><code>error_string/1</code></a>.</p></li><li><pre><code class="makeup erlang"><span class="o">#</span><span class="ss">sctp_send_failed</span><span class="p" data-group-id="0410339659-1">{</span><span class="w">
      </span><span class="ss">flags</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="ss">true</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="ss">false</span><span class="p">,</span><span class="w">
      </span><span class="ss">error</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="0410339659-2">(</span><span class="p" data-group-id="0410339659-2">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">info</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">sctp_sndrcvinfo</span><span class="p" data-group-id="0410339659-3">{</span><span class="p" data-group-id="0410339659-3">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">assoc_id</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nf">assoc_id</span><span class="p" data-group-id="0410339659-4">(</span><span class="p" data-group-id="0410339659-4">)</span><span class="w">
      </span><span class="ss">data</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nf">binary</span><span class="p" data-group-id="0410339659-5">(</span><span class="p" data-group-id="0410339659-5">)</span><span class="w">
</span><span class="p" data-group-id="0410339659-1">}</span></code></pre><p>The sender can receive this event if a send operation fails.</p><dl><dt><code>flags</code></dt><dd><p>A Boolean specifying if the data has been transmitted over the wire.</p></dd><dt><code>error</code></dt><dd><p>Provides extended diagnostics, use <a href="gen_sctp.html#error_string/1"><code>error_string/1</code>.</a></p></dd><dt><code>info</code></dt><dd><p>The original <a href="gen_sctp.html#content#record-sctp_sndrcvinfo"><code>#sctp_sndrcvinfo{}</code></a> record used in the failed <a href="gen_sctp.html#send/3"><code>send/*</code>.</a></p></dd><dt><code>data</code></dt><dd><p>The whole original data chunk attempted to be sent.</p></dd></dl><p>In the current implementation of the Erlang/SCTP binding, this event is internally converted into an <code>error</code> term returned by <a href="gen_sctp.html#recv/1"><code>recv/*</code></a>.</p></li><li><pre><code class="makeup erlang"><span class="o">#</span><span class="ss">sctp_adaptation_event</span><span class="p" data-group-id="9922998667-1">{</span><span class="w">
      </span><span class="ss">adaptation_ind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">integer</span><span class="p" data-group-id="9922998667-2">(</span><span class="p" data-group-id="9922998667-2">)</span><span class="p">,</span><span class="w">
      </span><span class="ss">assoc_id</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nf">assoc_id</span><span class="p" data-group-id="9922998667-3">(</span><span class="p" data-group-id="9922998667-3">)</span><span class="w">
</span><span class="p" data-group-id="9922998667-1">}</span></code></pre><p>Delivered when a peer sends an adaptation layer indication parameter (configured through option <a href="gen_sctp.html#content#option-sctp_adaptation_layer"><code>sctp_adaptation_layer</code></a>). Notice that with the current implementation of the Erlang/SCTP binding, this event is disabled by default.</p></li><li><pre><code class="makeup erlang"><span class="o">#</span><span class="ss">sctp_pdapi_event</span><span class="p" data-group-id="4310279308-1">{</span><span class="w">
      </span><span class="ss">indication</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">sctp_partial_delivery_aborted</span><span class="p">,</span><span class="w">
      </span><span class="ss">assoc_id</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nf">assoc_id</span><span class="p" data-group-id="4310279308-2">(</span><span class="p" data-group-id="4310279308-2">)</span><span class="w">
</span><span class="p" data-group-id="4310279308-1">}</span></code></pre><p>A partial delivery failure. In the current implementation of the Erlang/SCTP binding, this event is internally converted into an <code>error</code> term returned by <a href="gen_sctp.html#recv/1"><code>recv/*</code></a>.</p></li></ul>
  </section>
</section>
<section class="detail" id="recv/2">

  <div class="detail-header">
    <a href="#recv/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">recv/2</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>recv(Socket, Timeout) -> {ok, {FromIP, FromPort, AncData, Data}} | {error, Reason}
        when
            Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>(),
            Timeout :: timeout(),
            FromIP :: <a href="inet.html#t:ip_address/0">inet:ip_address</a>(),
            FromPort :: <a href="inet.html#t:port_number/0">inet:port_number</a>(),
            AncData :: [#sctp_sndrcvinfo{} | <a href="inet.html#t:ancillary_data/0">inet:ancillary_data</a>()],
            Data ::
                binary() |
                string() |
                #sctp_sndrcvinfo{} |
                #sctp_assoc_change{} |
                #sctp_paddr_change{} |
                #sctp_adaptation_event{},
            Reason ::
                <a href="inet.html#t:posix/0">inet:posix</a>() |
                #sctp_send_failed{} |
                #sctp_paddr_change{} |
                #sctp_pdapi_event{} |
                #sctp_remote_error{} |
                #sctp_shutdown_event{}.</pre>

      </div>


  </section>
</section>
<section class="detail" id="send/3">

  <div class="detail-header">
    <a href="#send/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">send/3</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>send(Socket, SndRcvInfo, Data) -> ok | {error, Reason}
        when
            Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>(),
            SndRcvInfo :: #sctp_sndrcvinfo{},
            Data :: binary() | iolist(),
            Reason :: term().</pre>

      </div>

<p>Sends the <code>Data</code> message with all sending parameters from a <a href="gen_sctp.html#content#record-sctp_sndrcvinfo"><code>#sctp_sndrcvinfo{}</code></a> record. This way, the user can specify the PPID (passed to the remote end) and context (passed to the local SCTP layer), which can be used, for example, for error identification. However, such a fine level of user control is rarely required. The function <code>send/4</code> is sufficient for most applications.</p>
  </section>
</section>
<section class="detail" id="send/4">

  <div class="detail-header">
    <a href="#send/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">send/4</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>send(Socket, Assoc, Stream, Data) -> ok | {error, Reason}
        when
            Socket :: <a href="#t:sctp_socket/0">sctp_socket</a>(),
            Assoc :: #sctp_assoc_change{} | <a href="#t:assoc_id/0">assoc_id</a>(),
            Stream :: integer(),
            Data :: binary() | iolist(),
            Reason :: term().</pre>

      </div>

<p>Sends a <code>Data</code> message over an existing association and specified stream.</p>
  </section>
</section>

          </div>
        </section>

      <footer class="footer">

        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener">ExDoc</a> (v0.25.1) for the
            <a href="https://elixir-lang.org" title="Elixir" target="_blank">Elixir programming language</a>.
          </span>
          <span class="line">
            Designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" rel="noopener" title="@dignifiedquire">Friedel Ziegelmayer</a>.
          </span>
        </p>
        <p>

            <a href="api-reference.html" title="API reference" class="line footer-button">API Reference</a>

          <button class="line footer-button display-shortcuts-help">
            Display keyboard shortcuts
          </button>
          <button class="line footer-button night-mode-toggle">
            Toggle night mode
          </button>
          <button class="line footer-button display-quick-switch">
            Go to a HexDocs package
          </button>
          <button class="line footer-button tooltips-toggle">
            <span class="tooltips-option-disable">Disable tooltips</span>
            <span class="tooltips-option-enable">Enable tooltips</span>
          </button>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
