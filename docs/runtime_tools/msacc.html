<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.25.1">
    <meta name="project" content="runtime_tools v1.16.2">

    <title>msacc â€” runtime_tools v1.16.2</title>
    <link rel="stylesheet" href="dist/erlang-951161c89561e05735a5.css" />

    <script src="dist/sidebar_items-d9a6d1375e.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-f97730d45ef67f3e6188.js"></script>


  </head>
  <body data-type="modules">
    <script>

      try {
        if (localStorage.getItem('night-mode') === 'true') {
          document.body.classList.add('night-mode');
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle">
  <span class="icon-menu" title="Collapse/expand sidebar"></span>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <span class="icon-search" aria-hidden="true" title="Submit search"></span>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <span class="icon-cross" aria-hidden="true" title="Cancel search"></span>
    </button>
    <label class="search-label">
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">
    <div class="sidebar-projectDetails">
      <a href="api-reference.html" class="sidebar-projectName">
runtime_tools
      </a>
      <strong class="sidebar-projectVersion">
        v1.16.2
      </strong>
    </div>

  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list-link" href="#full-list">Pages</a></li>

      <li><a id="modules-list-link" href="#full-list">Modules</a></li>


  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

      <h1>
msacc <small class="app-vsn">(runtime_tools v1.16.2)</small>

      </h1>


        <section id="moduledoc">
<p>This module implements some convenience functions for analyzing microstate accounting data. For details about how to use the basic api and what the different states represent see <a href="https://wojtekmach.pl/otp_docs/erts/erlang.html#statistics_microstate_accounting"><code>erlang:statistics(microstate_accounting)</code></a>.</p><a id="msacc_print_example"></a><p><em>Basic Scenario</em></p><pre><code class="makeup erlang"><span class="mi">1</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">msacc</span><span class="p">:</span><span class="nf">start</span><span class="p" data-group-id="9223001600-1">(</span><span class="mi">1000</span><span class="p" data-group-id="9223001600-1">)</span><span class="p">.</span><span class="w">
</span><span class="ss">ok</span><span class="w">
</span><span class="mi">2</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">msacc</span><span class="p">:</span><span class="nf">print</span><span class="p" data-group-id="9223001600-2">(</span><span class="p" data-group-id="9223001600-2">)</span><span class="p">.</span><span class="w">
</span><span class="n">Average</span><span class="w"> </span><span class="ss">thread</span><span class="w"> </span><span class="ss">real</span><span class="o">-</span><span class="ss">time</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class="mi">1000513</span><span class="w"> </span><span class="ss">us</span><span class="w">
</span><span class="n">Accumulated</span><span class="w"> </span><span class="ss">system</span><span class="w"> </span><span class="ss">run</span><span class="o">-</span><span class="ss">time</span><span class="w"> </span><span class="p">:</span><span class="w">    </span><span class="mi">2213</span><span class="w"> </span><span class="ss">us</span><span class="w">
</span><span class="n">Average</span><span class="w"> </span><span class="ss">scheduler</span><span class="w"> </span><span class="ss">run</span><span class="o">-</span><span class="ss">time</span><span class="w">  </span><span class="p">:</span><span class="w">    </span><span class="mi">1076</span><span class="w"> </span><span class="ss">us</span><span class="w">

        </span><span class="n">Thread</span><span class="w">      </span><span class="ss">aux</span><span class="w"> </span><span class="ss">check_io</span><span class="w"> </span><span class="ss">emulator</span><span class="w">       </span><span class="ss">gc</span><span class="w">    </span><span class="ss">other</span><span class="w">     </span><span class="ss">port</span><span class="w">    </span><span class="ss">sleep</span><span class="w">

</span><span class="n">Stats</span><span class="w"> </span><span class="ss">per</span><span class="w"> </span><span class="nc">thread</span><span class="p">:</span><span class="w">
     </span><span class="nf">async</span><span class="p" data-group-id="9223001600-3">(</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="9223001600-3">)</span><span class="w">    </span><span class="mf">0.00</span><span class="c1">%    0.00%    0.00%    0.00%    0.00%    0.00%  100.00%</span><span class="w">
     </span><span class="nf">async</span><span class="p" data-group-id="9223001600-4">(</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="9223001600-4">)</span><span class="w">    </span><span class="mf">0.00</span><span class="c1">%    0.00%    0.00%    0.00%    0.00%    0.00%  100.00%</span><span class="w">
       </span><span class="nf">aux</span><span class="p" data-group-id="9223001600-5">(</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="9223001600-5">)</span><span class="w">    </span><span class="mf">0.00</span><span class="c1">%    0.00%    0.00%    0.00%    0.00%    0.00%   99.99%</span><span class="w">
 </span><span class="nf">scheduler</span><span class="p" data-group-id="9223001600-6">(</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="9223001600-6">)</span><span class="w">    </span><span class="mf">0.00</span><span class="c1">%    0.03%    0.13%    0.00%    0.01%    0.00%   99.82%</span><span class="w">
 </span><span class="nf">scheduler</span><span class="p" data-group-id="9223001600-7">(</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="9223001600-7">)</span><span class="w">    </span><span class="mf">0.00</span><span class="c1">%    0.00%    0.00%    0.00%    0.03%    0.00%   99.97%</span><span class="w">

</span><span class="n">Stats</span><span class="w"> </span><span class="ss">per</span><span class="w"> </span><span class="nc">type</span><span class="p">:</span><span class="w">
         </span><span class="ss">async</span><span class="w">    </span><span class="mf">0.00</span><span class="c1">%    0.00%    0.00%    0.00%    0.00%    0.00%  100.00%</span><span class="w">
           </span><span class="ss">aux</span><span class="w">    </span><span class="mf">0.00</span><span class="c1">%    0.00%    0.00%    0.00%    0.00%    0.00%   99.99%</span><span class="w">
     </span><span class="ss">scheduler</span><span class="w">    </span><span class="mf">0.00</span><span class="c1">%    0.02%    0.06%    0.00%    0.02%    0.00%   99.89%</span><span class="w">
</span><span class="ss">ok</span></code></pre><p>This first command enables microstate accounting for 1000 milliseconds. See <a href="msacc.html#start/0"><code>start/0</code></a>, <a href="msacc.html#stop/0"><code>stop/0</code></a>, <a href="msacc.html#reset/0"><code>reset/0</code></a> and <a href="msacc.html#start/1"><code>start/1</code></a> for more details. The second command prints the statistics gathered during that time. First three general statistics are printed.</p><dl><dt>Average real-time</dt><dd>The average time spent collecting data in the threads. This should be close to the time which data was collected.</dd><dt>System run-time</dt><dd>The total run-time of all threads in the system. This is what you get if you call <code>msacc:stats(total_runtime,Stats).</code></dd><dt>Average scheduler run-time</dt><dd>The average run-time for the schedulers. This is the average amount of time the schedulers did not sleep.</dd></dl><p>Then one column per state is printed with a the percentage of time this thread spent in the state out of it's own real-time. After the thread specific time, the accumulated time for each type of thread is printed in a similar format.</p><p>Since we have the average real-time and the percentage spent in each state we can easily calculate the time spent in each state by multiplying <code>Average thread real-time</code> with <code>Thread state %</code>, i.e. to get the time Scheduler 1 spent in the emulator state we do <code>1000513us * 0.13% = 1300us</code>.</p>
        </section>


        <section id="summary" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#summary">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Summary
          </h1>

  <div class="summary-types summary">
    <h2>
      <a href="#types">Types</a>
    </h2>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:msacc_data/0">-type msacc_data() :: term().</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:msacc_data_counters/0">-type msacc_data_counters() :: term().</a>

  </div>

    <div class="summary-synopsis"><p>A map containing the different microstate accounting states and the number of microseconds spent in it.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:msacc_data_thread/0">-type msacc_data_thread() :: term().</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:msacc_id/0">-type msacc_id() :: term().</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:msacc_print_options/0">-type msacc_print_options() :: term().</a>

  </div>

    <div class="summary-synopsis"><p>The different options that can be given to <a href="msacc.html#print/2"><code>print/2</code></a>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:msacc_state/0">-type msacc_state() :: term().</a>

  </div>

    <div class="summary-synopsis"><p>The different states that a thread can be in. See <a href="https://wojtekmach.pl/otp_docs/erts/erlang.html#statistics_microstate_accounting">erlang:statistics(microstate_accounting)</a> for details.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:msacc_stats/0">-type msacc_stats() :: term().</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:msacc_stats_counters/0">-type msacc_stats_counters() :: term().</a>

  </div>

    <div class="summary-synopsis"><p>A map containing the different microstate accounting states. Each value in the map contains another map with the percentage of time that this thread has spent in the specific state. Both the percentage of <code>system</code> time and the time for that specific <code>thread</code> is part of the map.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:msacc_stats_thread/0">-type msacc_stats_thread() :: term().</a>

  </div>

    <div class="summary-synopsis"><p>A map containing information about a specific thread. The percentages in the map can be either run-time or real-time depending on if <code>runtime</code> or <code>realtime</code> was requested from <a href="msacc.html#stats/2">stats/2</a>. <code>system</code> is the percentage of total system time for this specific thread.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:msacc_type/0">-type msacc_type() :: term().</a>

  </div>

</div>

  </div>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#available/0">available/0</a>

  </div>

    <div class="summary-synopsis"><p>This function checks whether microstate accounting is available or not.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#from_file/1">from_file/1</a>

  </div>

    <div class="summary-synopsis"><p>Read a file dump produced by <a href="msacc.html#to_file/1">to_file(Filename)</a>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#print/0">print/0</a>

  </div>

    <div class="summary-synopsis"><p>Prints the current microstate accounting to standard out. Same as <a href="msacc.html#print/1"><code>msacc:print(msacc:stats(),#{}).</code></a></p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#print/1">print/1</a>

  </div>

    <div class="summary-synopsis"><p>Print the given microstate statistics values to stdout. Same as <a href="msacc.html#print/1"><code>msacc:print(DataOrStats,#{}).</code></a></p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#print/2">print/2</a>

  </div>

    <div class="summary-synopsis"><p>Print the given microstate statistics values to standard out. With many states this can be quite verbose. See the top of this reference manual for a brief description of what the fields mean.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#print/3">print/3</a>

  </div>

    <div class="summary-synopsis"><p>Print the given microstate statistics values to the given file or device. The other arguments behave the same way as for <a href="msacc.html#print/2"><code>print/2</code></a>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#reset/0">reset/0</a>

  </div>

    <div class="summary-synopsis"><p>Reset microstate accounting counters. Returns whether is was enabled or disabled.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#start/0">start/0</a>

  </div>

    <div class="summary-synopsis"><p>Start microstate accounting. Returns whether it was previously enabled or disabled.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#start/1">start/1</a>

  </div>

    <div class="summary-synopsis"><p>Resets all counters and then starts microstate accounting for the given milliseconds.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#stats/0">stats/0</a>

  </div>

    <div class="summary-synopsis"><p>Returns a runtime system independent version of the microstate statistics data presented by <a href="https://wojtekmach.pl/otp_docs/erts/erlang.html#statistics_microstate_accounting"><code>erlang:statistics(microstate_accounting)</code></a>. All counters have been normalized to be in microsecond resolution.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#stats/2">stats/2</a>

  </div>

    <div class="summary-synopsis"><p>Returns the system time for the given microstate statistics values. System time is the accumulated time of all threads.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#stats/2">stats/2</a>

  </div>

    <div class="summary-synopsis"><p>Returns fractions of real-time or run-time spent in the various threads from the given microstate statistics values.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#stats/2">stats/2</a>

  </div>

    <div class="summary-synopsis"><p>Returns a list of microstate statistics values where the values for all threads of the same type has been merged.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#stop/0">stop/0</a>

  </div>

    <div class="summary-synopsis"><p>Stop microstate accounting. Returns whether is was previously enabled or disabled.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#to_file/1">to_file/1</a>

  </div>

    <div class="summary-synopsis"><p>Dumps the current microstate statistics counters to a file that can be parsed with <a href="https://wojtekmach.pl/otp_docs/kernel/file.html#consult/1">file:consult/1</a>.</p></div>

</div>

  </div>

        </section>


        <section id="types" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#types">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
Types
          </h1>
          <div class="types-list">
<section class="detail" id="t:msacc_data/0">

  <div class="detail-header">
    <a href="#t:msacc_data/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">-type msacc_data() :: term().</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>msacc_data() :: [<a href="#t:msacc_data_thread/0">msacc_data_thread</a>()].</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:msacc_data_counters/0">

  <div class="detail-header">
    <a href="#t:msacc_data_counters/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">-type msacc_data_counters() :: term().</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>msacc_data_counters() :: #{<a href="#t:msacc_state/0">msacc_state</a>() => non_neg_integer()}.</pre>

      </div>

<p>A map containing the different microstate accounting states and the number of microseconds spent in it.</p>
  </section>
</section>
<section class="detail" id="t:msacc_data_thread/0">

  <div class="detail-header">
    <a href="#t:msacc_data_thread/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">-type msacc_data_thread() :: term().</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>msacc_data_thread() ::
    #{'$type' := msacc_data,
      type := <a href="#t:msacc_type/0">msacc_type</a>(),
      id := <a href="#t:msacc_id/0">msacc_id</a>(),
      counters := <a href="#t:msacc_data_counters/0">msacc_data_counters</a>()}.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:msacc_id/0">

  <div class="detail-header">
    <a href="#t:msacc_id/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">-type msacc_id() :: term().</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>msacc_id() :: non_neg_integer().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:msacc_print_options/0">

  <div class="detail-header">
    <a href="#t:msacc_print_options/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">-type msacc_print_options() :: term().</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>msacc_print_options() :: #{system => boolean()}.</pre>

      </div>

<p>The different options that can be given to <a href="msacc.html#print/2"><code>print/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="t:msacc_state/0">

  <div class="detail-header">
    <a href="#t:msacc_state/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">-type msacc_state() :: term().</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>msacc_state() ::
    alloc | aux | bif | busy_wait | check_io | emulator | ets | gc | gc_fullsweep | nif | other |
    port | send | sleep | timers.</pre>

      </div>

<p>The different states that a thread can be in. See <a href="https://wojtekmach.pl/otp_docs/erts/erlang.html#statistics_microstate_accounting">erlang:statistics(microstate_accounting)</a> for details.</p>
  </section>
</section>
<section class="detail" id="t:msacc_stats/0">

  <div class="detail-header">
    <a href="#t:msacc_stats/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">-type msacc_stats() :: term().</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>msacc_stats() :: [<a href="#t:msacc_stats_thread/0">msacc_stats_thread</a>()].</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:msacc_stats_counters/0">

  <div class="detail-header">
    <a href="#t:msacc_stats_counters/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">-type msacc_stats_counters() :: term().</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>msacc_stats_counters() :: #{<a href="#t:msacc_state/0">msacc_state</a>() => #{thread := float(), system := float()}}.</pre>

      </div>

<p>A map containing the different microstate accounting states. Each value in the map contains another map with the percentage of time that this thread has spent in the specific state. Both the percentage of <code>system</code> time and the time for that specific <code>thread</code> is part of the map.</p>
  </section>
</section>
<section class="detail" id="t:msacc_stats_thread/0">

  <div class="detail-header">
    <a href="#t:msacc_stats_thread/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">-type msacc_stats_thread() :: term().</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>msacc_stats_thread() ::
    #{'$type' := msacc_stats,
      type := <a href="#t:msacc_type/0">msacc_type</a>(),
      id := <a href="#t:msacc_id/0">msacc_id</a>(),
      system := float(),
      counters := <a href="#t:msacc_stats_counters/0">msacc_stats_counters</a>()}.</pre>

      </div>

<p>A map containing information about a specific thread. The percentages in the map can be either run-time or real-time depending on if <code>runtime</code> or <code>realtime</code> was requested from <a href="msacc.html#stats/2">stats/2</a>. <code>system</code> is the percentage of total system time for this specific thread.</p>
  </section>
</section>
<section class="detail" id="t:msacc_type/0">

  <div class="detail-header">
    <a href="#t:msacc_type/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">-type msacc_type() :: term().</h1>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>msacc_type() :: aux | async | dirty_cpu_scheduler | dirty_io_scheduler | poll | scheduler.</pre>

      </div>


  </section>
</section>

          </div>
        </section>

        <section id="functions" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#functions">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
Functions
          </h1>
          <div class="functions-list">
<section class="detail" id="available/0">

  <div class="detail-header">
    <a href="#available/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">available/0</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>available() -> boolean().</pre>

      </div>

<p>This function checks whether microstate accounting is available or not.</p>
  </section>
</section>
<section class="detail" id="from_file/1">

  <div class="detail-header">
    <a href="#from_file/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">from_file/1</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>from_file(Filename) -> <a href="#t:msacc_data/0">msacc_data</a>() when Filename :: <a href="https://wojtekmach.pl/otp_docs/kernel/file.html#t:name_all/0">file:name_all</a>().</pre>

      </div>

<p>Read a file dump produced by <a href="msacc.html#to_file/1">to_file(Filename)</a>.</p>
  </section>
</section>
<section class="detail" id="print/0">

  <div class="detail-header">
    <a href="#print/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">print/0</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>print() -> ok.</pre>

      </div>

<p>Prints the current microstate accounting to standard out. Same as <a href="msacc.html#print/1"><code>msacc:print(msacc:stats(),#{}).</code></a></p>
  </section>
</section>
<section class="detail" id="print/1">

  <div class="detail-header">
    <a href="#print/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">print/1</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>print(DataOrStats) -> ok when DataOrStats :: <a href="#t:msacc_data/0">msacc_data</a>() | <a href="#t:msacc_stats/0">msacc_stats</a>().</pre>

      </div>

<p>Print the given microstate statistics values to stdout. Same as <a href="msacc.html#print/1"><code>msacc:print(DataOrStats,#{}).</code></a></p>
  </section>
</section>
<section class="detail" id="print/2">

  <div class="detail-header">
    <a href="#print/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">print/2</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>print(DataOrStats, Options) -> ok
         when DataOrStats :: <a href="#t:msacc_data/0">msacc_data</a>() | <a href="#t:msacc_stats/0">msacc_stats</a>(), Options :: <a href="#t:msacc_print_options/0">msacc_print_options</a>().</pre>

      </div>

<p>Print the given microstate statistics values to standard out. With many states this can be quite verbose. See the top of this reference manual for a brief description of what the fields mean.</p><p>It is possible to print more specific types of statistics by first manipulating the <code>DataOrStats</code> using <a href="msacc.html#stats/2"><code>stats/2</code></a>. For instance if you want to print the percentage of run-time for each thread you can do:</p><pre><code class="makeup erlang"><span class="nc">msacc</span><span class="p">:</span><span class="nf">print</span><span class="p" data-group-id="4533494753-1">(</span><span class="nc">msacc</span><span class="p">:</span><span class="nf">stats</span><span class="p" data-group-id="4533494753-2">(</span><span class="ss">runtime</span><span class="p">,</span><span class="nc">msacc</span><span class="p">:</span><span class="nf">stats</span><span class="p" data-group-id="4533494753-3">(</span><span class="p" data-group-id="4533494753-3">)</span><span class="p" data-group-id="4533494753-2">)</span><span class="p" data-group-id="4533494753-1">)</span><span class="p">.</span></code></pre><p>If you want to only print run-time per thread type you can do:</p><pre><code class="makeup erlang"><span class="nc">msacc</span><span class="p">:</span><span class="nf">print</span><span class="p" data-group-id="8141214256-1">(</span><span class="nc">msacc</span><span class="p">:</span><span class="nf">stats</span><span class="p" data-group-id="8141214256-2">(</span><span class="ss">type</span><span class="p">,</span><span class="nc">msacc</span><span class="p">:</span><span class="nf">stats</span><span class="p" data-group-id="8141214256-3">(</span><span class="ss">runtime</span><span class="p">,</span><span class="nc">msacc</span><span class="p">:</span><span class="nf">stats</span><span class="p" data-group-id="8141214256-4">(</span><span class="p" data-group-id="8141214256-4">)</span><span class="p" data-group-id="8141214256-3">)</span><span class="p" data-group-id="8141214256-2">)</span><span class="p" data-group-id="8141214256-1">)</span><span class="p">.</span></code></pre><p><em>Options</em></p><dl><dt><code>system</code></dt><dd>Print percentage of time spent in each state out of system time as well as thread time. Default: false.</dd></dl>
  </section>
</section>
<section class="detail" id="print/3">

  <div class="detail-header">
    <a href="#print/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">print/3</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>print(FileOrDevice, DataOrStats, Options) -> ok
         when
             FileOrDevice :: <a href="https://wojtekmach.pl/otp_docs/kernel/file.html#t:filename/0">file:filename</a>() | <a href="https://wojtekmach.pl/otp_docs/stdlib/io.html#t:device/0">io:device</a>(),
             DataOrStats :: <a href="#t:msacc_data/0">msacc_data</a>() | <a href="#t:msacc_stats/0">msacc_stats</a>(),
             Options :: <a href="#t:msacc_print_options/0">msacc_print_options</a>().</pre>

      </div>

<p>Print the given microstate statistics values to the given file or device. The other arguments behave the same way as for <a href="msacc.html#print/2"><code>print/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="reset/0">

  <div class="detail-header">
    <a href="#reset/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">reset/0</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>reset() -> boolean().</pre>

      </div>

<p>Reset microstate accounting counters. Returns whether is was enabled or disabled.</p>
  </section>
</section>
<section class="detail" id="start/0">

  <div class="detail-header">
    <a href="#start/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">start/0</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>start() -> boolean().</pre>

      </div>

<p>Start microstate accounting. Returns whether it was previously enabled or disabled.</p>
  </section>
</section>
<section class="detail" id="start/1">

  <div class="detail-header">
    <a href="#start/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">start/1</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>start(Time) -> true when Time :: timeout().</pre>

      </div>

<p>Resets all counters and then starts microstate accounting for the given milliseconds.</p>
  </section>
</section>
<section class="detail" id="stats/0">

  <div class="detail-header">
    <a href="#stats/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">stats/0</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>stats() -> <a href="#t:msacc_data/0">msacc_data</a>().</pre>

      </div>

<p>Returns a runtime system independent version of the microstate statistics data presented by <a href="https://wojtekmach.pl/otp_docs/erts/erlang.html#statistics_microstate_accounting"><code>erlang:statistics(microstate_accounting)</code></a>. All counters have been normalized to be in microsecond resolution.</p>
  </section>
</section>
<section class="detail" id="stats/2">

  <div class="detail-header">
    <a href="#stats/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">stats/2</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>stats(Analysis, Stats) -> non_neg_integer()
         when Analysis :: system_realtime | system_runtime, Stats :: <a href="#t:msacc_data/0">msacc_data</a>();
     (Analysis, Stats) -> <a href="#t:msacc_stats/0">msacc_stats</a>() when Analysis :: realtime | runtime, Stats :: <a href="#t:msacc_data/0">msacc_data</a>();
     (Analysis, StatsOrData) -> <a href="#t:msacc_data/0">msacc_data</a>() | <a href="#t:msacc_stats/0">msacc_stats</a>()
         when Analysis :: type, StatsOrData :: <a href="#t:msacc_data/0">msacc_data</a>() | <a href="#t:msacc_stats/0">msacc_stats</a>().</pre>

      </div>

<p>Returns the system time for the given microstate statistics values. System time is the accumulated time of all threads.</p><dl><dt><code>realtime</code></dt><dd>Returns all time recorded for all threads.</dd><dt><code>runtime</code></dt><dd>Returns all time spent doing work for all threads, i.e. all time not spent in the <code>sleep</code> state.</dd></dl>
  </section>
</section>
<section class="detail" id="stats/2">

  <div class="detail-header">
    <a href="#stats/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">stats/2</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>stats(Analysis, Stats) -> non_neg_integer()
         when Analysis :: system_realtime | system_runtime, Stats :: <a href="#t:msacc_data/0">msacc_data</a>();
     (Analysis, Stats) -> <a href="#t:msacc_stats/0">msacc_stats</a>() when Analysis :: realtime | runtime, Stats :: <a href="#t:msacc_data/0">msacc_data</a>();
     (Analysis, StatsOrData) -> <a href="#t:msacc_data/0">msacc_data</a>() | <a href="#t:msacc_stats/0">msacc_stats</a>()
         when Analysis :: type, StatsOrData :: <a href="#t:msacc_data/0">msacc_data</a>() | <a href="#t:msacc_stats/0">msacc_stats</a>().</pre>

      </div>

<p>Returns fractions of real-time or run-time spent in the various threads from the given microstate statistics values.</p>
  </section>
</section>
<section class="detail" id="stats/2">

  <div class="detail-header">
    <a href="#stats/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">stats/2</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>stats(Analysis, Stats) -> non_neg_integer()
         when Analysis :: system_realtime | system_runtime, Stats :: <a href="#t:msacc_data/0">msacc_data</a>();
     (Analysis, Stats) -> <a href="#t:msacc_stats/0">msacc_stats</a>() when Analysis :: realtime | runtime, Stats :: <a href="#t:msacc_data/0">msacc_data</a>();
     (Analysis, StatsOrData) -> <a href="#t:msacc_data/0">msacc_data</a>() | <a href="#t:msacc_stats/0">msacc_stats</a>()
         when Analysis :: type, StatsOrData :: <a href="#t:msacc_data/0">msacc_data</a>() | <a href="#t:msacc_stats/0">msacc_stats</a>().</pre>

      </div>

<p>Returns a list of microstate statistics values where the values for all threads of the same type has been merged.</p>
  </section>
</section>
<section class="detail" id="stop/0">

  <div class="detail-header">
    <a href="#stop/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">stop/0</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>stop() -> boolean().</pre>

      </div>

<p>Stop microstate accounting. Returns whether is was previously enabled or disabled.</p>
  </section>
</section>
<section class="detail" id="to_file/1">

  <div class="detail-header">
    <a href="#to_file/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">to_file/1</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>to_file(Filename) -> ok | {error, <a href="https://wojtekmach.pl/otp_docs/kernel/file.html#t:posix/0">file:posix</a>()} when Filename :: <a href="https://wojtekmach.pl/otp_docs/kernel/file.html#t:name_all/0">file:name_all</a>().</pre>

      </div>

<p>Dumps the current microstate statistics counters to a file that can be parsed with <a href="https://wojtekmach.pl/otp_docs/kernel/file.html#consult/1">file:consult/1</a>.</p>
  </section>
</section>

          </div>
        </section>

      <footer class="footer">

        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener">ExDoc</a> (v0.25.1) for the
            <a href="https://elixir-lang.org" title="Elixir" target="_blank">Elixir programming language</a>.
          </span>
          <span class="line">
            Designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" rel="noopener" title="@dignifiedquire">Friedel Ziegelmayer</a>.
          </span>
        </p>
        <p>

            <a href="api-reference.html" title="API reference" class="line footer-button">API Reference</a>

          <button class="line footer-button display-shortcuts-help">
            Display keyboard shortcuts
          </button>
          <button class="line footer-button night-mode-toggle">
            Toggle night mode
          </button>
          <button class="line footer-button display-quick-switch">
            Go to a HexDocs package
          </button>
          <button class="line footer-button tooltips-toggle">
            <span class="tooltips-option-disable">Disable tooltips</span>
            <span class="tooltips-option-enable">Enable tooltips</span>
          </button>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
