<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.25.1">
    <meta name="project" content="runtime_tools v1.16.2">

    <title>dbg â€” runtime_tools v1.16.2</title>
    <link rel="stylesheet" href="dist/erlang-951161c89561e05735a5.css" />

    <script src="dist/sidebar_items-d9a6d1375e.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-f97730d45ef67f3e6188.js"></script>


  </head>
  <body data-type="modules">
    <script>

      try {
        if (localStorage.getItem('night-mode') === 'true') {
          document.body.classList.add('night-mode');
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle">
  <span class="icon-menu" title="Collapse/expand sidebar"></span>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <span class="icon-search" aria-hidden="true" title="Submit search"></span>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <span class="icon-cross" aria-hidden="true" title="Cancel search"></span>
    </button>
    <label class="search-label">
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">
    <div class="sidebar-projectDetails">
      <a href="api-reference.html" class="sidebar-projectName">
runtime_tools
      </a>
      <strong class="sidebar-projectVersion">
        v1.16.2
      </strong>
    </div>

  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list-link" href="#full-list">Pages</a></li>

      <li><a id="modules-list-link" href="#full-list">Modules</a></li>


  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

      <h1>
dbg <small class="app-vsn">(runtime_tools v1.16.2)</small>

      </h1>


        <section id="moduledoc">
<p>This module implements a text based interface to the <a href="https://wojtekmach.pl/otp_docs/erts/erlang.html#trace/3"><code>trace/3</code></a> and the <a href="https://wojtekmach.pl/otp_docs/erts/erlang.html#trace_pattern/2"><code>trace_pattern/2</code></a> BIFs. It makes it possible to trace functions, processes, ports and messages.</p><p>To quickly get started on tracing function calls you can use the following code in the Erlang shell:</p><pre><code class="makeup erlang"><span class="mi">1</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">tracer</span><span class="p" data-group-id="2064677268-1">(</span><span class="p" data-group-id="2064677268-1">)</span><span class="p">.</span><span class="w"> </span><span class="c1">%% Start the default trace message receiver</span><span class="w">
</span><span class="p" data-group-id="2064677268-2">{</span><span class="ss">ok</span><span class="p">,</span><span class="o">&lt;</span><span class="mf">0.36</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="2064677268-2">}</span><span class="w">
</span><span class="mi">2</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">p</span><span class="p" data-group-id="2064677268-3">(</span><span class="ss">all</span><span class="p">,</span><span class="w"> </span><span class="ss">c</span><span class="p" data-group-id="2064677268-3">)</span><span class="p">.</span><span class="w"> </span><span class="c1">%% Setup call (c) tracing on all processes</span><span class="w">
</span><span class="p" data-group-id="2064677268-4">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="2064677268-5">[</span><span class="p" data-group-id="2064677268-6">{</span><span class="ss">matched</span><span class="p">,</span><span class="ss">nonode</span><span class="p">@</span><span class="ss">nohost</span><span class="p">,</span><span class="mi">26</span><span class="p" data-group-id="2064677268-6">}</span><span class="p" data-group-id="2064677268-5">]</span><span class="p" data-group-id="2064677268-4">}</span><span class="w">
</span><span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">tp</span><span class="p" data-group-id="2064677268-7">(</span><span class="ss">lists</span><span class="p">,</span><span class="w"> </span><span class="ss">seq</span><span class="p">,</span><span class="w"> </span><span class="ss">x</span><span class="p" data-group-id="2064677268-7">)</span><span class="p">.</span><span class="w"> </span><span class="c1">%% Setup an exception return trace (x) on lists:seq</span><span class="w">
</span><span class="p" data-group-id="2064677268-8">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="2064677268-9">[</span><span class="p" data-group-id="2064677268-10">{</span><span class="ss">matched</span><span class="p">,</span><span class="ss">nonode</span><span class="p">@</span><span class="ss">nohost</span><span class="p">,</span><span class="mi">2</span><span class="p" data-group-id="2064677268-10">}</span><span class="p">,</span><span class="p" data-group-id="2064677268-11">{</span><span class="ss">saved</span><span class="p">,</span><span class="ss">x</span><span class="p" data-group-id="2064677268-11">}</span><span class="p" data-group-id="2064677268-9">]</span><span class="p" data-group-id="2064677268-8">}</span><span class="w">
</span><span class="mi">4</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">lists</span><span class="p">:</span><span class="nf">seq</span><span class="p" data-group-id="2064677268-12">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p" data-group-id="2064677268-12">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="2064677268-13">(</span><span class="o">&lt;</span><span class="mf">0.34</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="2064677268-13">)</span><span class="w"> </span><span class="ss">call</span><span class="w"> </span><span class="nc">lists</span><span class="p">:</span><span class="nf">seq</span><span class="p" data-group-id="2064677268-14">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p" data-group-id="2064677268-14">)</span><span class="w">
</span><span class="p" data-group-id="2064677268-15">(</span><span class="o">&lt;</span><span class="mf">0.34</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="2064677268-15">)</span><span class="w"> </span><span class="ss">returned</span><span class="w"> </span><span class="ss">from</span><span class="w"> </span><span class="nc">lists</span><span class="p">:</span><span class="ss">seq</span><span class="o">/</span><span class="mi">2</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="p" data-group-id="2064677268-16">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p" data-group-id="2064677268-16">]</span><span class="w">
</span><span class="p" data-group-id="2064677268-17">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p" data-group-id="2064677268-17">]</span><span class="w">
    </span></code></pre><p>For more examples of how to use <code>dbg</code> from the Erlang shell, see the <a href="dbg.html#content#simple_example">simple example</a> section.</p><p>The utilities are also suitable to use in system testing on large systems, where other tools have too much impact on the system performance. Some primitive support for sequential tracing is also included, see the <a href="dbg.html#content#advanced">advanced topics</a> section.</p><a id="simple_example"></a><h2 id="module-simple-examples-tracing-from-the-shell" class="section-heading">
  <a href="#module-simple-examples-tracing-from-the-shell" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Simple examples - tracing from the shell
</h2>
<p>The simplest way of tracing from the Erlang shell is to use <code>dbg:c/3</code> or <code>dbg:c/4</code>, e.g. tracing the function <code>dbg:get_tracer/0</code>:</p><pre><code class="makeup erlang"><span class="p" data-group-id="7455152114-1">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="7455152114-1">)</span><span class="mi">84</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">c</span><span class="p" data-group-id="7455152114-2">(</span><span class="ss">dbg</span><span class="p">,</span><span class="ss">get_tracer</span><span class="p">,</span><span class="p" data-group-id="7455152114-3">[</span><span class="p" data-group-id="7455152114-3">]</span><span class="p" data-group-id="7455152114-2">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7455152114-4">(</span><span class="o">&lt;</span><span class="mf">0.154</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="7455152114-4">)</span><span class="w"> </span><span class="o">&lt;</span><span class="mf">0.152</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p" data-group-id="7455152114-5">{</span><span class="o">&lt;</span><span class="mf">0.154</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">,</span><span class="p" data-group-id="7455152114-6">{</span><span class="ss">get_tracer</span><span class="p">,</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="7455152114-6">}</span><span class="p" data-group-id="7455152114-5">}</span><span class="w">
</span><span class="p" data-group-id="7455152114-7">(</span><span class="o">&lt;</span><span class="mf">0.154</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="7455152114-7">)</span><span class="w"> </span><span class="ss">out</span><span class="w"> </span><span class="p" data-group-id="7455152114-8">{</span><span class="ss">dbg</span><span class="p">,</span><span class="ss">req</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="7455152114-8">}</span><span class="w">
</span><span class="p" data-group-id="7455152114-9">(</span><span class="o">&lt;</span><span class="mf">0.154</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="7455152114-9">)</span><span class="w"> </span><span class="p">&lt;&lt;</span><span class="w"> </span><span class="p" data-group-id="7455152114-10">{</span><span class="ss">dbg</span><span class="p">,</span><span class="p" data-group-id="7455152114-11">{</span><span class="ss">ok</span><span class="p">,</span><span class="o">&lt;</span><span class="mf">0.153</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="7455152114-11">}</span><span class="p" data-group-id="7455152114-10">}</span><span class="w">
</span><span class="p" data-group-id="7455152114-12">(</span><span class="o">&lt;</span><span class="mf">0.154</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="7455152114-12">)</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="p" data-group-id="7455152114-13">{</span><span class="ss">dbg</span><span class="p">,</span><span class="ss">req</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="7455152114-13">}</span><span class="w">
</span><span class="p" data-group-id="7455152114-14">(</span><span class="o">&lt;</span><span class="mf">0.154</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="7455152114-14">)</span><span class="w"> </span><span class="p">&lt;&lt;</span><span class="w"> </span><span class="ss">timeout</span><span class="w">
</span><span class="p" data-group-id="7455152114-15">{</span><span class="ss">ok</span><span class="p">,</span><span class="o">&lt;</span><span class="mf">0.153</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="7455152114-15">}</span><span class="w">
</span><span class="p" data-group-id="7455152114-16">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="7455152114-16">)</span><span class="mi">85</span><span class="o">&gt;</span></code></pre><p>Another way of tracing from the shell is to explicitly start a <em>tracer</em> and then set the <em>trace flags</em> of your choice on the processes you want to trace, e.g. trace messages and process events:</p><pre><code class="makeup erlang"><span class="p" data-group-id="2076995415-1">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="2076995415-1">)</span><span class="mi">66</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Pid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">spawn</span><span class="p" data-group-id="2076995415-2">(</span><span class="nf">fun</span><span class="p" data-group-id="2076995415-3">(</span><span class="p" data-group-id="2076995415-3">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="k">receive</span><span class="w"> </span><span class="p" data-group-id="2076995415-4">{</span><span class="n">From</span><span class="p">,</span><span class="n">Msg</span><span class="p" data-group-id="2076995415-4">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">From</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">Msg</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="k">end</span><span class="p" data-group-id="2076995415-2">)</span><span class="p">.</span><span class="w">
</span><span class="o">&lt;</span><span class="mf">0.126</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="w">
</span><span class="p" data-group-id="2076995415-5">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="2076995415-5">)</span><span class="mi">67</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">tracer</span><span class="p" data-group-id="2076995415-6">(</span><span class="p" data-group-id="2076995415-6">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="2076995415-7">{</span><span class="ss">ok</span><span class="p">,</span><span class="o">&lt;</span><span class="mf">0.128</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="2076995415-7">}</span><span class="w">
</span><span class="p" data-group-id="2076995415-8">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="2076995415-8">)</span><span class="mi">68</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">p</span><span class="p" data-group-id="2076995415-9">(</span><span class="n">Pid</span><span class="p">,</span><span class="p" data-group-id="2076995415-10">[</span><span class="ss">m</span><span class="p">,</span><span class="ss">procs</span><span class="p" data-group-id="2076995415-10">]</span><span class="p" data-group-id="2076995415-9">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="2076995415-11">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="2076995415-12">[</span><span class="p" data-group-id="2076995415-13">{</span><span class="ss">matched</span><span class="p">,</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="2076995415-13">}</span><span class="p" data-group-id="2076995415-12">]</span><span class="p" data-group-id="2076995415-11">}</span><span class="w">
</span><span class="p" data-group-id="2076995415-14">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="2076995415-14">)</span><span class="mi">69</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Pid</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p" data-group-id="2076995415-15">{</span><span class="nf">self</span><span class="p" data-group-id="2076995415-16">(</span><span class="p" data-group-id="2076995415-16">)</span><span class="p">,</span><span class="ss">hello</span><span class="p" data-group-id="2076995415-15">}</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="2076995415-17">(</span><span class="o">&lt;</span><span class="mf">0.126</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="2076995415-17">)</span><span class="w"> </span><span class="p">&lt;&lt;</span><span class="w"> </span><span class="p" data-group-id="2076995415-18">{</span><span class="o">&lt;</span><span class="mf">0.116</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">,</span><span class="ss">hello</span><span class="p" data-group-id="2076995415-18">}</span><span class="w">
</span><span class="p" data-group-id="2076995415-19">{</span><span class="o">&lt;</span><span class="mf">0.116</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">,</span><span class="ss">hello</span><span class="p" data-group-id="2076995415-19">}</span><span class="w">
</span><span class="p" data-group-id="2076995415-20">(</span><span class="o">&lt;</span><span class="mf">0.126</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="2076995415-20">)</span><span class="w"> </span><span class="p">&lt;&lt;</span><span class="w"> </span><span class="nf">timeout</span><span class="w">
</span><span class="p" data-group-id="2076995415-21">(</span><span class="o">&lt;</span><span class="mf">0.126</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="2076995415-21">)</span><span class="w"> </span><span class="o">&lt;</span><span class="mf">0.116</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nf">hello</span><span class="w">
</span><span class="p" data-group-id="2076995415-22">(</span><span class="o">&lt;</span><span class="mf">0.126</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="2076995415-22">)</span><span class="w"> </span><span class="nb">exit</span><span class="w"> </span><span class="nf">normal</span><span class="w">
</span><span class="p" data-group-id="2076995415-23">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="2076995415-23">)</span><span class="mi">70</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">flush</span><span class="p" data-group-id="2076995415-24">(</span><span class="p" data-group-id="2076995415-24">)</span><span class="p">.</span><span class="w">
</span><span class="n">Shell</span><span class="w"> </span><span class="ss">got</span><span class="w"> </span><span class="ss">hello</span><span class="w">
</span><span class="nf">ok</span><span class="w">
</span><span class="p" data-group-id="2076995415-25">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="2076995415-25">)</span><span class="mi">71</span><span class="o">&gt;</span></code></pre><p>If you set the <code>call</code> trace flag, you also have to set a <em>trace pattern</em> for the functions you want to trace:</p><pre><code class="makeup erlang"><span class="p" data-group-id="3121083413-1">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="3121083413-1">)</span><span class="mi">77</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">tracer</span><span class="p" data-group-id="3121083413-2">(</span><span class="p" data-group-id="3121083413-2">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3121083413-3">{</span><span class="ss">ok</span><span class="p">,</span><span class="o">&lt;</span><span class="mf">0.142</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="3121083413-3">}</span><span class="w">
</span><span class="p" data-group-id="3121083413-4">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="3121083413-4">)</span><span class="mi">78</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">p</span><span class="p" data-group-id="3121083413-5">(</span><span class="ss">all</span><span class="p">,</span><span class="ss">call</span><span class="p" data-group-id="3121083413-5">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3121083413-6">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="3121083413-7">[</span><span class="p" data-group-id="3121083413-8">{</span><span class="ss">matched</span><span class="p">,</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p">,</span><span class="mi">3</span><span class="p" data-group-id="3121083413-8">}</span><span class="p" data-group-id="3121083413-7">]</span><span class="p" data-group-id="3121083413-6">}</span><span class="w">
</span><span class="p" data-group-id="3121083413-9">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="3121083413-9">)</span><span class="mi">79</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">tp</span><span class="p" data-group-id="3121083413-10">(</span><span class="ss">dbg</span><span class="p">,</span><span class="ss">get_tracer</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="p" data-group-id="3121083413-11">[</span><span class="p" data-group-id="3121083413-11">]</span><span class="p" data-group-id="3121083413-10">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3121083413-12">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="3121083413-13">[</span><span class="p" data-group-id="3121083413-14">{</span><span class="ss">matched</span><span class="p">,</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="3121083413-14">}</span><span class="p" data-group-id="3121083413-13">]</span><span class="p" data-group-id="3121083413-12">}</span><span class="w">
</span><span class="p" data-group-id="3121083413-15">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="3121083413-15">)</span><span class="mi">80</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">get_tracer</span><span class="p" data-group-id="3121083413-16">(</span><span class="p" data-group-id="3121083413-16">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3121083413-17">(</span><span class="o">&lt;</span><span class="mf">0.116</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="3121083413-17">)</span><span class="w"> </span><span class="ss">call</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">get_tracer</span><span class="p" data-group-id="3121083413-18">(</span><span class="p" data-group-id="3121083413-18">)</span><span class="w">
</span><span class="p" data-group-id="3121083413-19">{</span><span class="ss">ok</span><span class="p">,</span><span class="o">&lt;</span><span class="mf">0.143</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="3121083413-19">}</span><span class="w">
</span><span class="p" data-group-id="3121083413-20">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="3121083413-20">)</span><span class="mi">81</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">tp</span><span class="p" data-group-id="3121083413-21">(</span><span class="ss">dbg</span><span class="p">,</span><span class="ss">get_tracer</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="p" data-group-id="3121083413-22">[</span><span class="p" data-group-id="3121083413-23">{</span><span class="ss">&#39;_&#39;</span><span class="p">,</span><span class="p" data-group-id="3121083413-24">[</span><span class="p" data-group-id="3121083413-24">]</span><span class="p">,</span><span class="p" data-group-id="3121083413-25">[</span><span class="p" data-group-id="3121083413-26">{</span><span class="ss">return_trace</span><span class="p" data-group-id="3121083413-26">}</span><span class="p" data-group-id="3121083413-25">]</span><span class="p" data-group-id="3121083413-23">}</span><span class="p" data-group-id="3121083413-22">]</span><span class="p" data-group-id="3121083413-21">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3121083413-27">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="3121083413-28">[</span><span class="p" data-group-id="3121083413-29">{</span><span class="ss">matched</span><span class="p">,</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="3121083413-29">}</span><span class="p">,</span><span class="p" data-group-id="3121083413-30">{</span><span class="ss">saved</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="3121083413-30">}</span><span class="p" data-group-id="3121083413-28">]</span><span class="p" data-group-id="3121083413-27">}</span><span class="w">
</span><span class="p" data-group-id="3121083413-31">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="3121083413-31">)</span><span class="mi">82</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">get_tracer</span><span class="p" data-group-id="3121083413-32">(</span><span class="p" data-group-id="3121083413-32">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3121083413-33">(</span><span class="o">&lt;</span><span class="mf">0.116</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="3121083413-33">)</span><span class="w"> </span><span class="ss">call</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">get_tracer</span><span class="p" data-group-id="3121083413-34">(</span><span class="p" data-group-id="3121083413-34">)</span><span class="w">
</span><span class="p" data-group-id="3121083413-35">(</span><span class="o">&lt;</span><span class="mf">0.116</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="3121083413-35">)</span><span class="w"> </span><span class="ss">returned</span><span class="w"> </span><span class="ss">from</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="ss">get_tracer</span><span class="o">/</span><span class="mi">0</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="p" data-group-id="3121083413-36">{</span><span class="ss">ok</span><span class="p">,</span><span class="o">&lt;</span><span class="mf">0.143</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="3121083413-36">}</span><span class="w">
</span><span class="p" data-group-id="3121083413-37">{</span><span class="ss">ok</span><span class="p">,</span><span class="o">&lt;</span><span class="mf">0.143</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="3121083413-37">}</span><span class="w">
</span><span class="p" data-group-id="3121083413-38">(</span><span class="ss">tiger</span><span class="p">@</span><span class="ss">durin</span><span class="p" data-group-id="3121083413-38">)</span><span class="mi">83</span><span class="o">&gt;</span></code></pre><a id="advanced"></a><h2 id="module-advanced-topics-combining-with-seq_trace" class="section-heading">
  <a href="#module-advanced-topics-combining-with-seq_trace" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Advanced topics - combining with seq_trace
</h2>
<p>The <code>dbg</code> module is primarily targeted towards tracing through the <code>erlang:trace/3</code> function. It is sometimes desired to trace messages in a more delicate way, which can be done with the help of the <code>seq_trace</code> module.</p><p><code>seq_trace</code> implements sequential tracing (known in the AXE10 world, and sometimes called &quot;forlopp tracing&quot;). <code>dbg</code> can interpret messages generated from <code>seq_trace</code> and the same tracer function for both types of tracing can be used. The <code>seq_trace</code> messages can even be sent to a trace port for further analysis.</p><p>As a match specification can turn on sequential tracing, the combination of <code>dbg</code> and <code>seq_trace</code> can be quite powerful. This brief example shows a session where sequential tracing is used:</p><pre><code class="makeup erlang"><span class="mi">1</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">tracer</span><span class="p" data-group-id="8340013391-1">(</span><span class="p" data-group-id="8340013391-1">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="8340013391-2">{</span><span class="ss">ok</span><span class="p">,</span><span class="o">&lt;</span><span class="mf">0.30</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="8340013391-2">}</span><span class="w">
</span><span class="mi">2</span><span class="o">&gt;</span><span class="w"> </span><span class="p" data-group-id="8340013391-3">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="n">Tracer</span><span class="p" data-group-id="8340013391-3">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">get_tracer</span><span class="p" data-group-id="8340013391-4">(</span><span class="p" data-group-id="8340013391-4">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="8340013391-5">{</span><span class="ss">ok</span><span class="p">,</span><span class="o">&lt;</span><span class="mf">0.31</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="8340013391-5">}</span><span class="w">
</span><span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">seq_trace</span><span class="p">:</span><span class="nf">set_system_tracer</span><span class="p" data-group-id="8340013391-6">(</span><span class="n">Tracer</span><span class="p" data-group-id="8340013391-6">)</span><span class="p">.</span><span class="w">
</span><span class="ss">false</span><span class="w">
</span><span class="mi">4</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">tp</span><span class="p" data-group-id="8340013391-7">(</span><span class="ss">dbg</span><span class="p">,</span><span class="w"> </span><span class="ss">get_tracer</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8340013391-8">[</span><span class="p" data-group-id="8340013391-9">{</span><span class="p" data-group-id="8340013391-10">[</span><span class="p" data-group-id="8340013391-10">]</span><span class="p">,</span><span class="p" data-group-id="8340013391-11">[</span><span class="p" data-group-id="8340013391-11">]</span><span class="p">,</span><span class="p" data-group-id="8340013391-12">[</span><span class="p" data-group-id="8340013391-13">{</span><span class="ss">set_seq_token</span><span class="p">,</span><span class="w"> </span><span class="nb">send</span><span class="p">,</span><span class="w"> </span><span class="ss">true</span><span class="p" data-group-id="8340013391-13">}</span><span class="p" data-group-id="8340013391-12">]</span><span class="p" data-group-id="8340013391-9">}</span><span class="p" data-group-id="8340013391-8">]</span><span class="p" data-group-id="8340013391-7">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="8340013391-14">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="8340013391-15">[</span><span class="p" data-group-id="8340013391-16">{</span><span class="ss">matched</span><span class="p">,</span><span class="ss">nonode</span><span class="p">@</span><span class="ss">nohost</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="8340013391-16">}</span><span class="p">,</span><span class="p" data-group-id="8340013391-17">{</span><span class="ss">saved</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="8340013391-17">}</span><span class="p" data-group-id="8340013391-15">]</span><span class="p" data-group-id="8340013391-14">}</span><span class="w">
</span><span class="mi">5</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">p</span><span class="p" data-group-id="8340013391-18">(</span><span class="ss">all</span><span class="p">,</span><span class="ss">call</span><span class="p" data-group-id="8340013391-18">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="8340013391-19">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="8340013391-20">[</span><span class="p" data-group-id="8340013391-21">{</span><span class="ss">matched</span><span class="p">,</span><span class="ss">nonode</span><span class="p">@</span><span class="ss">nohost</span><span class="p">,</span><span class="mi">22</span><span class="p" data-group-id="8340013391-21">}</span><span class="p" data-group-id="8340013391-20">]</span><span class="p" data-group-id="8340013391-19">}</span><span class="w">
</span><span class="mi">6</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">get_tracer</span><span class="p" data-group-id="8340013391-22">(</span><span class="p" data-group-id="8340013391-22">)</span><span class="p">,</span><span class="w"> </span><span class="nc">seq_trace</span><span class="p">:</span><span class="nf">set_token</span><span class="p" data-group-id="8340013391-23">(</span><span class="p" data-group-id="8340013391-24">[</span><span class="p" data-group-id="8340013391-24">]</span><span class="p" data-group-id="8340013391-23">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="8340013391-25">(</span><span class="o">&lt;</span><span class="mf">0.25</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="8340013391-25">)</span><span class="w"> </span><span class="ss">call</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">get_tracer</span><span class="p" data-group-id="8340013391-26">(</span><span class="p" data-group-id="8340013391-26">)</span><span class="w">
</span><span class="n">SeqTrace</span><span class="w"> </span><span class="p" data-group-id="8340013391-27">[</span><span class="mi">0</span><span class="p" data-group-id="8340013391-27">]</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8340013391-28">(</span><span class="o">&lt;</span><span class="mf">0.25</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="8340013391-28">)</span><span class="w"> </span><span class="o">&lt;</span><span class="mf">0.30</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p" data-group-id="8340013391-29">{</span><span class="o">&lt;</span><span class="mf">0.25</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">,</span><span class="ss">get_tracer</span><span class="p" data-group-id="8340013391-29">}</span><span class="w"> </span><span class="p" data-group-id="8340013391-30">[</span><span class="n">Serial</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8340013391-31">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p" data-group-id="8340013391-31">}</span><span class="p" data-group-id="8340013391-30">]</span><span class="w">
</span><span class="n">SeqTrace</span><span class="w"> </span><span class="p" data-group-id="8340013391-32">[</span><span class="mi">0</span><span class="p" data-group-id="8340013391-32">]</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8340013391-33">(</span><span class="o">&lt;</span><span class="mf">0.30</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="8340013391-33">)</span><span class="w"> </span><span class="o">&lt;</span><span class="mf">0.25</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p" data-group-id="8340013391-34">{</span><span class="ss">dbg</span><span class="p">,</span><span class="p" data-group-id="8340013391-35">{</span><span class="ss">ok</span><span class="p">,</span><span class="o">&lt;</span><span class="mf">0.31</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="8340013391-35">}</span><span class="p" data-group-id="8340013391-34">}</span><span class="w"> </span><span class="p" data-group-id="8340013391-36">[</span><span class="n">Serial</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8340013391-37">{</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p" data-group-id="8340013391-37">}</span><span class="p" data-group-id="8340013391-36">]</span><span class="w">
</span><span class="p" data-group-id="8340013391-38">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="o">&lt;</span><span class="mf">0.30</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">,</span><span class="mi">4</span><span class="p" data-group-id="8340013391-38">}</span></code></pre><p>This session sets the system_tracer to the same process as the ordinary tracer process (i. e. &lt;0.31.0&gt;) and sets the trace pattern for the function <code>dbg:get_tracer</code> to one that has the action of setting a sequential token. When the function is called by a traced process (all processes are traced in this case), the process gets &quot;contaminated&quot; by the token and <code>seq_trace</code> messages are sent both for the server request and the response. The <code>seq_trace:set_token([])</code> after the call clears the <code>seq_trace</code> token, why no messages are sent when the answer propagates via the shell to the console port. The output would otherwise have been more noisy.</p><h2 id="module-note-of-caution" class="section-heading">
  <a href="#module-note-of-caution" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Note of caution
</h2>
<p>When tracing function calls on a group leader process (an IO process), there is risk of causing a deadlock. This will happen if a group leader process generates a trace message and the tracer process, by calling the trace handler function, sends an IO request to the same group leader. The problem can only occur if the trace handler prints to tty using an <code>io</code> function such as <a href="https://wojtekmach.pl/otp_docs/stdlib/io.html#format/2"><code>format/2</code></a>. Note that when <code>dbg:p(all,call)</code> is called, IO processes are also traced. Here's an example:</p><pre><code class="makeup erlang"><span class="c1">%% Using a default line editing shell</span><span class="w">
</span><span class="mi">1</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">tracer</span><span class="p" data-group-id="8495092022-1">(</span><span class="ss">process</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8495092022-2">{</span><span class="nf">fun</span><span class="p" data-group-id="8495092022-3">(</span><span class="n">Msg</span><span class="p">,</span><span class="p">_</span><span class="p" data-group-id="8495092022-3">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="8495092022-4">(</span><span class="s">&quot;</span><span class="si">~p</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8495092022-5">[</span><span class="n">Msg</span><span class="p" data-group-id="8495092022-5">]</span><span class="p" data-group-id="8495092022-4">)</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">end</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="8495092022-2">}</span><span class="p" data-group-id="8495092022-1">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="8495092022-6">{</span><span class="ss">ok</span><span class="p">,</span><span class="o">&lt;</span><span class="mf">0.37</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="8495092022-6">}</span><span class="w">
</span><span class="mi">2</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">p</span><span class="p" data-group-id="8495092022-7">(</span><span class="ss">all</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8495092022-8">[</span><span class="ss">call</span><span class="p" data-group-id="8495092022-8">]</span><span class="p" data-group-id="8495092022-7">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="8495092022-9">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="8495092022-10">[</span><span class="p" data-group-id="8495092022-11">{</span><span class="ss">matched</span><span class="p">,</span><span class="ss">nonode</span><span class="p">@</span><span class="ss">nohost</span><span class="p">,</span><span class="mi">25</span><span class="p" data-group-id="8495092022-11">}</span><span class="p" data-group-id="8495092022-10">]</span><span class="p" data-group-id="8495092022-9">}</span><span class="w">
</span><span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">tp</span><span class="p" data-group-id="8495092022-12">(</span><span class="ss">mymod</span><span class="p">,</span><span class="p" data-group-id="8495092022-13">[</span><span class="p" data-group-id="8495092022-14">{</span><span class="ss">&#39;_&#39;</span><span class="p">,</span><span class="p" data-group-id="8495092022-15">[</span><span class="p" data-group-id="8495092022-15">]</span><span class="p">,</span><span class="p" data-group-id="8495092022-16">[</span><span class="p" data-group-id="8495092022-16">]</span><span class="p" data-group-id="8495092022-14">}</span><span class="p" data-group-id="8495092022-13">]</span><span class="p" data-group-id="8495092022-12">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="8495092022-17">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="8495092022-18">[</span><span class="p" data-group-id="8495092022-19">{</span><span class="ss">matched</span><span class="p">,</span><span class="ss">nonode</span><span class="p">@</span><span class="ss">nohost</span><span class="p">,</span><span class="mi">0</span><span class="p" data-group-id="8495092022-19">}</span><span class="p">,</span><span class="p" data-group-id="8495092022-20">{</span><span class="ss">saved</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="8495092022-20">}</span><span class="p" data-group-id="8495092022-18">]</span><span class="p" data-group-id="8495092022-17">}</span><span class="w">
</span><span class="mi">4</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">mymod</span><span class="p">:</span><span class="w"> </span><span class="c1">% TAB pressed here</span><span class="w">
</span><span class="c1">%% -- Deadlock --</span></code></pre><p>Here's another example:</p><pre><code class="makeup erlang"><span class="c1">%% Using a shell without line editing (oldshell)</span><span class="w">
</span><span class="mi">1</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">tracer</span><span class="p" data-group-id="7926563567-1">(</span><span class="ss">process</span><span class="p" data-group-id="7926563567-1">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7926563567-2">{</span><span class="ss">ok</span><span class="p">,</span><span class="o">&lt;</span><span class="mf">0.31</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="7926563567-2">}</span><span class="w">
</span><span class="mi">2</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">p</span><span class="p" data-group-id="7926563567-3">(</span><span class="ss">all</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7926563567-4">[</span><span class="ss">call</span><span class="p" data-group-id="7926563567-4">]</span><span class="p" data-group-id="7926563567-3">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7926563567-5">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="7926563567-6">[</span><span class="p" data-group-id="7926563567-7">{</span><span class="ss">matched</span><span class="p">,</span><span class="ss">nonode</span><span class="p">@</span><span class="ss">nohost</span><span class="p">,</span><span class="mi">25</span><span class="p" data-group-id="7926563567-7">}</span><span class="p" data-group-id="7926563567-6">]</span><span class="p" data-group-id="7926563567-5">}</span><span class="w">
</span><span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">tp</span><span class="p" data-group-id="7926563567-8">(</span><span class="ss">lists</span><span class="p">,</span><span class="p" data-group-id="7926563567-9">[</span><span class="p" data-group-id="7926563567-10">{</span><span class="ss">&#39;_&#39;</span><span class="p">,</span><span class="p" data-group-id="7926563567-11">[</span><span class="p" data-group-id="7926563567-11">]</span><span class="p">,</span><span class="p" data-group-id="7926563567-12">[</span><span class="p" data-group-id="7926563567-12">]</span><span class="p" data-group-id="7926563567-10">}</span><span class="p" data-group-id="7926563567-9">]</span><span class="p" data-group-id="7926563567-8">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="7926563567-13">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="7926563567-14">[</span><span class="p" data-group-id="7926563567-15">{</span><span class="ss">matched</span><span class="p">,</span><span class="ss">nonode</span><span class="p">@</span><span class="ss">nohost</span><span class="p">,</span><span class="mi">0</span><span class="p" data-group-id="7926563567-15">}</span><span class="p">,</span><span class="p" data-group-id="7926563567-16">{</span><span class="ss">saved</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="7926563567-16">}</span><span class="p" data-group-id="7926563567-14">]</span><span class="p" data-group-id="7926563567-13">}</span><span class="w">
</span><span class="c1">% -- Deadlock --</span></code></pre><p>The reason we get a deadlock in the first example is because when TAB is pressed to expand the function name, the group leader (which handles character input) calls <code>mymod:module_info()</code>. This generates a trace message which, in turn, causes the tracer process to send an IO request to the group leader (by calling <code>io:format/2</code>). We end up in a deadlock.</p><p>In the second example we use the default trace handler function. This handler prints to tty by sending IO requests to the <code>user</code> process. When Erlang is started in oldshell mode, the shell process will have <code>user</code> as its group leader and so will the tracer process in this example. Since <code>user</code> calls functions in <code>lists</code> we end up in a deadlock as soon as the first IO request is sent.</p><p>Here are a few suggestions for how to avoid deadlock:</p><ul><li>Don't trace the group leader of the tracer process. If tracing has been switched on for all processes, call <code>dbg:p(TracerGLPid,clear)</code> to stop tracing the group leader (<code>TracerGLPid</code>). <code>process_info(TracerPid,group_leader)</code> tells you which process this is (<code>TracerPid</code> is returned from <code>dbg:get_tracer/0</code>).</li><li>Don't trace the <code>user</code> process if using the default trace handler function.</li><li>In your own trace handler function, call <code>erlang:display/1</code> instead of an <code>io</code> function or, if <code>user</code> is not used as group leader, print to <code>user</code> instead of the default group leader. Example: <code>io:format(user,Str,Args)</code>.</li></ul>
        </section>


        <section id="summary" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#summary">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Summary
          </h1>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#c/3">c(Mod, Fun, Args)</a>

  </div>

    <div class="summary-synopsis"><p>Equivalent to <code>c(Mod, Fun, Args, all)</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#c/4">c(Mod, Fun, Args, Flags)</a>

  </div>

    <div class="summary-synopsis"><p><code>c</code> stands for <em>c</em>all. Evaluates the expression <code>apply(Mod, Fun, Args)</code> with the trace flags in <code>Flags</code> set. This is a convenient way to trace processes from the Erlang shell.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#cn/1">cn(Nodename) -&gt; ok</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Nodename = atom()</li></ul><p><code>cn</code> stands for <em>c</em>lear <em>n</em>ode. Clears a node from the list of traced nodes. Subsequent calls to <a href="dbg.html#tp/2"><code>tp/2</code></a> and <a href="dbg.html#p/2"><code>p/2</code></a> will not consider that node, but tracing already activated on the node will continue to be in effect.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctp/0">ctp()</a>

  </div>

    <div class="summary-synopsis"><p>Same as ctp({'_', '_', '_'})</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctp/1">ctp(Module)</a>

  </div>

    <div class="summary-synopsis"><p>Same as ctp({Module, '_', '_'})</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctp/1">ctp({Module, Function, Arity}) -&gt; {ok, MatchDesc} | {error, term()}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Module = atom() | '_'</li><li class="type">Function = atom() | '_'</li><li class="type">Arity = integer() | '_'</li><li class="type">MatchDesc = [MatchNum]</li><li class="type">MatchNum = {matched, node(), integer()} | {matched, node(), 0, RPCError}</li></ul><p><code>ctp</code> stands for <em>c</em>lear <em>t</em>race <em>p</em>attern. This function disables call tracing on the specified functions. The semantics of the parameter is the same as for the corresponding function specification in <a href="dbg.html#tp/2"><code>tp/2</code></a> or <a href="dbg.html#tpl/2"><code>tpl/2</code></a>. Both local and global call trace is disabled.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctp/2">ctp(Module, Function)</a>

  </div>

    <div class="summary-synopsis"><p>Same as ctp({Module, Function, '_'})</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctp/3">ctp(Module, Function, Arity)</a>

  </div>

    <div class="summary-synopsis"><p>Same as ctp({Module, Function, Arity})</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpe/1">ctpe(Event) -&gt; {ok, MatchDesc} | {error, term()}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Event = send | 'receive'</li><li class="type">MatchDesc = [MatchNum]</li><li class="type">MatchNum = {matched, node(), 1} | {matched, node(), 0, RPCError}</li></ul><p><code>ctpe</code> stands for <em>c</em>lear <em>t</em>race <em>p</em>attern <em>e</em>vent. This function clears match specifications for the specified trace event (<code>send</code> or <code>'receive'</code>). It will revert back to the default behavior of tracing all triggered events.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpg/0">ctpg()</a>

  </div>

    <div class="summary-synopsis"><p>Same as ctpg({'_', '_', '_'})</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpg/1">ctpg(Module)</a>

  </div>

    <div class="summary-synopsis"><p>Same as ctpg({Module, '_', '_'})</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpg/1">ctpg({Module, Function, Arity}) -&gt; {ok, MatchDesc} | {error, term()}</a>

  </div>

    <div class="summary-synopsis"><p><code>ctpg</code> stands for <em>c</em>lear <em>t</em>race <em>p</em>attern <em>g</em>lobal. This function works as <a href="dbg.html#ctp/1"><code>ctp/1</code></a>, but only disables tracing set up with <a href="dbg.html#tp/2"><code>tp/2</code></a> (not with <a href="dbg.html#tpl/2"><code>tpl/2</code></a>).</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpg/2">ctpg(Module, Function)</a>

  </div>

    <div class="summary-synopsis"><p>Same as ctpg({Module, Function, '_'})</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpg/3">ctpg(Module, Function, Arity)</a>

  </div>

    <div class="summary-synopsis"><p>Same as ctpg({Module, Function, Arity})</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpl/0">ctpl()</a>

  </div>

    <div class="summary-synopsis"><p>Same as ctpl({'_', '_', '_'})</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpl/1">ctpl(Module)</a>

  </div>

    <div class="summary-synopsis"><p>Same as ctpl({Module, '_', '_'})</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpl/1">ctpl({Module, Function, Arity}) -&gt; {ok, MatchDesc} | {error, term()}</a>

  </div>

    <div class="summary-synopsis"><p><code>ctpl</code> stands for <em>c</em>lear <em>t</em>race <em>p</em>attern <em>l</em>ocal. This function works as <a href="dbg.html#ctp/1"><code>ctp/1</code></a>, but only disables tracing set up with <a href="dbg.html#tpl/2"><code>tpl/2</code></a> (not with <a href="dbg.html#tp/2"><code>tp/2</code></a>).</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpl/2">ctpl(Module, Function)</a>

  </div>

    <div class="summary-synopsis"><p>Same as ctpl({Module, Function, '_'})</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ctpl/3">ctpl(Module, Function, Arity)</a>

  </div>

    <div class="summary-synopsis"><p>Same as ctpl({Module, Function, Arity})</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#dtp/0">dtp() -&gt; ok</a>

  </div>

    <div class="summary-synopsis"><p><code>dtp</code> stands for <em>d</em>elete <em>t</em>race <em>p</em>atterns. Use this function to &quot;forget&quot; all match specifications saved during calls to <a href="dbg.html#tp/2"><code>tp/2</code></a>. This is useful when one wants to restore other match specifications from a file with <a href="dbg.html#rtp/1"><code>rtp/1</code></a>. Use <a href="dbg.html#dtp/1"><code>dtp/1</code></a> to delete specific saved match specifications.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#dtp/1">dtp(N) -&gt; ok</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">N = integer()</li></ul><p><code>dtp</code> stands for <em>d</em>elete <em>t</em>race <em>p</em>attern. Use this function to &quot;forget&quot; a specific match specification saved during calls to <a href="dbg.html#tp/2"><code>tp/2</code></a>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#flush_trace_port/0">flush_trace_port()</a>

  </div>

    <div class="summary-synopsis"><p>Equivalent to <code>flush_trace_port(node())</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#flush_trace_port/1">flush_trace_port(Nodename) -&gt; ok | {error, Reason}</a>

  </div>

    <div class="summary-synopsis"><p>Equivalent to <code>trace_port_control(Nodename,flush)</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#fun2ms/1">fun2ms(LiteralFun) -&gt; MatchSpec</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">LiteralFun = fun() literal</li><li class="type">MatchSpec = term()</li></ul><p>Pseudo function that by means of a <code>parse_transform</code> translates the <em>literal</em> <code>fun()</code> typed as parameter in the function call to a match specification as described in the <code>match_spec</code> manual of ERTS users guide. (With literal I mean that the <code>fun()</code> needs to textually be written as the parameter of the function, it cannot be held in a variable which in turn is passed to the function).</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_tracer/0">get_tracer()</a>

  </div>

    <div class="summary-synopsis"><p>Equivalent to <code>get_tracer(node())</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_tracer/1">get_tracer(Nodename) -&gt; {ok, Tracer}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Nodename = atom()</li><li class="type">Tracer = port() | pid() | {module(), term()}</li></ul><p>Returns the process, port or tracer module to which all trace messages are sent.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#h/0">h() -&gt; ok </a>

  </div>

    <div class="summary-synopsis"><p><code>h</code> stands for <em>h</em>elp. Gives a list of items for brief online help.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#h/1">h(Item) -&gt; ok </a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Item = atom()</li></ul><p><code>h</code> stands for <em>h</em>elp. Gives a brief help text for functions in the dbg module. The available items can be listed with <code>dbg:h/0</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#i/0">i() -&gt; ok</a>

  </div>

    <div class="summary-synopsis"><p><code>i</code> stands for <em>i</em>nformation. Displays information about all traced processes and ports.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ln/0">ln() -&gt; ok</a>

  </div>

    <div class="summary-synopsis"><p><code>ln</code> stands for <em>l</em>ist <em>n</em>odes. Shows the list of traced nodes on the console.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#ltp/0">ltp() -&gt; ok</a>

  </div>

    <div class="summary-synopsis"><p><code>ltp</code> stands for <em>l</em>ist <em>t</em>race <em>p</em>atterns. Use this function to recall all match specifications previously used in the session (i. e. previously saved during calls to <a href="dbg.html#tp/2"><code>tp/2</code></a>, and built-in match specifications. This is very useful, as a complicated match_spec can be quite awkward to write. Note that the match specifications are lost if <a href="dbg.html#stop/0"><code>stop/0</code></a> is called.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#n/1">n(Nodename) -&gt; {ok, Nodename} | {error, Reason}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Nodename = atom()</li><li class="type">Reason = term()</li></ul><p><code>n</code> stands for <em>n</em>ode. The <code>dbg</code> server keeps a list of nodes where tracing should be performed. Whenever a <a href="dbg.html#tp/2"><code>tp/2</code></a> call or a <a href="dbg.html#p/2"><code>p/2</code></a> call is made, it is executed for all nodes in this list including the local node (except for <a href="dbg.html#p/2"><code>p/2</code></a> with a specific <code>pid()</code> or <code>port()</code> as first argument, in which case the command is executed only on the node where the designated process or port resides).</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#p/1">p(Item) -&gt; {ok, MatchDesc} | {error, term()} </a>

  </div>

    <div class="summary-synopsis"><p>Equivalent to <code>p(Item, [m])</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#p/2">p(Item, Flags) -&gt; {ok, MatchDesc} | {error, term()}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">MatchDesc = [MatchNum]</li><li class="type">MatchNum = {matched, node(), integer()} | {matched, node(), 0, RPCError}</li><li class="type">RPCError = term()</li></ul><p><code>p</code> stands for <em>p</em>rocess. Traces <code>Item</code> in accordance to the value specified by <code>Flags</code>. The variation of <code>Item</code> is listed below</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#rtp/1">rtp(Name) -&gt; ok | {error, Error}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Name = string()</li><li class="type">Error = term()</li></ul><p><code>rtp</code> stands for <em>r</em>ead <em>t</em>race <em>p</em>atterns. This function reads match specifications from a file (possibly) generated by the <a href="dbg.html#wtp/1"><code>wtp/1</code></a> function. It checks the syntax of all match specifications and verifies that they are correct. The error handling principle is &quot;all or nothing&quot;, i. e. if some of the match specifications are wrong, none of the specifications are added to the list of saved match specifications for the running system.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#stop/0">stop() -&gt; ok</a>

  </div>

    <div class="summary-synopsis"><p>Stops the <code>dbg</code> server and clears all trace flags for all processes and all local trace patterns for all functions. Also shuts down all trace clients and closes all trace ports.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#stop_clear/0">stop_clear() -&gt; ok</a>

  </div>

    <div class="summary-synopsis"><p>Same as stop/0, but also clears all trace patterns on global functions calls.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#stop_trace_client/1">stop_trace_client(Pid) -&gt; ok</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Pid = pid()</li></ul><p>This function shuts down a previously started trace client. The <code>Pid</code> argument is the process id returned from the <a href="dbg.html#trace_client/2"><code>trace_client/2</code></a> or <a href="dbg.html#trace_client/3"><code>trace_client/3</code></a> call.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tp/2">tp(Module,MatchSpec)</a>

  </div>

    <div class="summary-synopsis"><p>Same as tp({Module, '_', '_'}, MatchSpec)</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tp/2">tp({Module, Function, Arity}, MatchSpec) -&gt; {ok, MatchDesc} | {error, term()}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Module = atom() | '_'</li><li class="type">Function = atom() | '_'</li><li class="type">Arity = integer() |'_'</li><li class="type">MatchSpec = integer() | Built-inAlias | [] | match_spec()</li><li class="type">Built-inAlias = x | c | cx</li><li class="type">MatchDesc = [MatchInfo]</li><li class="type">MatchInfo = {saved, integer()} | MatchNum</li><li class="type">MatchNum = {matched, node(), integer()} | {matched, node(), 0, RPCError}</li></ul><p><code>tp</code> stands for <em>t</em>race <em>p</em>attern. This function enables call trace for one or more functions. All exported functions matching the <code>{Module, Function, Arity}</code> argument will be concerned, but the <code>match_spec()</code> may further narrow down the set of function calls generating trace messages.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tp/3">tp(Module,Function,MatchSpec)</a>

  </div>

    <div class="summary-synopsis"><p>Same as tp({Module, Function, '_'}, MatchSpec)</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tp/4">tp(Module, Function, Arity, MatchSpec)</a>

  </div>

    <div class="summary-synopsis"><p>Same as tp({Module, Function, Arity}, MatchSpec)</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tpe/2">tpe(Event, MatchSpec) -&gt; {ok, MatchDesc} | {error, term()}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Event = send | 'receive'</li><li class="type">MatchSpec = integer() | Built-inAlias | [] | match_spec()</li><li class="type">Built-inAlias = x | c | cx</li><li class="type">MatchDesc = [MatchInfo]</li><li class="type">MatchInfo = {saved, integer()} | MatchNum</li><li class="type">MatchNum = {matched, node(), 1} | {matched, node(), 0, RPCError}</li></ul><p><code>tpe</code> stands for <em>t</em>race <em>p</em>attern <em>e</em>vent. This function associates a match specification with trace event <code>send</code> or <code>'receive'</code>. By default all executed <code>send</code> and <code>'receive'</code> events are traced if enabled for a process. A match specification can be used to filter traced events based on sender, receiver and/or message content.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tpl/2">tpl(Module,MatchSpec)</a>

  </div>

    <div class="summary-synopsis"><p>Same as tpl({Module, '_', '_'}, MatchSpec)</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tpl/2">tpl({Module, Function, Arity}, MatchSpec) -&gt; {ok, MatchDesc} | {error, term()}</a>

  </div>

    <div class="summary-synopsis"><p><code>tpl</code> stands for <em>t</em>race <em>p</em>attern <em>l</em>ocal. This function works as <a href="dbg.html#tp/2"><code>tp/2</code></a>, but enables tracing for local calls (and local functions) as well as for global calls (and functions).</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tpl/3">tpl(Module,Function,MatchSpec)</a>

  </div>

    <div class="summary-synopsis"><p>Same as tpl({Module, Function, '_'}, MatchSpec)</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tpl/4">tpl(Module, Function, Arity, MatchSpec)</a>

  </div>

    <div class="summary-synopsis"><p>Same as tpl({Module, Function, Arity}, MatchSpec)</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#trace_client/2">trace_client(Type, Parameters) -&gt; pid()</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Type = ip | file | follow_file</li><li class="type">Parameters = Filename | WrapFilesSpec | IPClientPortSpec</li><li class="type">Filename = string() | [string()] | atom()</li><li class="type">WrapFilesSpec = see trace_port/2</li><li class="type">Suffix = string()</li><li class="type">IpClientPortSpec = PortNumber | {Hostname, PortNumber}</li><li class="type">PortNumber = integer()</li><li class="type">Hostname = string()</li></ul><p>This function starts a trace client that reads the output created by a trace port driver and handles it in mostly the same way as a tracer process created by the <a href="dbg.html#tracer/0"><code>tracer/0</code></a> function.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#trace_client/3">trace_client(Type, Parameters, HandlerSpec) -&gt; pid()</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Type = ip | file | follow_file</li><li class="type">Parameters = Filename | WrapFilesSpec | IPClientPortSpec</li><li class="type">Filename = string() | [string()] | atom()</li><li class="type">WrapFilesSpec = see trace_port/2</li><li class="type">Suffix = string()</li><li class="type">IpClientPortSpec = PortNumber | {Hostname, PortNumber}</li><li class="type">PortNumber = integer()</li><li class="type">Hostname = string()</li><li class="type">HandlerSpec = {HandlerFun, InitialData}</li><li class="type">HandlerFun = fun() (two arguments)</li><li class="type">InitialData = term()</li></ul><p>This function works exactly as <a href="dbg.html#trace_client/2"><code>trace_client/2</code></a>, but allows you to write your own handler function. The handler function works mostly as the one described in <a href="dbg.html#tracer/2"><code>tracer/2</code></a>, but will also have to be prepared to handle trace messages of the form <code>{drop, N}</code>, where <code>N</code> is the number of dropped messages. This pseudo trace message will only occur if the ip trace driver is used.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#trace_port/2">trace_port(Type, Parameters) -&gt; fun()</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Type = ip | file</li><li class="type">Parameters = Filename | WrapFilesSpec | IPPortSpec</li><li class="type">Filename = string() | [string()] | atom()</li><li class="type">WrapFilesSpec = {Filename, wrap, Suffix} | {Filename, wrap, Suffix, WrapSize} | {Filename, wrap, Suffix, WrapSize, WrapCnt}</li><li class="type">Suffix = string()</li><li class="type">WrapSize = integer() &gt;= 0 | {time, WrapTime}</li><li class="type">WrapTime = integer() &gt;= 1</li><li class="type">WrapCnt = integer() &gt;= 1</li><li class="type">IpPortSpec = PortNumber | {PortNumber, QueSize}</li><li class="type">PortNumber = integer()</li><li class="type">QueSize = integer()</li></ul><p>This function creates a trace port generating <em>fun</em>. The <em>fun</em> takes no arguments and returns a newly opened trace port. The return value from this function is suitable as a second parameter to tracer/2, i.e. <code>dbg:tracer(port, dbg:trace_port(ip, 4711))</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#trace_port_control/1">trace_port_control(Operation)</a>

  </div>

    <div class="summary-synopsis"><p>Equivalent to <code>trace_port_control(node(),Operation)</code>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#trace_port_control/2">trace_port_control(Nodename,Operation) -&gt;  ok | {ok, Result} | {error, Reason}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Nodename = atom()</li></ul><p>This function is used to do a control operation on the active trace port driver on the given node (<code>Nodename</code>). Which operations are allowed as well as their return values depend on which trace driver is used.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tracer/0">tracer() -&gt; {ok, pid()} | {error, already_started}</a>

  </div>

    <div class="summary-synopsis"><p>This function starts a server on the local node that will be the recipient of all trace messages. All subsequent calls to <a href="dbg.html#p/2"><code>p/2</code></a> will result in messages sent to the newly started trace server.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tracer/2">tracer(Type, Data) -&gt; {ok, pid()} | {error, Error}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Type = port | process | module</li><li class="type">Data = PortGenerator | HandlerSpec | ModuleSpec</li><li class="type">PortGenerator = fun() (no arguments)</li><li class="type">Error = term()</li><li class="type">HandlerSpec = {HandlerFun, InitialData}</li><li class="type">HandlerFun = fun() (two arguments)</li><li class="type">ModuleSpec = fun() (no arguments) | {TracerModule, TracerState}</li><li class="type">TracerModule = atom()</li><li class="type">InitialData = TracerState = term()</li></ul><p>This function starts a tracer server with additional parameters on the local node. The first parameter, the <code>Type</code>, indicates if trace messages should be handled by a receiving process (<code>process</code>), by a tracer port (<code>port</code>) or by a tracer module (<code>module</code>). For a description about tracer ports see <a href="dbg.html#trace_port/2"><code>trace_port/2</code></a> and for a tracer modules see <a href="https://wojtekmach.pl/otp_docs/erts/erl_tracer.html"><code>erl_tracer</code></a>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tracer/3">tracer(Nodename, Type, Data) -&gt; {ok, Nodename} | {error, Reason}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Nodename = atom()</li></ul><p>This function is equivalent to <a href="dbg.html#tracer/2"><code>tracer/2</code></a>, but acts on the given node. A tracer is started on the node (<code>Nodename</code>) and the node is added to the list of traced nodes.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#wtp/1">wtp(Name) -&gt; ok | {error, IOError}</a>

  </div>

    <div class="summary-synopsis"><ul class="types"><li class="type">Name = string()</li><li class="type">IOError = term()</li></ul><p><code>wtp</code> stands for <em>w</em>rite <em>t</em>race <em>p</em>atterns. This function will save all match specifications saved during the session (during calls to <a href="dbg.html#tp/2"><code>tp/2</code></a>) and built-in match specifications in a text file with the name designated by <code>Name</code>. The format of the file is textual, why it can be edited with an ordinary text editor, and then restored with <a href="dbg.html#rtp/1"><code>rtp/1</code></a>.</p></div>

</div>

  </div>

        </section>


        <section id="functions" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#functions">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
Functions
          </h1>
          <div class="functions-list">
<section class="detail" id="c/3">

  <div class="detail-header">
    <a href="#c/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">c(Mod, Fun, Args)</h1>


  </div>

  <section class="docstring">

<p>Equivalent to <code>c(Mod, Fun, Args, all)</code>.</p>
  </section>
</section>
<section class="detail" id="c/4">

  <div class="detail-header">
    <a href="#c/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">c(Mod, Fun, Args, Flags)</h1>


  </div>

  <section class="docstring">

<p><code>c</code> stands for <em>c</em>all. Evaluates the expression <code>apply(Mod, Fun, Args)</code> with the trace flags in <code>Flags</code> set. This is a convenient way to trace processes from the Erlang shell.</p>
  </section>
</section>
<section class="detail" id="cn/1">

  <div class="detail-header">
    <a href="#cn/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">cn(Nodename) -&gt; ok</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Nodename = atom()</li></ul><p><code>cn</code> stands for <em>c</em>lear <em>n</em>ode. Clears a node from the list of traced nodes. Subsequent calls to <a href="dbg.html#tp/2"><code>tp/2</code></a> and <a href="dbg.html#p/2"><code>p/2</code></a> will not consider that node, but tracing already activated on the node will continue to be in effect.</p><p>Returns <code>ok</code>, cannot fail.</p>
  </section>
</section>
<section class="detail" id="ctp/0">

  <div class="detail-header">
    <a href="#ctp/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctp()</h1>


  </div>

  <section class="docstring">

<p>Same as ctp({'_', '_', '_'})</p>
  </section>
</section>
<section class="detail" id="ctp/1">

  <div class="detail-header">
    <a href="#ctp/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctp(Module)</h1>


  </div>

  <section class="docstring">

<p>Same as ctp({Module, '_', '_'})</p>
  </section>
</section>
<section class="detail" id="ctp/1">

  <div class="detail-header">
    <a href="#ctp/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctp({Module, Function, Arity}) -&gt; {ok, MatchDesc} | {error, term()}</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Module = atom() | '_'</li><li class="type">Function = atom() | '_'</li><li class="type">Arity = integer() | '_'</li><li class="type">MatchDesc = [MatchNum]</li><li class="type">MatchNum = {matched, node(), integer()} | {matched, node(), 0, RPCError}</li></ul><p><code>ctp</code> stands for <em>c</em>lear <em>t</em>race <em>p</em>attern. This function disables call tracing on the specified functions. The semantics of the parameter is the same as for the corresponding function specification in <a href="dbg.html#tp/2"><code>tp/2</code></a> or <a href="dbg.html#tpl/2"><code>tpl/2</code></a>. Both local and global call trace is disabled.</p><p>The return value reflects how many functions that matched, and is constructed as described in <a href="dbg.html#tp/2"><code>tp/2</code></a>. No tuple <code>{saved, N}</code> is however ever returned (for obvious reasons).</p>
  </section>
</section>
<section class="detail" id="ctp/2">

  <div class="detail-header">
    <a href="#ctp/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctp(Module, Function)</h1>


  </div>

  <section class="docstring">

<p>Same as ctp({Module, Function, '_'})</p>
  </section>
</section>
<section class="detail" id="ctp/3">

  <div class="detail-header">
    <a href="#ctp/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctp(Module, Function, Arity)</h1>


  </div>

  <section class="docstring">

<p>Same as ctp({Module, Function, Arity})</p>
  </section>
</section>
<section class="detail" id="ctpe/1">

  <div class="detail-header">
    <a href="#ctpe/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpe(Event) -&gt; {ok, MatchDesc} | {error, term()}</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">

<ul class="types"><li class="type">Event = send | 'receive'</li><li class="type">MatchDesc = [MatchNum]</li><li class="type">MatchNum = {matched, node(), 1} | {matched, node(), 0, RPCError}</li></ul><p><code>ctpe</code> stands for <em>c</em>lear <em>t</em>race <em>p</em>attern <em>e</em>vent. This function clears match specifications for the specified trace event (<code>send</code> or <code>'receive'</code>). It will revert back to the default behavior of tracing all triggered events.</p><p>The return value follow the same style as for <a href="dbg.html#ctp/1"><code>ctp/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="ctpg/0">

  <div class="detail-header">
    <a href="#ctpg/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpg()</h1>


  </div>

  <section class="docstring">

<p>Same as ctpg({'_', '_', '_'})</p>
  </section>
</section>
<section class="detail" id="ctpg/1">

  <div class="detail-header">
    <a href="#ctpg/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpg(Module)</h1>


  </div>

  <section class="docstring">

<p>Same as ctpg({Module, '_', '_'})</p>
  </section>
</section>
<section class="detail" id="ctpg/1">

  <div class="detail-header">
    <a href="#ctpg/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpg({Module, Function, Arity}) -&gt; {ok, MatchDesc} | {error, term()}</h1>


  </div>

  <section class="docstring">

<p><code>ctpg</code> stands for <em>c</em>lear <em>t</em>race <em>p</em>attern <em>g</em>lobal. This function works as <a href="dbg.html#ctp/1"><code>ctp/1</code></a>, but only disables tracing set up with <a href="dbg.html#tp/2"><code>tp/2</code></a> (not with <a href="dbg.html#tpl/2"><code>tpl/2</code></a>).</p>
  </section>
</section>
<section class="detail" id="ctpg/2">

  <div class="detail-header">
    <a href="#ctpg/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpg(Module, Function)</h1>


  </div>

  <section class="docstring">

<p>Same as ctpg({Module, Function, '_'})</p>
  </section>
</section>
<section class="detail" id="ctpg/3">

  <div class="detail-header">
    <a href="#ctpg/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpg(Module, Function, Arity)</h1>


  </div>

  <section class="docstring">

<p>Same as ctpg({Module, Function, Arity})</p>
  </section>
</section>
<section class="detail" id="ctpl/0">

  <div class="detail-header">
    <a href="#ctpl/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpl()</h1>


  </div>

  <section class="docstring">

<p>Same as ctpl({'_', '_', '_'})</p>
  </section>
</section>
<section class="detail" id="ctpl/1">

  <div class="detail-header">
    <a href="#ctpl/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpl(Module)</h1>


  </div>

  <section class="docstring">

<p>Same as ctpl({Module, '_', '_'})</p>
  </section>
</section>
<section class="detail" id="ctpl/1">

  <div class="detail-header">
    <a href="#ctpl/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpl({Module, Function, Arity}) -&gt; {ok, MatchDesc} | {error, term()}</h1>


  </div>

  <section class="docstring">

<p><code>ctpl</code> stands for <em>c</em>lear <em>t</em>race <em>p</em>attern <em>l</em>ocal. This function works as <a href="dbg.html#ctp/1"><code>ctp/1</code></a>, but only disables tracing set up with <a href="dbg.html#tpl/2"><code>tpl/2</code></a> (not with <a href="dbg.html#tp/2"><code>tp/2</code></a>).</p>
  </section>
</section>
<section class="detail" id="ctpl/2">

  <div class="detail-header">
    <a href="#ctpl/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpl(Module, Function)</h1>


  </div>

  <section class="docstring">

<p>Same as ctpl({Module, Function, '_'})</p>
  </section>
</section>
<section class="detail" id="ctpl/3">

  <div class="detail-header">
    <a href="#ctpl/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ctpl(Module, Function, Arity)</h1>


  </div>

  <section class="docstring">

<p>Same as ctpl({Module, Function, Arity})</p>
  </section>
</section>
<section class="detail" id="dtp/0">

  <div class="detail-header">
    <a href="#dtp/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">dtp() -&gt; ok</h1>


  </div>

  <section class="docstring">

<p><code>dtp</code> stands for <em>d</em>elete <em>t</em>race <em>p</em>atterns. Use this function to &quot;forget&quot; all match specifications saved during calls to <a href="dbg.html#tp/2"><code>tp/2</code></a>. This is useful when one wants to restore other match specifications from a file with <a href="dbg.html#rtp/1"><code>rtp/1</code></a>. Use <a href="dbg.html#dtp/1"><code>dtp/1</code></a> to delete specific saved match specifications.</p>
  </section>
</section>
<section class="detail" id="dtp/1">

  <div class="detail-header">
    <a href="#dtp/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">dtp(N) -&gt; ok</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">N = integer()</li></ul><p><code>dtp</code> stands for <em>d</em>elete <em>t</em>race <em>p</em>attern. Use this function to &quot;forget&quot; a specific match specification saved during calls to <a href="dbg.html#tp/2"><code>tp/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="flush_trace_port/0">

  <div class="detail-header">
    <a href="#flush_trace_port/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">flush_trace_port()</h1>


  </div>

  <section class="docstring">

<p>Equivalent to <code>flush_trace_port(node())</code>.</p>
  </section>
</section>
<section class="detail" id="flush_trace_port/1">

  <div class="detail-header">
    <a href="#flush_trace_port/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">flush_trace_port(Nodename) -&gt; ok | {error, Reason}</h1>


  </div>

  <section class="docstring">

<p>Equivalent to <code>trace_port_control(Nodename,flush)</code>.</p>
  </section>
</section>
<section class="detail" id="fun2ms/1">

  <div class="detail-header">
    <a href="#fun2ms/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">fun2ms(LiteralFun) -&gt; MatchSpec</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">LiteralFun = fun() literal</li><li class="type">MatchSpec = term()</li></ul><p>Pseudo function that by means of a <code>parse_transform</code> translates the <em>literal</em> <code>fun()</code> typed as parameter in the function call to a match specification as described in the <code>match_spec</code> manual of ERTS users guide. (With literal I mean that the <code>fun()</code> needs to textually be written as the parameter of the function, it cannot be held in a variable which in turn is passed to the function).</p><p>The parse transform is implemented in the module <code>ms_transform</code> and the source <em>must</em> include the file <code>ms_transform.hrl</code> in STDLIB for this pseudo function to work. Failing to include the hrl file in the source will result in a runtime error, not a compile time ditto. The include file is easiest included by adding the line <code>-include_lib(&quot;stdlib/include/ms_transform.hrl&quot;).</code> to the source file.</p><p>The <code>fun()</code> is very restricted, it can take only a single parameter (the parameter list to match), a sole variable or a list. It needs to use the <code>is_</code>XXX guard tests and one cannot use language constructs that have no representation in a match_spec (like <code>if</code>, <code>case</code>, <code>receive</code> etc). The return value from the fun will be the return value of the resulting match_spec.</p><p>Example:</p><pre><code class="makeup erlang"><span class="mi">1</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">fun2ms</span><span class="p" data-group-id="0432869444-1">(</span><span class="nf">fun</span><span class="p" data-group-id="0432869444-2">(</span><span class="p" data-group-id="0432869444-3">[</span><span class="n">M</span><span class="p">,</span><span class="n">N</span><span class="p" data-group-id="0432869444-3">]</span><span class="p" data-group-id="0432869444-2">)</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nf">return_trace</span><span class="p" data-group-id="0432869444-4">(</span><span class="p" data-group-id="0432869444-4">)</span><span class="w"> </span><span class="k">end</span><span class="p" data-group-id="0432869444-1">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="0432869444-5">[</span><span class="p" data-group-id="0432869444-6">{</span><span class="p" data-group-id="0432869444-7">[</span><span class="ss">&#39;$1&#39;</span><span class="p">,</span><span class="ss">&#39;$2&#39;</span><span class="p" data-group-id="0432869444-7">]</span><span class="p">,</span><span class="p" data-group-id="0432869444-8">[</span><span class="p" data-group-id="0432869444-9">{</span><span class="ss">&#39;&gt;&#39;</span><span class="p">,</span><span class="ss">&#39;$2&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p" data-group-id="0432869444-9">}</span><span class="p" data-group-id="0432869444-8">]</span><span class="p">,</span><span class="p" data-group-id="0432869444-10">[</span><span class="p" data-group-id="0432869444-11">{</span><span class="ss">return_trace</span><span class="p" data-group-id="0432869444-11">}</span><span class="p" data-group-id="0432869444-10">]</span><span class="p" data-group-id="0432869444-6">}</span><span class="p" data-group-id="0432869444-5">]</span></code></pre><p>Variables from the environment can be imported, so that this works:</p><pre><code class="makeup erlang"><span class="mi">2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">X</span><span class="o">=</span><span class="mi">3</span><span class="p">.</span><span class="w">
</span><span class="mi">3</span><span class="w">
</span><span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">fun2ms</span><span class="p" data-group-id="4132940481-1">(</span><span class="nf">fun</span><span class="p" data-group-id="4132940481-2">(</span><span class="p" data-group-id="4132940481-3">[</span><span class="n">M</span><span class="p">,</span><span class="n">N</span><span class="p" data-group-id="4132940481-3">]</span><span class="p" data-group-id="4132940481-2">)</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">X</span><span class="w">  </span><span class="p">-&gt;</span><span class="w"> </span><span class="nf">return_trace</span><span class="p" data-group-id="4132940481-4">(</span><span class="p" data-group-id="4132940481-4">)</span><span class="w"> </span><span class="k">end</span><span class="p" data-group-id="4132940481-1">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="4132940481-5">[</span><span class="p" data-group-id="4132940481-6">{</span><span class="p" data-group-id="4132940481-7">[</span><span class="ss">&#39;$1&#39;</span><span class="p">,</span><span class="ss">&#39;$2&#39;</span><span class="p" data-group-id="4132940481-7">]</span><span class="p">,</span><span class="p" data-group-id="4132940481-8">[</span><span class="p" data-group-id="4132940481-9">{</span><span class="ss">&#39;&gt;&#39;</span><span class="p">,</span><span class="ss">&#39;$2&#39;</span><span class="p">,</span><span class="p" data-group-id="4132940481-10">{</span><span class="ss">const</span><span class="p">,</span><span class="mi">3</span><span class="p" data-group-id="4132940481-10">}</span><span class="p" data-group-id="4132940481-9">}</span><span class="p" data-group-id="4132940481-8">]</span><span class="p">,</span><span class="p" data-group-id="4132940481-11">[</span><span class="p" data-group-id="4132940481-12">{</span><span class="ss">return_trace</span><span class="p" data-group-id="4132940481-12">}</span><span class="p" data-group-id="4132940481-11">]</span><span class="p" data-group-id="4132940481-6">}</span><span class="p" data-group-id="4132940481-5">]</span></code></pre><p>The imported variables will be replaced by match_spec <code>const</code> expressions, which is consistent with the static scoping for Erlang <code>fun()</code>s. Local or global function calls cannot be in the guard or body of the fun however. Calls to builtin match_spec functions of course is allowed:</p><pre><code class="makeup erlang"><span class="mi">4</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">fun2ms</span><span class="p" data-group-id="5512244244-1">(</span><span class="nf">fun</span><span class="p" data-group-id="5512244244-2">(</span><span class="p" data-group-id="5512244244-3">[</span><span class="n">M</span><span class="p">,</span><span class="n">N</span><span class="p" data-group-id="5512244244-3">]</span><span class="p" data-group-id="5512244244-2">)</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="nf">is_atomm</span><span class="p" data-group-id="5512244244-4">(</span><span class="n">M</span><span class="p" data-group-id="5512244244-4">)</span><span class="w">  </span><span class="p">-&gt;</span><span class="w"> </span><span class="nf">return_trace</span><span class="p" data-group-id="5512244244-5">(</span><span class="p" data-group-id="5512244244-5">)</span><span class="w"> </span><span class="k">end</span><span class="p" data-group-id="5512244244-1">)</span><span class="p">.</span><span class="w">
</span><span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="ss">containing</span><span class="w"> </span><span class="ss">local</span><span class="w"> </span><span class="ss">erlang</span><span class="w"> </span><span class="ss">function</span><span class="w"> </span><span class="nf">calls</span><span class="w"> </span><span class="p" data-group-id="5512244244-6">(</span><span class="ss">&#39;is_atomm&#39;</span><span class="w"> </span><span class="ss">called</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="ss">guard</span><span class="p" data-group-id="5512244244-6">)</span><span class="err">\</span><span class="w">
 </span><span class="ss">cannot</span><span class="w"> </span><span class="ss">be</span><span class="w"> </span><span class="ss">translated</span><span class="w"> </span><span class="ss">into</span><span class="w"> </span><span class="ss">match_spec</span><span class="w">
</span><span class="p" data-group-id="5512244244-7">{</span><span class="ss">error</span><span class="p">,</span><span class="ss">transform_error</span><span class="p" data-group-id="5512244244-7">}</span><span class="w">
</span><span class="mi">5</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">fun2ms</span><span class="p" data-group-id="5512244244-8">(</span><span class="nf">fun</span><span class="p" data-group-id="5512244244-9">(</span><span class="p" data-group-id="5512244244-10">[</span><span class="n">M</span><span class="p">,</span><span class="n">N</span><span class="p" data-group-id="5512244244-10">]</span><span class="p" data-group-id="5512244244-9">)</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="nf">is_atom</span><span class="p" data-group-id="5512244244-11">(</span><span class="n">M</span><span class="p" data-group-id="5512244244-11">)</span><span class="w">  </span><span class="p">-&gt;</span><span class="w"> </span><span class="nf">return_trace</span><span class="p" data-group-id="5512244244-12">(</span><span class="p" data-group-id="5512244244-12">)</span><span class="w"> </span><span class="k">end</span><span class="p" data-group-id="5512244244-8">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="5512244244-13">[</span><span class="p" data-group-id="5512244244-14">{</span><span class="p" data-group-id="5512244244-15">[</span><span class="ss">&#39;$1&#39;</span><span class="p">,</span><span class="ss">&#39;$2&#39;</span><span class="p" data-group-id="5512244244-15">]</span><span class="p">,</span><span class="p" data-group-id="5512244244-16">[</span><span class="p" data-group-id="5512244244-17">{</span><span class="ss">&#39;&gt;&#39;</span><span class="p">,</span><span class="ss">&#39;$2&#39;</span><span class="p">,</span><span class="p" data-group-id="5512244244-18">{</span><span class="ss">const</span><span class="p">,</span><span class="mi">3</span><span class="p" data-group-id="5512244244-18">}</span><span class="p" data-group-id="5512244244-17">}</span><span class="p">,</span><span class="p" data-group-id="5512244244-19">{</span><span class="nb">is_atom</span><span class="p">,</span><span class="ss">&#39;$1&#39;</span><span class="p" data-group-id="5512244244-19">}</span><span class="p" data-group-id="5512244244-16">]</span><span class="p">,</span><span class="p" data-group-id="5512244244-20">[</span><span class="p" data-group-id="5512244244-21">{</span><span class="ss">return_trace</span><span class="p" data-group-id="5512244244-21">}</span><span class="p" data-group-id="5512244244-20">]</span><span class="p" data-group-id="5512244244-14">}</span><span class="p" data-group-id="5512244244-13">]</span></code></pre><p>As you can see by the example, the function can be called from the shell too. The <code>fun()</code> needs to be literally in the call when used from the shell as well. Other means than the parse_transform are used in the shell case, but more or less the same restrictions apply (the exception being records, as they are not handled by the shell).</p><div class="warning"><p>If the parse_transform is not applied to a module which calls this pseudo function, the call will fail in runtime (with a <code>badarg</code>). The module <code>dbg</code> actually exports a function with this name, but it should never really be called except for when using the function in the shell. If the <code>parse_transform</code> is properly applied by including the <code>ms_transform.hrl</code> header file, compiled code will never call the function, but the function call is replaced by a literal match_spec.</p></div><p>More information is provided by the <code>ms_transform</code> manual page in STDLIB.</p>
  </section>
</section>
<section class="detail" id="get_tracer/0">

  <div class="detail-header">
    <a href="#get_tracer/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_tracer()</h1>


  </div>

  <section class="docstring">

<p>Equivalent to <code>get_tracer(node())</code>.</p>
  </section>
</section>
<section class="detail" id="get_tracer/1">

  <div class="detail-header">
    <a href="#get_tracer/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_tracer(Nodename) -&gt; {ok, Tracer}</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Nodename = atom()</li><li class="type">Tracer = port() | pid() | {module(), term()}</li></ul><p>Returns the process, port or tracer module to which all trace messages are sent.</p>
  </section>
</section>
<section class="detail" id="h/0">

  <div class="detail-header">
    <a href="#h/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">h() -&gt; ok </h1>


  </div>

  <section class="docstring">

<p><code>h</code> stands for <em>h</em>elp. Gives a list of items for brief online help.</p>
  </section>
</section>
<section class="detail" id="h/1">

  <div class="detail-header">
    <a href="#h/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">h(Item) -&gt; ok </h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Item = atom()</li></ul><p><code>h</code> stands for <em>h</em>elp. Gives a brief help text for functions in the dbg module. The available items can be listed with <code>dbg:h/0</code>.</p>
  </section>
</section>
<section class="detail" id="i/0">

  <div class="detail-header">
    <a href="#i/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">i() -&gt; ok</h1>


  </div>

  <section class="docstring">

<p><code>i</code> stands for <em>i</em>nformation. Displays information about all traced processes and ports.</p>
  </section>
</section>
<section class="detail" id="ln/0">

  <div class="detail-header">
    <a href="#ln/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ln() -&gt; ok</h1>


  </div>

  <section class="docstring">

<p><code>ln</code> stands for <em>l</em>ist <em>n</em>odes. Shows the list of traced nodes on the console.</p>
  </section>
</section>
<section class="detail" id="ltp/0">

  <div class="detail-header">
    <a href="#ltp/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">ltp() -&gt; ok</h1>


  </div>

  <section class="docstring">

<p><code>ltp</code> stands for <em>l</em>ist <em>t</em>race <em>p</em>atterns. Use this function to recall all match specifications previously used in the session (i. e. previously saved during calls to <a href="dbg.html#tp/2"><code>tp/2</code></a>, and built-in match specifications. This is very useful, as a complicated match_spec can be quite awkward to write. Note that the match specifications are lost if <a href="dbg.html#stop/0"><code>stop/0</code></a> is called.</p><p>Match specifications used can be saved in a file (if a read-write file system is present) for use in later debugging sessions, see <a href="dbg.html#wtp/1"><code>wtp/1</code></a> and <a href="dbg.html#rtp/1"><code>rtp/1</code></a></p><p>There are three built-in trace patterns: <code>exception_trace</code>, <code>caller_trace</code> and <code>caller_exception_trace</code> (or <code>x</code>, <code>c</code> and <code>cx</code> respectively). Exception trace sets a trace which will show function names, parameters, return values and exceptions thrown from functions. Caller traces display function names, parameters and information about which function called it. An example using a built-in alias:</p><pre><code class="makeup erlang"><span class="p" data-group-id="1868432629-1">(</span><span class="ss">x</span><span class="p">@</span><span class="ss">y</span><span class="p" data-group-id="1868432629-1">)</span><span class="mi">4</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">tp</span><span class="p" data-group-id="1868432629-2">(</span><span class="ss">lists</span><span class="p">,</span><span class="ss">sort</span><span class="p">,</span><span class="ss">cx</span><span class="p" data-group-id="1868432629-2">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="1868432629-3">{</span><span class="ss">ok</span><span class="p">,</span><span class="p" data-group-id="1868432629-4">[</span><span class="p" data-group-id="1868432629-5">{</span><span class="ss">matched</span><span class="p">,</span><span class="ss">nonode</span><span class="p">@</span><span class="ss">nohost</span><span class="p">,</span><span class="mi">2</span><span class="p" data-group-id="1868432629-5">}</span><span class="p">,</span><span class="p" data-group-id="1868432629-6">{</span><span class="ss">saved</span><span class="p">,</span><span class="ss">cx</span><span class="p" data-group-id="1868432629-6">}</span><span class="p" data-group-id="1868432629-4">]</span><span class="p" data-group-id="1868432629-3">}</span><span class="w">
</span><span class="p" data-group-id="1868432629-7">(</span><span class="ss">x</span><span class="p">@</span><span class="ss">y</span><span class="p" data-group-id="1868432629-7">)</span><span class="mi">4</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">lists</span><span class="p">:</span><span class="nf">sort</span><span class="p" data-group-id="1868432629-8">(</span><span class="p" data-group-id="1868432629-9">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="1868432629-9">]</span><span class="p" data-group-id="1868432629-8">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="1868432629-10">(</span><span class="o">&lt;</span><span class="mf">0.32</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="1868432629-10">)</span><span class="w"> </span><span class="ss">call</span><span class="w"> </span><span class="nc">lists</span><span class="p">:</span><span class="nf">sort</span><span class="p" data-group-id="1868432629-11">(</span><span class="p" data-group-id="1868432629-12">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="1868432629-12">]</span><span class="p" data-group-id="1868432629-11">)</span><span class="w"> </span><span class="p" data-group-id="1868432629-13">(</span><span class="p" data-group-id="1868432629-14">{</span><span class="ss">erl_eval</span><span class="p">,</span><span class="ss">do_apply</span><span class="p">,</span><span class="mi">5</span><span class="p" data-group-id="1868432629-14">}</span><span class="p" data-group-id="1868432629-13">)</span><span class="w">
</span><span class="p" data-group-id="1868432629-15">(</span><span class="o">&lt;</span><span class="mf">0.32</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="1868432629-15">)</span><span class="w"> </span><span class="ss">returned</span><span class="w"> </span><span class="ss">from</span><span class="w"> </span><span class="nc">lists</span><span class="p">:</span><span class="ss">sort</span><span class="o">/</span><span class="mi">1</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="p" data-group-id="1868432629-16">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p" data-group-id="1868432629-16">]</span><span class="w">
</span><span class="p" data-group-id="1868432629-17">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p" data-group-id="1868432629-17">]</span></code></pre>
  </section>
</section>
<section class="detail" id="n/1">

  <div class="detail-header">
    <a href="#n/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">n(Nodename) -&gt; {ok, Nodename} | {error, Reason}</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Nodename = atom()</li><li class="type">Reason = term()</li></ul><p><code>n</code> stands for <em>n</em>ode. The <code>dbg</code> server keeps a list of nodes where tracing should be performed. Whenever a <a href="dbg.html#tp/2"><code>tp/2</code></a> call or a <a href="dbg.html#p/2"><code>p/2</code></a> call is made, it is executed for all nodes in this list including the local node (except for <a href="dbg.html#p/2"><code>p/2</code></a> with a specific <code>pid()</code> or <code>port()</code> as first argument, in which case the command is executed only on the node where the designated process or port resides).</p><p>This function adds a remote node (<code>Nodename</code>) to the list of nodes where tracing is performed. It starts a tracer process on the remote node, which will send all trace messages to the tracer process on the local node (via the Erlang distribution). If no tracer process is running on the local node, the error reason <code>no_local_tracer</code> is returned. The tracer process on the local node must be started with the <a href="dbg.html#tracer/2"><code>tracer/0/2</code></a> function.</p><p>If <code>Nodename</code> is the local node, the error reason <code>cant_add_local_node</code> is returned.</p><p>If a trace port (see <a href="dbg.html#trace_port/2"><code>trace_port/2</code></a>) is running on the local node, remote nodes cannot be traced with a tracer process. The error reason <code>cant_trace_remote_pid_to_local_port</code> is returned. A trace port can however be started on the remote node with the <a href="dbg.html#tracer/3"><code>tracer/3</code></a> function.</p><p>The function will also return an error if the node <code>Nodename</code> is not reachable.</p>
  </section>
</section>
<section class="detail" id="p/1">

  <div class="detail-header">
    <a href="#p/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">p(Item) -&gt; {ok, MatchDesc} | {error, term()} </h1>


  </div>

  <section class="docstring">

<p>Equivalent to <code>p(Item, [m])</code>.</p>
  </section>
</section>
<section class="detail" id="p/2">

  <div class="detail-header">
    <a href="#p/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">p(Item, Flags) -&gt; {ok, MatchDesc} | {error, term()}</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">MatchDesc = [MatchNum]</li><li class="type">MatchNum = {matched, node(), integer()} | {matched, node(), 0, RPCError}</li><li class="type">RPCError = term()</li></ul><p><code>p</code> stands for <em>p</em>rocess. Traces <code>Item</code> in accordance to the value specified by <code>Flags</code>. The variation of <code>Item</code> is listed below:</p><dl><dt><code>pid()</code> or <code>port()</code></dt><dd>The corresponding process or port is traced. The process or port may be a remote process or port (on another Erlang node). The node must be in the list of traced nodes (see <a href="dbg.html#n/1"><code>n/1</code></a> and <a href="dbg.html#tracer/3"><code>tracer/3</code></a>).</dd><dt><code>all</code></dt><dd>All processes and ports in the system as well as all processes and ports created hereafter are to be traced.</dd><dt><code>processes</code></dt><dd>All processes in the system as well as all processes created hereafter are to be traced.</dd><dt><code>ports</code></dt><dd>All ports in the system as well as all ports created hereafter are to be traced.</dd><dt><code>new</code></dt><dd>All processes and ports created after the call is are to be traced.</dd><dt><code>new_processes</code></dt><dd>All processes created after the call is are to be traced.</dd><dt><code>new_ports</code></dt><dd>All ports created after the call is are to be traced.</dd><dt><code>existing</code></dt><dd>All existing processes and ports are traced.</dd><dt><code>existing_processes</code></dt><dd>All existing processes are traced.</dd><dt><code>existing_ports</code></dt><dd>All existing ports are traced.</dd><dt><code>atom()</code></dt><dd>The process or port with the corresponding registered name is traced. The process or port may be a remote process (on another Erlang node). The node must be added with the <a href="dbg.html#n/1"><code>n/1</code></a> or <a href="dbg.html#tracer/3"><code>tracer/3</code></a> function.</dd><dt><code>integer()</code></dt><dd>The process <code>&lt;0.Item.0&gt;</code> is traced.</dd><dt><code>{X, Y, Z}</code></dt><dd>The process <code>&lt;X.Y.Z&gt;</code> is traced.</dd><dt><code>string()</code></dt><dd>If the <code>Item</code> is a string &quot;&lt;X.Y.Z&gt;&quot; as returned from <a href="https://wojtekmach.pl/otp_docs/erts/erlang.html#pid_to_list/1"><code>pid_to_list/1</code></a>, the process <code>&lt;X.Y.Z&gt;</code> is traced.</dd></dl><p>When enabling an <code>Item</code> that represents a group of processes, the <code>Item</code> is enabled on all nodes added with the <a href="dbg.html#n/1"><code>n/1</code></a> or <a href="dbg.html#tracer/3"><code>tracer/3</code></a> function.</p><p><code>Flags</code> can be a single atom, or a list of flags. The available flags are:</p><dl><dt><code>s (send)</code></dt><dd><p>Traces the messages the process or port sends.</p></dd><dt><code>r (receive)</code></dt><dd><p>Traces the messages the process or port receives.</p></dd><dt><code>m (messages)</code></dt><dd><p>Traces the messages the process or port receives and sends.</p></dd><dt><code>c (call)</code></dt><dd><p>Traces global function calls for the process according to the trace patterns set in the system (see tp/2).</p></dd><dt><code>p (procs)</code></dt><dd><p>Traces process related events to the process.</p></dd><dt><code>ports</code></dt><dd><p>Traces port related events to the port.</p></dd><dt><code>sos (set on spawn)</code></dt><dd><p>Lets all processes created by the traced process inherit the trace flags of the traced process.</p></dd><dt><code>sol (set on link)</code></dt><dd><p>Lets another process, <code>P2</code>, inherit the trace flags of the traced process whenever the traced process links to <code>P2</code>.</p></dd><dt><code>sofs (set on first spawn)</code></dt><dd><p>This is the same as <code>sos</code>, but only for the first process spawned by the traced process.</p></dd><dt><code>sofl (set on first link)</code></dt><dd><p>This is the same as <code>sol</code>, but only for the first call to <a href="https://wojtekmach.pl/otp_docs/erts/erlang.html#link/1"><code>link/1</code></a> by the traced process.</p></dd><dt><code>all</code></dt><dd><p>Sets all flags except <code>silent</code>.</p></dd><dt><code>clear</code></dt><dd><p>Clears all flags.</p></dd></dl><p>The list can also include any of the flags allowed in <a href="https://wojtekmach.pl/otp_docs/erts/erlang.html#trace/3"><code>erlang:trace/3</code></a></p><p>The function returns either an error tuple or a tuple <code>{ok, List}</code>. The <code>List</code> consists of specifications of how many processes and ports that matched (in the case of a pure pid() exactly 1). The specification of matched processes is <code>{matched, Node, N}</code>. If the remote processor call, <code>rpc</code>, to a remote node fails, the <code>rpc</code> error message is delivered as a fourth argument and the number of matched processes are 0. Note that the result {ok, List} may contain a list where <code>rpc</code> calls to one, several or even all nodes failed.</p>
  </section>
</section>
<section class="detail" id="rtp/1">

  <div class="detail-header">
    <a href="#rtp/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">rtp(Name) -&gt; ok | {error, Error}</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Name = string()</li><li class="type">Error = term()</li></ul><p><code>rtp</code> stands for <em>r</em>ead <em>t</em>race <em>p</em>atterns. This function reads match specifications from a file (possibly) generated by the <a href="dbg.html#wtp/1"><code>wtp/1</code></a> function. It checks the syntax of all match specifications and verifies that they are correct. The error handling principle is &quot;all or nothing&quot;, i. e. if some of the match specifications are wrong, none of the specifications are added to the list of saved match specifications for the running system.</p><p>The match specifications in the file are <em>merged</em> with the current match specifications, so that no duplicates are generated. Use <a href="dbg.html#ltp/0"><code>ltp/0</code></a> to see what numbers were assigned to the specifications from the file.</p><p>The function will return an error, either due to I/O problems (like a non existing or non readable file) or due to file format problems. The errors from a bad format file are in a more or less textual format, which will give a hint to what's causing the problem.</p>
  </section>
</section>
<section class="detail" id="stop/0">

  <div class="detail-header">
    <a href="#stop/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">stop() -&gt; ok</h1>


  </div>

  <section class="docstring">

<p>Stops the <code>dbg</code> server and clears all trace flags for all processes and all local trace patterns for all functions. Also shuts down all trace clients and closes all trace ports.</p><p>Note that no global trace patterns are affected by this function.</p>
  </section>
</section>
<section class="detail" id="stop_clear/0">

  <div class="detail-header">
    <a href="#stop_clear/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">stop_clear() -&gt; ok</h1>


  </div>

  <section class="docstring">

<p>Same as stop/0, but also clears all trace patterns on global functions calls.</p>
  </section>
</section>
<section class="detail" id="stop_trace_client/1">

  <div class="detail-header">
    <a href="#stop_trace_client/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">stop_trace_client(Pid) -&gt; ok</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Pid = pid()</li></ul><p>This function shuts down a previously started trace client. The <code>Pid</code> argument is the process id returned from the <a href="dbg.html#trace_client/2"><code>trace_client/2</code></a> or <a href="dbg.html#trace_client/3"><code>trace_client/3</code></a> call.</p>
  </section>
</section>
<section class="detail" id="tp/2">

  <div class="detail-header">
    <a href="#tp/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tp(Module,MatchSpec)</h1>


  </div>

  <section class="docstring">

<p>Same as tp({Module, '_', '_'}, MatchSpec)</p>
  </section>
</section>
<section class="detail" id="tp/2">

  <div class="detail-header">
    <a href="#tp/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tp({Module, Function, Arity}, MatchSpec) -&gt; {ok, MatchDesc} | {error, term()}</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Module = atom() | '_'</li><li class="type">Function = atom() | '_'</li><li class="type">Arity = integer() |'_'</li><li class="type">MatchSpec = integer() | Built-inAlias | [] | match_spec()</li><li class="type">Built-inAlias = x | c | cx</li><li class="type">MatchDesc = [MatchInfo]</li><li class="type">MatchInfo = {saved, integer()} | MatchNum</li><li class="type">MatchNum = {matched, node(), integer()} | {matched, node(), 0, RPCError}</li></ul><p><code>tp</code> stands for <em>t</em>race <em>p</em>attern. This function enables call trace for one or more functions. All exported functions matching the <code>{Module, Function, Arity}</code> argument will be concerned, but the <code>match_spec()</code> may further narrow down the set of function calls generating trace messages.</p><p>For a description of the <code>match_spec()</code> syntax, please turn to the <em>User's guide</em> part of the online documentation for the runtime system (<em>erts</em>). The chapter <em>Match Specifications in Erlang</em> explains the general match specification &quot;language&quot;. The most common generic match specifications used can be found as <code>Built-inAlias</code>', see <a href="dbg.html#ltp/0"><code>ltp/0</code></a> below for details.</p><p>The Module, Function and/or Arity parts of the tuple may be specified as the atom <code>'_'</code> which is a &quot;wild-card&quot; matching all modules/functions/arities. Note, if the Module is specified as <code>'_'</code>, the Function and Arity parts have to be specified as '_' too. The same holds for the Functions relation to the Arity.</p><p>All nodes added with <a href="dbg.html#n/1"><code>n/1</code></a> or <a href="dbg.html#tracer/3"><code>tracer/3</code></a> will be affected by this call, and if Module is not <code>'_'</code> the module will be loaded on all nodes.</p><p>The function returns either an error tuple or a tuple <code>{ok, List}</code>. The <code>List</code> consists of specifications of how many functions that matched, in the same way as the processes and ports are presented in the return value of <a href="dbg.html#p/2"><code>p/2</code></a>.</p><p>There may be a tuple <code>{saved, N}</code> in the return value, if the MatchSpec is other than []. The integer <code>N</code> may then be used in subsequent calls to this function and will stand as an &quot;alias&quot; for the given expression. There are also a couple of built-in aliases for common expressions, see <a href="dbg.html#ltp/0"><code>ltp/0</code></a> below for details.</p><p>If an error is returned, it can be due to errors in compilation of the match specification. Such errors are presented as a list of tuples <code>{error, string()}</code> where the string is a textual explanation of the compilation error. An example:</p><pre><code class="makeup erlang"><span class="p" data-group-id="3059948032-1">(</span><span class="ss">x</span><span class="p">@</span><span class="ss">y</span><span class="p" data-group-id="3059948032-1">)</span><span class="mi">4</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">tp</span><span class="p" data-group-id="3059948032-2">(</span><span class="p" data-group-id="3059948032-3">{</span><span class="ss">dbg</span><span class="p">,</span><span class="ss">ltp</span><span class="p">,</span><span class="mi">0</span><span class="p" data-group-id="3059948032-3">}</span><span class="p">,</span><span class="p" data-group-id="3059948032-4">[</span><span class="p" data-group-id="3059948032-5">{</span><span class="p" data-group-id="3059948032-6">[</span><span class="p" data-group-id="3059948032-6">]</span><span class="p">,</span><span class="p" data-group-id="3059948032-7">[</span><span class="p" data-group-id="3059948032-7">]</span><span class="p">,</span><span class="p" data-group-id="3059948032-8">[</span><span class="p" data-group-id="3059948032-9">{</span><span class="ss">message</span><span class="p">,</span><span class="w"> </span><span class="ss">two</span><span class="p">,</span><span class="w"> </span><span class="ss">arguments</span><span class="p" data-group-id="3059948032-9">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3059948032-10">{</span><span class="ss">noexist</span><span class="p" data-group-id="3059948032-10">}</span><span class="p" data-group-id="3059948032-8">]</span><span class="p" data-group-id="3059948032-5">}</span><span class="p" data-group-id="3059948032-4">]</span><span class="p" data-group-id="3059948032-2">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="3059948032-11">{</span><span class="ss">error</span><span class="p">,</span><span class="w">
 </span><span class="p" data-group-id="3059948032-12">[</span><span class="p" data-group-id="3059948032-13">{</span><span class="ss">error</span><span class="p">,</span><span class="s">&quot;Special form &#39;message&#39; called with wrong number of
          arguments in {message,two,arguments}.&quot;</span><span class="p" data-group-id="3059948032-13">}</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="3059948032-14">{</span><span class="ss">error</span><span class="p">,</span><span class="s">&quot;Function noexist/1 does_not_exist.&quot;</span><span class="p" data-group-id="3059948032-14">}</span><span class="p" data-group-id="3059948032-12">]</span><span class="p" data-group-id="3059948032-11">}</span></code></pre>
  </section>
</section>
<section class="detail" id="tp/3">

  <div class="detail-header">
    <a href="#tp/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tp(Module,Function,MatchSpec)</h1>


  </div>

  <section class="docstring">

<p>Same as tp({Module, Function, '_'}, MatchSpec)</p>
  </section>
</section>
<section class="detail" id="tp/4">

  <div class="detail-header">
    <a href="#tp/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tp(Module, Function, Arity, MatchSpec)</h1>


  </div>

  <section class="docstring">

<p>Same as tp({Module, Function, Arity}, MatchSpec)</p>
  </section>
</section>
<section class="detail" id="tpe/2">

  <div class="detail-header">
    <a href="#tpe/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tpe(Event, MatchSpec) -&gt; {ok, MatchDesc} | {error, term()}</h1>


      <span class="note">(since OTP 19.0)</span>

  </div>

  <section class="docstring">

<ul class="types"><li class="type">Event = send | 'receive'</li><li class="type">MatchSpec = integer() | Built-inAlias | [] | match_spec()</li><li class="type">Built-inAlias = x | c | cx</li><li class="type">MatchDesc = [MatchInfo]</li><li class="type">MatchInfo = {saved, integer()} | MatchNum</li><li class="type">MatchNum = {matched, node(), 1} | {matched, node(), 0, RPCError}</li></ul><p><code>tpe</code> stands for <em>t</em>race <em>p</em>attern <em>e</em>vent. This function associates a match specification with trace event <code>send</code> or <code>'receive'</code>. By default all executed <code>send</code> and <code>'receive'</code> events are traced if enabled for a process. A match specification can be used to filter traced events based on sender, receiver and/or message content.</p><p>For a description of the <code>match_spec()</code> syntax, please turn to the <em>User's guide</em> part of the online documentation for the runtime system (<em>erts</em>). The chapter <em>Match Specifications in Erlang</em> explains the general match specification &quot;language&quot;.</p><p>For <code>send</code>, the matching is done on the list <code>[Receiver, Msg]</code>. <code>Receiver</code> is the process or port identity of the receiver and <code>Msg</code> is the message term. The pid of the sending process can be accessed with the guard function <code>self/0</code>.</p><p>For <code>'receive'</code>, the matching is done on the list <code>[Node, Sender, Msg]</code>. <code>Node</code> is the node name of the sender. <code>Sender</code> is the process or port identity of the sender, or the atom <code>undefined</code> if the sender is not known (which may be the case for remote senders). <code>Msg</code> is the message term. The pid of the receiving process can be accessed with the guard function <code>self/0</code>.</p><p>All nodes added with <a href="dbg.html#n/1"><code>n/1</code></a> or <a href="dbg.html#tracer/3"><code>tracer/3</code></a> will be affected by this call.</p><p>The return value is the same as for <a href="dbg.html#tp/2"><code>tp/2</code></a>. The number of matched events are never larger than 1 as <code>tpe/2</code> does not accept any form of wildcards for argument <code>Event</code>.</p>
  </section>
</section>
<section class="detail" id="tpl/2">

  <div class="detail-header">
    <a href="#tpl/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tpl(Module,MatchSpec)</h1>


  </div>

  <section class="docstring">

<p>Same as tpl({Module, '_', '_'}, MatchSpec)</p>
  </section>
</section>
<section class="detail" id="tpl/2">

  <div class="detail-header">
    <a href="#tpl/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tpl({Module, Function, Arity}, MatchSpec) -&gt; {ok, MatchDesc} | {error, term()}</h1>


  </div>

  <section class="docstring">

<p><code>tpl</code> stands for <em>t</em>race <em>p</em>attern <em>l</em>ocal. This function works as <a href="dbg.html#tp/2"><code>tp/2</code></a>, but enables tracing for local calls (and local functions) as well as for global calls (and functions).</p>
  </section>
</section>
<section class="detail" id="tpl/3">

  <div class="detail-header">
    <a href="#tpl/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tpl(Module,Function,MatchSpec)</h1>


  </div>

  <section class="docstring">

<p>Same as tpl({Module, Function, '_'}, MatchSpec)</p>
  </section>
</section>
<section class="detail" id="tpl/4">

  <div class="detail-header">
    <a href="#tpl/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tpl(Module, Function, Arity, MatchSpec)</h1>


  </div>

  <section class="docstring">

<p>Same as tpl({Module, Function, Arity}, MatchSpec)</p>
  </section>
</section>
<section class="detail" id="trace_client/2">

  <div class="detail-header">
    <a href="#trace_client/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">trace_client(Type, Parameters) -&gt; pid()</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Type = ip | file | follow_file</li><li class="type">Parameters = Filename | WrapFilesSpec | IPClientPortSpec</li><li class="type">Filename = string() | [string()] | atom()</li><li class="type">WrapFilesSpec = see trace_port/2</li><li class="type">Suffix = string()</li><li class="type">IpClientPortSpec = PortNumber | {Hostname, PortNumber}</li><li class="type">PortNumber = integer()</li><li class="type">Hostname = string()</li></ul><p>This function starts a trace client that reads the output created by a trace port driver and handles it in mostly the same way as a tracer process created by the <a href="dbg.html#tracer/0"><code>tracer/0</code></a> function.</p><p>If <code>Type</code> is <code>file</code>, the client reads all trace messages stored in the file named <code>Filename</code> or specified by <code>WrapFilesSpec</code> (must be the same as used when creating the trace, see trace_port/2) and let's the default handler function format the messages on the console. This is one way to interpret the data stored in a file by the file trace port driver.</p><p>If <code>Type</code> is <code>follow_file</code>, the client behaves as in the <code>file</code> case, but keeps trying to read (and process) more data from the file until stopped by <a href="dbg.html#stop_trace_client/1"><code>stop_trace_client/1</code></a>. <code>WrapFilesSpec</code> is not allowed as second argument for this <code>Type</code>.</p><p>If <code>Type</code> is <code>ip</code>, the client connects to the TCP/IP port <code>PortNumber</code> on the host <code>Hostname</code>, from where it reads trace messages until the TCP/IP connection is closed. If no <code>Hostname</code> is specified, the local host is assumed.</p><p>As an example, one can let trace messages be sent over the network to another Erlang node (preferably <em>not</em> distributed), where the formatting occurs:</p><p>On the node <code>stack</code> there's an Erlang node <code>ant@stack</code>, in the shell, type the following:</p><pre><code class="makeup erlang"><span class="ss">ant</span><span class="p">@</span><span class="ss">stack</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">tracer</span><span class="p" data-group-id="1364008920-1">(</span><span class="ss">port</span><span class="p">,</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">trace_port</span><span class="p" data-group-id="1364008920-2">(</span><span class="ss">ip</span><span class="p">,</span><span class="mi">4711</span><span class="p" data-group-id="1364008920-2">)</span><span class="p" data-group-id="1364008920-1">)</span><span class="p">.</span><span class="w">
</span><span class="o">&lt;</span><span class="mf">0.17</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="w">
</span><span class="ss">ant</span><span class="p">@</span><span class="ss">stack</span><span class="o">&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">p</span><span class="p" data-group-id="1364008920-3">(</span><span class="nf">self</span><span class="p" data-group-id="1364008920-4">(</span><span class="p" data-group-id="1364008920-4">)</span><span class="p">,</span><span class="w"> </span><span class="nb">send</span><span class="p" data-group-id="1364008920-3">)</span><span class="p">.</span><span class="w">
</span><span class="p" data-group-id="1364008920-5">{</span><span class="ss">ok</span><span class="p">,</span><span class="mi">1</span><span class="p" data-group-id="1364008920-5">}</span></code></pre><p>All trace messages are now sent to the trace port driver, which in turn listens for connections on the TCP/IP port 4711. If we want to see the messages on another node, preferably on another host, we do like this:</p><pre><code class="makeup erlang"><span class="p">-&gt;</span><span class="w"> </span><span class="nc">dbg</span><span class="p">:</span><span class="nf">trace_client</span><span class="p" data-group-id="4960230239-1">(</span><span class="ss">ip</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4960230239-2">{</span><span class="s">&quot;stack&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">4711</span><span class="p" data-group-id="4960230239-2">}</span><span class="p" data-group-id="4960230239-1">)</span><span class="p">.</span><span class="w">
</span><span class="o">&lt;</span><span class="mf">0.42</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span></code></pre><p>If we now send a message from the shell on the node <code>ant@stack</code>, where all sends from the shell are traced:</p><pre><code class="makeup erlang"><span class="ss">ant</span><span class="p">@</span><span class="ss">stack</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">self</span><span class="p" data-group-id="9024624926-1">(</span><span class="p" data-group-id="9024624926-1">)</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="ss">hello</span><span class="p">.</span><span class="w">
</span><span class="ss">hello</span></code></pre><p>The following will appear at the console on the node that started the trace client:</p><pre><code class="makeup erlang"><span class="p" data-group-id="0648460167-1">(</span><span class="o">&lt;</span><span class="mf">0.23</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="0648460167-1">)</span><span class="w"> </span><span class="o">&lt;</span><span class="mf">0.23</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nf">hello</span><span class="w">
</span><span class="p" data-group-id="0648460167-2">(</span><span class="o">&lt;</span><span class="mf">0.23</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p" data-group-id="0648460167-2">)</span><span class="w"> </span><span class="o">&lt;</span><span class="mf">0.22</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p" data-group-id="0648460167-3">{</span><span class="ss">shell_rep</span><span class="p">,</span><span class="o">&lt;</span><span class="mf">0.23</span><span class="p">.</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">,</span><span class="p" data-group-id="0648460167-4">{</span><span class="ss">value</span><span class="p">,</span><span class="ss">hello</span><span class="p">,</span><span class="p" data-group-id="0648460167-5">[</span><span class="p" data-group-id="0648460167-5">]</span><span class="p">,</span><span class="p" data-group-id="0648460167-6">[</span><span class="p" data-group-id="0648460167-6">]</span><span class="p" data-group-id="0648460167-4">}</span><span class="p" data-group-id="0648460167-3">}</span></code></pre><p>The last line is generated due to internal message passing in the Erlang shell. The process id's will vary.</p>
  </section>
</section>
<section class="detail" id="trace_client/3">

  <div class="detail-header">
    <a href="#trace_client/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">trace_client(Type, Parameters, HandlerSpec) -&gt; pid()</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Type = ip | file | follow_file</li><li class="type">Parameters = Filename | WrapFilesSpec | IPClientPortSpec</li><li class="type">Filename = string() | [string()] | atom()</li><li class="type">WrapFilesSpec = see trace_port/2</li><li class="type">Suffix = string()</li><li class="type">IpClientPortSpec = PortNumber | {Hostname, PortNumber}</li><li class="type">PortNumber = integer()</li><li class="type">Hostname = string()</li><li class="type">HandlerSpec = {HandlerFun, InitialData}</li><li class="type">HandlerFun = fun() (two arguments)</li><li class="type">InitialData = term()</li></ul><p>This function works exactly as <a href="dbg.html#trace_client/2"><code>trace_client/2</code></a>, but allows you to write your own handler function. The handler function works mostly as the one described in <a href="dbg.html#tracer/2"><code>tracer/2</code></a>, but will also have to be prepared to handle trace messages of the form <code>{drop, N}</code>, where <code>N</code> is the number of dropped messages. This pseudo trace message will only occur if the ip trace driver is used.</p><p>For trace type <code>file</code>, the pseudo trace message <code>end_of_trace</code> will appear at the end of the trace. The return value from the handler function is in this case ignored.</p>
  </section>
</section>
<section class="detail" id="trace_port/2">

  <div class="detail-header">
    <a href="#trace_port/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">trace_port(Type, Parameters) -&gt; fun()</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Type = ip | file</li><li class="type">Parameters = Filename | WrapFilesSpec | IPPortSpec</li><li class="type">Filename = string() | [string()] | atom()</li><li class="type">WrapFilesSpec = {Filename, wrap, Suffix} | {Filename, wrap, Suffix, WrapSize} | {Filename, wrap, Suffix, WrapSize, WrapCnt}</li><li class="type">Suffix = string()</li><li class="type">WrapSize = integer() &gt;= 0 | {time, WrapTime}</li><li class="type">WrapTime = integer() &gt;= 1</li><li class="type">WrapCnt = integer() &gt;= 1</li><li class="type">IpPortSpec = PortNumber | {PortNumber, QueSize}</li><li class="type">PortNumber = integer()</li><li class="type">QueSize = integer()</li></ul><p>This function creates a trace port generating <em>fun</em>. The <em>fun</em> takes no arguments and returns a newly opened trace port. The return value from this function is suitable as a second parameter to tracer/2, i.e. <code>dbg:tracer(port, dbg:trace_port(ip, 4711))</code>.</p><p>A trace port is an Erlang port to a dynamically linked in driver that handles trace messages directly, without the overhead of sending them as messages in the Erlang virtual machine.</p><p>Two trace drivers are currently implemented, the <code>file</code> and the <code>ip</code> trace drivers. The file driver sends all trace messages into one or several binary files, from where they later can be fetched and processed with the <a href="dbg.html#trace_client/2"><code>trace_client/2</code></a> function. The ip driver opens a TCP/IP port where it listens for connections. When a client (preferably started by calling <a href="dbg.html#trace_client/2"><code>trace_client/2</code></a> on another Erlang node) connects, all trace messages are sent over the IP network for further processing by the remote client.</p><p>Using a trace port significantly lowers the overhead imposed by using tracing.</p><p>The file trace driver expects a filename or a wrap files specification as parameter. A file is written with a high degree of buffering, why all trace messages are <em>not</em> guaranteed to be saved in the file in case of a system crash. That is the price to pay for low tracing overhead.</p><p>A wrap files specification is used to limit the disk space consumed by the trace. The trace is written to a limited number of files each with a limited size. The actual filenames are <code>Filename ++ SeqCnt ++ Suffix</code>, where <code>SeqCnt</code> counts as a decimal string from <code>0</code> to <code>WrapCnt</code> and then around again from <code>0</code>. When a trace term written to the current file makes it longer than <code>WrapSize</code>, that file is closed, if the number of files in this wrap trace is as many as <code>WrapCnt</code> the oldest file is deleted then a new file is opened to become the current. Thus, when a wrap trace has been stopped, there are at most <code>WrapCnt</code> trace files saved with a size of at least <code>WrapSize</code> (but not much bigger), except for the last file that might even be empty. The default values are <code>WrapSize = 128*1024</code> and <code>WrapCnt = 8</code>.</p><p>The <code>SeqCnt</code> values in the filenames are all in the range <code>0</code> through <code>WrapCnt</code> with a gap in the circular sequence. The gap is needed to find the end of the trace.</p><p>If the <code>WrapSize</code> is specified as <code>{time, WrapTime}</code>, the current file is closed when it has been open more than <code>WrapTime</code> milliseconds, regardless of it being empty or not.</p><p>The ip trace driver has a queue of <code>QueSize</code> messages waiting to be delivered. If the driver cannot deliver messages as fast as they are produced by the runtime system, a special message is sent, which indicates how many messages that are dropped. That message will arrive at the handler function specified in <a href="dbg.html#trace_client/3"><code>trace_client/3</code></a> as the tuple <code>{drop, N}</code> where <code>N</code> is the number of consecutive messages dropped. In case of heavy tracing, drop's are likely to occur, and they surely occur if no client is reading the trace messages. The default value of <code>QueSize</code> is 200.</p>
  </section>
</section>
<section class="detail" id="trace_port_control/1">

  <div class="detail-header">
    <a href="#trace_port_control/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">trace_port_control(Operation)</h1>


  </div>

  <section class="docstring">

<p>Equivalent to <code>trace_port_control(node(),Operation)</code>.</p>
  </section>
</section>
<section class="detail" id="trace_port_control/2">

  <div class="detail-header">
    <a href="#trace_port_control/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">trace_port_control(Nodename,Operation) -&gt;  ok | {ok, Result} | {error, Reason}</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Nodename = atom()</li></ul><p>This function is used to do a control operation on the active trace port driver on the given node (<code>Nodename</code>). Which operations are allowed as well as their return values depend on which trace driver is used.</p><p>Returns either <code>ok</code> or <code>{ok, Result}</code> if the operation was successful, or <code>{error, Reason}</code> if the current tracer is a process or if it is a port not supporting the operation.</p><p>The allowed values for <code>Operation</code> are:</p><dl><dt><code>flush</code></dt><dd><p>This function is used to flush the internal buffers held by a trace port driver. Currently only the file trace driver supports this operation. Returns <code>ok</code>.</p></dd><dt><code>get_listen_port</code></dt><dd><p>Returns <code>{ok, IpPort}</code> where <code>IpPort</code> is the IP port number used by the driver listen socket. Only the ip trace driver supports this operation.</p></dd></dl>
  </section>
</section>
<section class="detail" id="tracer/0">

  <div class="detail-header">
    <a href="#tracer/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tracer() -&gt; {ok, pid()} | {error, already_started}</h1>


  </div>

  <section class="docstring">

<p>This function starts a server on the local node that will be the recipient of all trace messages. All subsequent calls to <a href="dbg.html#p/2"><code>p/2</code></a> will result in messages sent to the newly started trace server.</p><p>A trace server started in this way will simply display the trace messages in a formatted way in the Erlang shell (i. e. use io:format). See <a href="dbg.html#tracer/2"><code>tracer/2</code></a> for a description of how the trace message handler can be customized.</p><p>To start a similar tracer on a remote node, use <a href="dbg.html#n/1"><code>n/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="tracer/2">

  <div class="detail-header">
    <a href="#tracer/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tracer(Type, Data) -&gt; {ok, pid()} | {error, Error}</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Type = port | process | module</li><li class="type">Data = PortGenerator | HandlerSpec | ModuleSpec</li><li class="type">PortGenerator = fun() (no arguments)</li><li class="type">Error = term()</li><li class="type">HandlerSpec = {HandlerFun, InitialData}</li><li class="type">HandlerFun = fun() (two arguments)</li><li class="type">ModuleSpec = fun() (no arguments) | {TracerModule, TracerState}</li><li class="type">TracerModule = atom()</li><li class="type">InitialData = TracerState = term()</li></ul><p>This function starts a tracer server with additional parameters on the local node. The first parameter, the <code>Type</code>, indicates if trace messages should be handled by a receiving process (<code>process</code>), by a tracer port (<code>port</code>) or by a tracer module (<code>module</code>). For a description about tracer ports see <a href="dbg.html#trace_port/2"><code>trace_port/2</code></a> and for a tracer modules see <a href="https://wojtekmach.pl/otp_docs/erts/erl_tracer.html"><code>erl_tracer</code></a>.</p><p>If <code>Type</code> is <code>process</code>, a message handler function can be specified (<code>HandlerSpec</code>). The handler function, which should be a <code>fun</code> taking two arguments, will be called for each trace message, with the first argument containing the message as it is and the second argument containing the return value from the last invocation of the fun. The initial value of the second parameter is specified in the <code>InitialData</code> part of the <code>HandlerSpec</code>. The <code>HandlerFun</code> may choose any appropriate action to take when invoked, and can save a state for the next invocation by returning it.</p><p>If <code>Type</code> is <code>port</code>, then the second parameter should be a <em>fun</em> which takes no arguments and returns a newly opened trace port when called. Such a <em>fun</em> is preferably generated by calling <a href="dbg.html#trace_port/2"><code>trace_port/2</code></a>.</p><p>if <code>Type</code> is <code>module</code>, then the second parameter should be either a tuple describing the <a href="https://wojtekmach.pl/otp_docs/erts/erl_tracer.html"><code>erl_tracer</code></a> module to be used for tracing and the state to be used for that tracer module or a fun returning the same tuple.</p><p>If an error is returned, it can either be due to a tracer server already running (<code>{error,already_started}</code>) or due to the <code>HandlerFun</code> throwing an exception.</p><p>To start a similar tracer on a remote node, use <a href="dbg.html#tracer/3"><code>tracer/3</code></a>.</p>
  </section>
</section>
<section class="detail" id="tracer/3">

  <div class="detail-header">
    <a href="#tracer/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">tracer(Nodename, Type, Data) -&gt; {ok, Nodename} | {error, Reason}</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Nodename = atom()</li></ul><p>This function is equivalent to <a href="dbg.html#tracer/2"><code>tracer/2</code></a>, but acts on the given node. A tracer is started on the node (<code>Nodename</code>) and the node is added to the list of traced nodes.</p><div class="note"><p>This function is not equivalent to <a href="dbg.html#n/1"><code>n/1</code></a>. While <a href="dbg.html#n/1"><code>n/1</code></a> starts a process tracer which redirects all trace information to a process tracer on the local node (i.e. the trace control node), <a href="dbg.html#tracer/3"><code>tracer/3</code></a> starts a tracer of any type which is independent of the tracer on the trace control node.</p></div><p>For details, see <a href="dbg.html#tracer/2"><code>tracer/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="wtp/1">

  <div class="detail-header">
    <a href="#wtp/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">wtp(Name) -&gt; ok | {error, IOError}</h1>


  </div>

  <section class="docstring">

<ul class="types"><li class="type">Name = string()</li><li class="type">IOError = term()</li></ul><p><code>wtp</code> stands for <em>w</em>rite <em>t</em>race <em>p</em>atterns. This function will save all match specifications saved during the session (during calls to <a href="dbg.html#tp/2"><code>tp/2</code></a>) and built-in match specifications in a text file with the name designated by <code>Name</code>. The format of the file is textual, why it can be edited with an ordinary text editor, and then restored with <a href="dbg.html#rtp/1"><code>rtp/1</code></a>.</p><p>Each match spec in the file ends with a full stop (<code>.</code>) and new (syntactically correct) match specifications can be added to the file manually.</p><p>The function returns <code>ok</code> or an error tuple where the second element contains the I/O error that made the writing impossible.</p>
  </section>
</section>

          </div>
        </section>

      <footer class="footer">

        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener">ExDoc</a> (v0.25.1) for the
            <a href="https://elixir-lang.org" title="Elixir" target="_blank">Elixir programming language</a>.
          </span>
          <span class="line">
            Designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" rel="noopener" title="@dignifiedquire">Friedel Ziegelmayer</a>.
          </span>
        </p>
        <p>

            <a href="api-reference.html" title="API reference" class="line footer-button">API Reference</a>

          <button class="line footer-button display-shortcuts-help">
            Display keyboard shortcuts
          </button>
          <button class="line footer-button night-mode-toggle">
            Toggle night mode
          </button>
          <button class="line footer-button display-quick-switch">
            Go to a HexDocs package
          </button>
          <button class="line footer-button tooltips-toggle">
            <span class="tooltips-option-disable">Disable tooltips</span>
            <span class="tooltips-option-enable">Enable tooltips</span>
          </button>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
